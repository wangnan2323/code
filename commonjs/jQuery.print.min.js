/* @license 
 * jQuery.print, version 1.3.2
 *  (c) Sathvik Ponangi, Doers' Guild
 * Licence: CC-By (http://creativecommons.org/licenses/by/3.0/)
 *--------------------------------------------------------------------------*/
(function(n){"use strict";function i(t){var i=n("");try{i=n(t).clone()}catch(r){i=n("<span />").html(t)}return i}function r(t){var i=n.Deferred();try{setTimeout(function(){t.focus();try{t.document.execCommand("print",!1,null)||t.print()}catch(n){t.print()}t.close();i.resolve()},250)}catch(r){i.reject(r)}return i}function t(n){var t=window.open();return t.document.write(n),t.document.close(),r(t)}function u(n){return!!(typeof Node=="object"?n instanceof Node:n&&typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.nodeName=="string")}n.print=n.fn.print=function(){var f,s,l=this,p,h,e,c,a,y,o,v;l instanceof n&&(l=l.get(0));u(l)?(s=n(l),arguments.length>0&&(f=arguments[0])):arguments.length>0?(s=n(arguments[0]),u(s[0])?arguments.length>1&&(f=arguments[1]):(f=arguments[0],s=n("html"))):s=n("html");p={globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:n.Deferred()};f=n.extend({},p,f||{});h=n("");f.globalStyles?h=n("style, link, meta, title"):f.mediaPrint&&(h=n("link[media=print]"));f.stylesheet&&(h=n.merge(h,n('<link rel="stylesheet" href="'+f.stylesheet+'">')));e=s.clone();e=n("<span/>").append(e);e.find(f.noPrintSelector).remove();e.append(h.clone());e.append(i(f.append));e.prepend(i(f.prepend));f.manuallyCopyFormValues&&(e.find("input").each(function(){var t=n(this);t.is("[type='radio']")||t.is("[type='checkbox']")?t.prop("checked")&&t.attr("checked","checked"):t.attr("value",t.val())}),e.find("select").each(function(){var t=n(this);t.find(":selected").attr("selected","selected")}),e.find("textarea").each(function(){var t=n(this);t.text(t.val())}));c=e.html();try{f.deferred.notify("generated_markup",c,e)}catch(b){console.warn("Error notifying deferred",b)}if(e.remove(),f.iframe)try{a=n(f.iframe+"");y=a.length;y===0&&(a=n('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999}));o=a.get(0);o=o.contentWindow||o.contentDocument||o;v=o.document||o.contentDocument||o;v.open();v.write(c);v.close();r(o).done(function(){setTimeout(function(){y===0&&a.remove()},100)}).fail(function(n){console.error("Failed to print from iframe",n);t(c)}).always(function(){try{f.deferred.resolve()}catch(n){console.warn("Error notifying deferred",n)}})}catch(w){console.error("Failed to print from iframe",w.stack,w.message);t(c).always(function(){try{f.deferred.resolve()}catch(n){console.warn("Error notifying deferred",n)}})}else t(c).always(function(){try{f.deferred.resolve()}catch(n){console.warn("Error notifying deferred",n)}});return this}})(jQuery);