$(document).ready(function(){draw2d.designer_activity=function(n){this.cornerWidth=15;this.cornerHeight=15;this.rightOutputPort=null;this.bottomOutputPort=null;this.topOutputPort=null;this.leftOutputPort=null;draw2d.Node.call(this);this.setDimension(130,60);this.originalHeight=-1;this.activityId=null;this.activityName="";this.documentation=null;this.asynchronous=null;this.exclusive=!0;this.isSequential=!1;this._loopCardinality=null;this._collection=null;this._elementVariable=null;this._completionCondition=null;this.openPropertiesCallBack=n};draw2d.designer_activity.prototype=new draw2d.Node;draw2d.designer_activity.prototype.type="designer_activity";draw2d.designer_activity.prototype.generateId=function(n){this.id=n;this.activityId=this.id};draw2d.designer_activity.prototype.setClassName=function(n){this.header.className="activity-header-"+n;this.top_left.className="activity-top-left-"+n;this.top_right.className="activity-top-right-"+n;this.bottom_left.className="bottom-top-left-"+n;this.bottom_right.className="bottom-top-right-"+n};draw2d.designer_activity.prototype.createHTMLElement=function(){var n=document.createElement("div");return n.id=this.id,n.style.position="absolute",n.style.left=this.x+"px",n.style.top=this.y+"px",n.style.height=this.width+"px",n.style.width=this.height+"px",n.className="activity",n.style.zIndex=""+draw2d.Figure.ZOrderBaseIndex,this.top_left=document.createElement("div"),this.top_left.className="activity-top-left",this.top_left.style.width=this.cornerWidth+"px",this.top_left.style.height=this.cornerHeight+"px",this.top_right=document.createElement("div"),this.top_right.className="activity-top-right",this.top_right.style.width=this.cornerWidth+"px",this.top_right.style.height=this.cornerHeight+"px",this.bottom_left=document.createElement("div"),this.bottom_left.className="bottom-top-left",this.bottom_left.style.width=this.cornerWidth+"px",this.bottom_left.style.height=this.cornerHeight+"px",this.bottom_right=document.createElement("div"),this.bottom_right.className="bottom-top-right",this.bottom_right.style.width=this.cornerWidth+"px",this.bottom_right.style.height=this.cornerHeight+"px",this.header=document.createElement("div"),this.header.className="activity-header",this.header.style.position="absolute",this.header.style.left=this.cornerWidth+"px",this.header.style.top="0px",this.header.style.height=this.cornerHeight+"px",this.disableTextSelection(this.header),this.footer=document.createElement("div"),this.footer.className="activity-footer",this.footer.style.position="absolute",this.footer.style.left=this.cornerWidth+"px",this.footer.style.top="0px",this.footer.style.height=this.cornerHeight-1+"px",this.textarea=document.createElement("div"),this.textarea.className="activity-textarea",this.textarea.style.position="absolute",this.textarea.style.left="0px",this.textarea.innerText=this.activityName,this.textarea.style.top=this.cornerHeight+"px",this.disableTextSelection(this.textarea),n.appendChild(this.top_left),n.appendChild(this.header),n.appendChild(this.top_right),n.appendChild(this.textarea),n.appendChild(this.bottom_left),n.appendChild(this.footer),n.appendChild(this.bottom_right),n};draw2d.designer_activity.prototype.setDimension=function(n,t){try{draw2d.Node.prototype.setDimension.call(this,n,t);this.top_left!==null&&(this.top_right.style.left=this.width-this.cornerWidth+"px",this.bottom_right.style.left=this.width-this.cornerWidth+"px",this.bottom_right.style.top=this.height-this.cornerHeight+"px",this.bottom_left.style.top=this.height-this.cornerHeight+"px",this.textarea.style.width=this.width-2+"px",this.textarea.style.height=this.height-this.cornerHeight*2+"px",this.header.style.width=this.width-this.cornerWidth*2+"px",this.footer.style.width=this.width-this.cornerWidth*2+"px",this.footer.style.top=this.height-this.cornerHeight+"px");this.rightOutputPort!==null&&this.rightOutputPort.setPosition(this.width+5,this.height/2);this.bottomOutputPort!==null&&this.bottomOutputPort.setPosition(this.width/2,this.height+5);this.leftOutputPort!==null&&this.leftOutputPort.setPosition(-5,this.height/2);this.topOutputPort!==null&&this.topOutputPort.setPosition(this.width/2,-5)}catch(i){}};draw2d.designer_activity.prototype.setTitle=function(n){this.header.innerHTML=n};draw2d.designer_activity.prototype.setContent=function(n){n==undefined||(this.textarea.innerHTML=n)};draw2d.designer_activity.prototype.onDragstart=function(n,t){var i=draw2d.Node.prototype.onDragstart.call(this,n,t);if(this.header===null)return!1;if(t<this.cornerHeight&&n<this.width&&n>this.width-this.cornerWidth)return this.toggle(),!1;if(this.originalHeight==-1){if(this.canDrag===!0&&n<parseInt(this.header.style.width)&&t<parseInt(this.header.style.height))return!0}else return i};draw2d.designer_activity.prototype.setCanDrag=function(n){(draw2d.Node.prototype.setCanDrag.call(this,n),this.html.style.cursor="",this.header!==null)&&(this.header.style.cursor=n?"move":"")};draw2d.designer_activity.prototype.setWorkflow=function(n){draw2d.Node.prototype.setWorkflow.call(this,n);n!==null&&this.leftOutputPort===null&&(this.leftOutputPort=new draw2d.designer_connection_outputport,this.leftOutputPort.setWorkflow(n),this.leftOutputPort.setName("leftOutputPort"),this.addPort(this.leftOutputPort,-5,this.height/2),this.topOutputPort=new draw2d.designer_connection_outputport,this.topOutputPort.setWorkflow(n),this.topOutputPort.setName("topOutputPort"),this.addPort(this.topOutputPort,this.width/2,-5),this.rightOutputPort=new draw2d.designer_connection_outputport,this.rightOutputPort.setMaxFanOut(5),this.rightOutputPort.setWorkflow(n),this.rightOutputPort.setName("rightOutputPort"),this.addPort(this.rightOutputPort,this.width+5,this.height/2),this.bottomOutputPort=new draw2d.designer_connection_outputport,this.bottomOutputPort.setMaxFanOut(5),this.bottomOutputPort.setWorkflow(n),this.bottomOutputPort.setName("bottomOutputPort"),this.addPort(this.bottomOutputPort,this.width/2,this.height+5))};draw2d.designer_activity.prototype.toggle=function(){};draw2d.designer_activity.prototype.onDoubleClick=function(){typeof this.openPropertiesCallBack=="function"&&this.openPropertiesCallBack(this)};draw2d.designer_activity.prototype.createCommand=function(n){return n.getPolicy()==draw2d.EditPolicy.MOVE?this.canDrag?new draw2d.CommandMove(this):null:n.getPolicy()==draw2d.EditPolicy.DELETE?null:n.getPolicy()==draw2d.EditPolicy.RESIZE?this.isResizeable()?new draw2d.CommandResize(this):null:null};draw2d.designer_activity.prototype.getContextMenu=function(){if(this.workflow.disabled)return null;var n=new draw2d.ContextMenu(100,50),t={activity:this};return n.appendMenuItem(new draw2d.ContextMenuItem("属性","icon-properties",t,function(){var t=this.getData(),n=t.activity;typeof n.openPropertiesCallBack=="function"&&n.openPropertiesCallBack(n)})),n};draw2d.designer_activity.prototype.getIconClassName=function(){};draw2d.designer_activity.prototype.setIcon=function(n){return this.icon=document.createElement("div"),this.icon.style.position="absolute",this.icon.style.width=this.cornerWidth+"px",this.icon.style.height=this.cornerHeight+"px",this.icon.style.left="10px",this.icon.style.top="0px",this.icon.className=n,this.getHTMLElement().appendChild(this.icon),this.icon};draw2d.designer_activity.prototype.setHighlight=function(){this.getHTMLElement().className="activity-highlight"};draw2d.designer_activity.prototype.onMouseEnter=function(){typeof onActivityMouseEnter!="undefined"&&onActivityMouseEnter(this)};draw2d.designer_activity.prototype.onMouseLeave=function(){typeof onActivityMouseLeave!="undefined"&&onActivityMouseLeave(this)};draw2d.designer_activity.prototype.toJsonString=function(){var t=this.getWidth(),i=this.getHeight(),r=this.getAbsoluteX(),u=this.getAbsoluteY(),n='{"sys_id":"'+this.id+'",';return n+='"sys_version":"'+this.sys_version+'",',n+='"sys_remark":"'+this.sys_remark+'",',n+='"jdmc":"'+this.jdmc+'",',n+='"jdms":"'+this.jdms+'",',n+='"jdlx":"'+this.header.className.split("-")[2]+'",',n+='"jdnyh":"'+this.jdnyh+'",',n+='"jdthms":"'+this.jdthms+'",',n+='"sfszlcjd":"'+this.sfszlcjd+'",',n+='"sfhyzlc":"'+this.sfhyzlc+'",',n+='"sfsfzjd":"'+this.sfsfzjd+'",',n+='"zlcdyid":"'+this.zlcdyid+'",',n+='"zb":"'+r+"_"+u+"_"+t+"_"+i+'",',n+='"jdsx":"'+this.jdsx+'",',n+='"sfbqh":"'+this.sfbqh+'",',n+='"czryid":"'+this.czryid+'",',n+='"czrygz":"'+this.czrygz+'",',n+='"fk_dy_yy_sys_id":"'+this.fk_dy_yy_sys_id+'",',n+='"fk_dy_lc_sys_id":"'+this.workflow.process.id+'",',n+='"sys_lastedituserid":"'+_sys_userid+'",',n+='"sys_lasteditusername":"'+_sys_username+'",',n+='"sys_lasteditdatetime":"'+_datetime.toLocaleString()+'"',n+"}"};draw2d.designer_activity.prototype.jdmc="";draw2d.designer_activity.prototype.jdms="";draw2d.designer_activity.prototype.jdlx="";draw2d.designer_activity.prototype.jdnyh="";draw2d.designer_activity.prototype.jdthms="";draw2d.designer_activity.prototype.czryid="";draw2d.designer_activity.prototype.czrygz="";draw2d.designer_activity.prototype.fk_dy_yy_sys_id="";draw2d.designer_activity.prototype.sfszlcjd="";draw2d.designer_activity.prototype.sfhyzlc="";draw2d.designer_activity.prototype.zlcdyid="";draw2d.designer_activity.prototype.jdsx="";draw2d.designer_activity.prototype.sfsfzjd="";draw2d.designer_activity.prototype.sfbqh="";draw2d.designer_activity.prototype.sys_version="";draw2d.designer_activity.prototype.sys_remark=""});
