$(document).ready(function(){draw2d.designer_connection=function(){draw2d.Connection.call(this);var n=new draw2d.ArrowConnectionDecorator,t=new draw2d.Color(0,0,0);n.setBackgroundColor(t);this.setTargetDecorator(n);this.setRouter(new draw2d.ManhattanConnectionRouter);this.setLineWidth(2);this.setColor(t);this.lineId=null;this.lineName=null;this.condition=null;this.listeners=new draw2d.ArrayList;this.label=null};draw2d.designer_connection.prototype=new draw2d.Connection;draw2d.designer_connection.prototype.type="designer_connection";draw2d.designer_connection.prototype.createCommand=function(n){return n.getPolicy()==draw2d.EditPolicy.MOVE?new draw2d.CommandReconnect(this):(n.getPolicy()==draw2d.EditPolicy.DELETE,null)};draw2d.designer_connection.prototype.setLineText=function(n){this.label==null?(this.label=new draw2d.Label(n),this.label.setFontSize(10),this.label.setAlign("left"),this.addFigure(this.label,new draw2d.ManhattanMidpointLocator(this))):this.label.setText(n)};draw2d.designer_connection.prototype.setLineColor=function(n,t,i){var r=new draw2d.Color(n,t,i);this.setColor(r);this.getTargetDecorator().setBackgroundColor(r)};draw2d.designer_connection.prototype.onDoubleClick=function(){openConnectionProperties(this)};draw2d.designer_connection.prototype.getContextMenu=function(){if(this.workflow.disabled)return null;var n=new draw2d.ContextMenu(100,50),t={line:this};return n.appendMenuItem(new draw2d.ContextMenuItem("属性","icon-properties",t,function(){var n=this.getData(),t=n.line;typeof openConnectionProperties!="undefined"&&openConnectionProperties(t)})),n};draw2d.designer_connection.prototype.toJsonString=function(){var n='{"sys_id":"'+this.id+'",';return n+='"sys_version":"'+this.sys_version+'",',n+='"sys_remark":"'+this.sys_remark+'",',n+='"fk_dy_lc_sys_id":"'+this.workflow.process.id+'",',n+='"fk_dy_jd_sys_id_from":"'+this.sourcePort.parentNode.id+'",',n+='"fk_dy_jd_sys_id_to":"'+this.targetPort.parentNode.id+'",',n+='"ljxlx":"'+this.ljxlx+'",',n+='"ljxmc":"'+this.ljxmc+'",',n+='"sys_lastedituserid":"'+_sys_userid+'",',n+='"sys_lasteditusername":"'+_sys_username+'",',n+='"sys_lasteditdatetime":"'+_datetime.toLocaleString()+'"',n+"}"};draw2d.designer_connection.prototype.ljxmc="";draw2d.designer_connection.prototype.ljxlx="";draw2d.designer_connection.prototype.sys_version="";draw2d.designer_connection.prototype.sys_remark=""});
