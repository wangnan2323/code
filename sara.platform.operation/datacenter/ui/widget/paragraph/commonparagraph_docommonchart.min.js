function doCommonChart(n,t,i,r){this.bind=function(u){var f=t[i],ut=[],e=typeof f.dataorderby,a,v,y,p,h,w,b,k,d,g,nt,o,s,c,tt,it,l,rt,ft;switch(e){case"object":case"undefined":f.dataorderby=""}e=typeof f.datadefault;switch(e){case"string":case"undefined":f.event=[]}e=typeof f.datawhere;switch(e){case"object":case"undefined":f.datawhere=""}e=typeof f.datacolumn;switch(e){case"object":case"undefined":f.datacolumn=""}e=typeof f.rowname;switch(e){case"string":case"undefined":f.rowname=[]}e=typeof f.rowvisable;switch(e){case"string":case"undefined":f.rowvisable=[]}e=typeof f.rowlabel;switch(e){case"string":case"undefined":f.rowlabel=[]}a=!1;e=typeof f.stacklabel;switch(e){case"string":f.stacklabel=="true"&&(a=!0)}e=typeof f.rowlabelcolor;switch(e){case"string":case"undefined":f.rowlabelcolor=[]}e=typeof f.rowlabelrotation;switch(e){case"string":case"undefined":f.rowlabelrotation=[]}e=typeof f.rowlabeldistance;switch(e){case"string":case"undefined":f.rowlabeldistance=[]}e=typeof f.rowcolor;switch(e){case"string":case"undefined":f.rowcolor=[]}e=typeof f.rowgroup;switch(e){case"object":case"undefined":f.rowgroup=""}e=typeof f.rowgroupname;switch(e){case"string":case"undefined":f.rowgroupname=[]}e=typeof f.columnname;switch(e){case"string":case"undefined":f.columnname=[]}e=typeof f.columncolor;switch(e){case"string":case"undefined":f.columncolor=[]}e=typeof f.event;switch(e){case"string":case"undefined":f.event=[]}e=typeof f.eventparagraphid;switch(e){case"object":case"undefined":f.eventparagraphid=""}v="1";e=typeof f.xtickwidth;switch(e){case"string":v=f.xtickwidth;break;case"object":case"undefined":v="1"}y="0";e=typeof f.xgridlinewidth;switch(e){case"string":y=f.xgridlinewidth;break;case"object":case"undefined":y="0"}p=!0;e=typeof f.xlabelenabled;switch(e){case"string":p=f.xlabelenabled=="true"?!0:!1;break;case"object":case"undefined":p=!0}h="";e=typeof f.ytitle;switch(e){case"string":h=f.ytitle;break;case"object":case"undefined":h=""}h=ReplaceKeyWord(r,h,n.paragraphid,f.targetdiv,"");w=!0;e=typeof f.ytitleenabled;switch(e){case"string":w=f.ytitleenabled=="true"?!0:!1;break;case"object":case"undefined":w=!0}b="1";e=typeof f.ytickwidth;switch(e){case"string":b=f.ytickwidth;break;case"object":case"undefined":b="1"}k="1";e=typeof f.ygridlinewidth;switch(e){case"string":k=f.ygridlinewidth;break;case"object":case"undefined":k="1"}d=!0;e=typeof f.ylabelenabled;switch(e){case"string":d=f.ylabelenabled=="true"?!0:!1;break;case"object":case"undefined":d=!0}g=!0;e=typeof f.pieallowpointselect;switch(e){case"string":g=f.pieallowpointselect=="true"?!0:!1;break;case"object":case"undefined":g=!0}nt="0";e=typeof f.pieinnersize;switch(e){case"string":nt=f.pieinnersize;break;case"object":case"undefined":nt="0"}o=null;e=typeof f.chartheight;switch(e){case"string":o=f.chartheight;break;case"object":case"undefined":o=""}s=null;e=typeof f.chartwidth;switch(e){case"string":s=f.chartwidth;break;case"object":case"undefined":s=""}c="";e=typeof f.title;switch(e){case"string":c=f.title;break;case"object":case"undefined":c=""}c=ReplaceKeyWord(r,c,n.paragraphid,f.targetdiv,"");tt=!0;e=typeof f.legendenabled;switch(e){case"string":tt=f.legendenabled=="true"?!0:!1;break;case"object":case"undefined":tt=!0}it=!0;e=typeof f.tooltipenabled;switch(e){case"string":it=f.tooltipenabled=="true"?!0:!1;break;case"object":case"undefined":it=!0}l=!1;e=typeof f.isinverted;switch(e){case"string":f.isinverted=="true"&&(l=!0);break;case"object":case"undefined":l=!1}rt=f.datawhere;rt=initWhereStringByQueryParameterHashMap(r,rt,n.paragraphid,f.targetdiv);ft=JSON.stringify({dataNameString:f.dataname,whereString:rt,columnsString:f.datacolumn,orderByString:f.dataorderby,pageSizeString:"",pageIndexString:""});doAjaxFunction(_commonserviceurl+"GetCommonData",ft,{success:function(e){var et=new Function("","return "+e)().rows,rt=new hashMap,ot,ht,st;$.each(et,function(t){var u={},o="",s,h,l,i,c,e;f.rowname.length>1?o=f.rowname[t]:f.rowname.length==1&&(o=f.rowname[0]);o=ReplaceKeyWord(r,o,n.paragraphid,f.targetdiv,"");u.name=o;f.rowvisable.length>1?u.visible=f.rowvisable[t]=="true"?!0:!1:f.rowvisable.length==1&&(u.visible=f.rowvisable[0]=="true"?!0:!1);s="";f.rowtype.length>1?s=f.rowtype[t]:f.rowtype.length==1&&(s=f.rowtype[0]);u.type=s;f.event.length>=1&&(u.allowPointSelect=!0);f.eventparagraphid!=""&&(u.allowPointSelect=!0);f.rowgroup!=""&&(u.stack=f.rowgroupname[t]);f.rowcolor.length>1?u.color="#"+f.rowcolor[t]:f.rowcolor.length==1&&(u.color="#"+f.rowcolor[0]);h={};h.enabled=f.rowlabel.length>1?f.rowlabel[t]=="true"?!0:!1:f.rowlabel.length==1?f.rowlabel[0]=="true"?!0:!1:!0;f.rowlabelrotation.length>1?h.rotation=f.rowlabelrotation[t]:f.rowlabelrotation.length==1&&(h.rotation=f.rowlabelrotation[0]);f.rowlabelcolor.length>1?(h.color="#"+f.rowlabelcolor[t],h.connectorColor="#"+f.rowlabelcolor[t]):f.rowlabelcolor.length==1&&(h.color="#"+f.rowlabelcolor[0],h.connectorColor="#"+f.rowlabelcolor[0]);f.rowlabeldistance.length>1?h.distance=parseInt(f.rowlabeldistance[t]):f.rowlabeldistance.length==1&&(h.distance=parseInt(f.rowlabeldistance[0]));u.dataLabels=h;l=[];i=0;for(c in et[t])typeof et[t][c]=="string"&&(e={},e.name=f.columnname[i],s=="pie"&&f.columncolor.length==f.columnname.length&&(e.color="#"+f.columncolor[i]+""),e.y=+et[t][c],f.datadefault.length>0&&$.each(f.datadefault,function(n){f.datadefault[n].indexOf("columnname")>-1&&f.datadefault[n].split("^")[1]==f.columnname[i]&&(e.selected=!0,s=="pie"&&(e.sliced=!0),rt.put("columnname",f.columnname[i]),rt.put("rowname",o),rt.put("cellvalue",et[t][c]),rt.put("rowindex",t),rt.put("columnindex",i));f.datadefault[n].indexOf("rowname")>-1&&f.datadefault[n].split("^")[1]==o&&(e.selected=!0,s=="pie"&&(e.sliced=!0),rt.put("columnname",f.columnname[i]),rt.put("rowname",o),rt.put("cellvalue",et[t][c]),rt.put("rowindex",t),rt.put("columnindex",i));f.datadefault[n].indexOf("cellvalue")>-1&&f.datadefault[n].split("^")[1]==et[t][c]&&(e.selected=!0,s=="pie"&&(e.sliced=!0),rt.put("columnname",f.columnname[i]),rt.put("rowname",o),rt.put("cellvalue",et[t][c]),rt.put("rowindex",t),rt.put("columnindex",i));f.datadefault[n].indexOf("rowindex")>-1&&f.datadefault[n].split("^")[1]==t.toString()&&(e.selected=!0,s=="pie"&&(e.sliced=!0),rt.put("columnname",f.columnname[i]),rt.put("rowname",o),rt.put("cellvalue",et[t][c]),rt.put("rowindex",t),rt.put("columnindex",i));f.datadefault[n].indexOf("columnindex")>-1&&f.datadefault[n].split("^")[1]==i.toString()&&(e.selected=!0,s=="pie"&&(e.sliced=!0),rt.put("columnname",f.columnname[i]),rt.put("rowname",o),rt.put("cellvalue",et[t][c]),rt.put("rowindex",t),rt.put("columnindex",i))}),l.push(e),i++);u.data=l;s=="pie"&&(u.size="100%",u.innerSize=nt);ut.push(u);u=null;l=null;i=null;o=null});ot={chart:{inverted:l,borderRadius:0,shadow:!1,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:c},subtitle:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},xAxis:{tickWidth:v,gridLineWidth:y,labels:{enabled:p},categories:f.columnname},yAxis:{tickWidth:b,gridLineWidth:k,labels:{enabled:d},title:{enabled:w,text:h},stackLabels:{enabled:a,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},legend:{enabled:tt,align:"center"},tooltip:{enabled:it,headerFormat:'<span style="font-size:10px">{point.key}<\/span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: <\/td><td style="padding:0"><b>{point.y:.1f}<\/b><\/td><\/tr>',footerFormat:"<\/table>",shared:!0,useHTML:!0},plotOptions:{column:{stacking:f.rowgroup,pointPadding:.2,borderWidth:0},line:{enableMouseTracking:!0},pie:{allowPointSelect:g,cursor:"pointer",dataLabels:{format:"<b>{point.name}<\/b>: {point.percentage:.1f} %"},shadow:!1,center:["50%","50%"],showInLegend:!0},series:{}},series:ut};f.eventparagraphid!=""&&(ht=f.eventparagraphid,ot.plotOptions.series={cursor:"pointer",events:{click:function(n){var t=new hashMap;t.put("columnname",n.point.name);t.put("rowname",this.name);t.put("cellvalue",n.point.y);t.put("rowindex",n.point.x);t.put("columnindex","");doPaperModal(t,ht);t=null}}});st=f.event;st.length>0&&(ot.plotOptions.series={cursor:"pointer",events:{click:function(t){var i=new hashMap;i.put("columnname",t.point.name);i.put("rowname",this.name);i.put("cellvalue",t.point.y);i.put("rowindex",t.point.x);i.put("columnindex","");doType(n,st,0,i,{success:function(){i=null}})}}});st.length>0?ot.chart.events={load:function(){doType(n,st,0,rt,{success:function(){setTimeout(function(){u.successHandler(n,t,i,r);rt=null},500)}})}}:setTimeout(function(){u.successHandler(n,t,i,r)},500);s!=undefined&&s!=null&&s!=""&&s!=0&&s!="0"&&(ot.chart.width=s);o!=undefined&&o!=null&&o!=""&&o!=0&&o!="0"&&(ot.chart.height=o);$("#div_"+n.paragraphid+">#div_row>#"+f.targetdiv+"").highcharts(ot);ajaxResultJson=null;l=null;c=null;h=null;a=null;ut=null;et=null;f=null;ft=null},fail:function(n){alert(n)}})}}
