/*!
 * jsoneditor.js
 *
 * @brief
 * JSONEditor is a web-based tool to view, edit, and format JSON.
 * It shows data a clear, editable treeview.
 *
 * Supported browsers: Chrome, Firefox, Safari, Opera, Internet Explorer 8+
 *
 * @license
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 * Copyright (c) 2011-2014 Jos de Jong, http://jsoneditoronline.org
 *
 * @author  Jos de Jong, <wjosdejong@gmail.com>
 * @version 3.1.1
 * @date    2014-08-01
 */
(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define(t):typeof exports=="object"?exports.JSONEditor=t():n.JSONEditor=t()})(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){var u,r;!(u=[i(1),i(2),i(3)],r=function(n,t,i){function r(n,t,u){if(!(this instanceof r))throw new Error('JSONEditor constructor called without "new".');var f=i.getInternetExplorerVersion();if(f!=-1&&f<9)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");arguments.length&&this._create(n,t,u)}return r.modes={},r.prototype._create=function(n,t,i){this.container=n;this.options=t||{};this.json=i||{};var r=this.options.mode||"tree";this.setMode(r)},r.prototype._delete=function(){},r.prototype.set=function(n){this.json=n},r.prototype.get=function(){return this.json},r.prototype.setText=function(n){this.json=i.parse(n)},r.prototype.getText=function(){return JSON.stringify(this.json)},r.prototype.setName=function(n){this.options||(this.options={});this.options.name=n},r.prototype.getName=function(){return this.options&&this.options.name},r.prototype.setMode=function(n){var s=this.container,u=i.extend({},this.options),e,o,t,f;if(u.mode=n,t=r.modes[n],t)try{if(f=t.data=="text",o=this.getName(),e=this[f?"getText":"get"](),this._delete(),i.clear(this),i.extend(this,t.mixin),this.create(s,u),this.setName(o),this[f?"setText":"set"](e),typeof t.load=="function")try{t.load.call(this)}catch(h){}}catch(h){this._onError(h)}else throw new Error('Unknown mode "'+u.mode+'"');},r.prototype._onError=function(n){if(typeof this.onError=="function"){i.log("WARNING: JSONEditor.onError is deprecated. Use options.error instead.");this.onError(n)}if(this.options&&typeof this.options.error=="function")this.options.error(n);else throw n;},r.registerMode=function(n){var t,f,u,e;if(i.isArray(n))for(t=0;t<n.length;t++)r.registerMode(n[t]);else{if(!("mode"in n))throw new Error('Property "mode" missing');if(!("mixin"in n))throw new Error('Property "mixin" missing');if(!("data"in n))throw new Error('Property "data" missing');if(u=n.mode,u in r.modes)throw new Error('Mode "'+u+'" already registered');if(typeof n.mixin.create!="function")throw new Error('Required function "create" missing on mixin');for(e=["setMode","registerMode","modes"],t=0;t<e.length;t++)if(f=e[t],f in n.mixin)throw new Error('Reserved property "'+f+'" not allowed in mixin');r.modes[u]=n}},r.registerMode(n),r.registerMode(t),r}.apply(null,u),r!==undefined&&(n.exports=r))},function(n,t,i){var u,r;!(u=[i(4),i(5),i(6),i(7),i(8),i(3)],r=function(n,t,i,r,u,f){var e={},s,o;return e.create=function(i,r){if(!i)throw new Error("No container element provided.");this.container=i;this.dom={};this.highlighter=new n;this.selection=undefined;this._setOptions(r);this.options.history&&this.options.mode!=="view"&&(this.history=new t(this));this._createFrame();this._createTable()},e._delete=function(){this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame)},e._setOptions=function(n){if(this.options={search:!0,history:!0,mode:"tree",name:undefined},n)for(var t in n)n.hasOwnProperty(t)&&(this.options[t]=n[t])},s=undefined,o=null,e.set=function(n,t){var i,u,e;t&&(f.log('Warning: second parameter "name" is deprecated. Use setName(name) instead.'),this.options.name=t);n instanceof Function||n===undefined?this.clear():(this.content.removeChild(this.table),i={field:this.options.name,value:n},u=new r(this,i),this._setRoot(u),e=!1,this.node.expand(e),this.content.appendChild(this.table));this.history&&this.history.clear()},e.get=function(){return s&&s.blur(),this.node?this.node.getValue():undefined},e.getText=function(){return JSON.stringify(this.get())},e.setText=function(n){this.set(f.parse(n))},e.setName=function(n){this.options.name=n;this.node&&this.node.updateField(this.options.name)},e.getName=function(){return this.options.name},e.clear=function(){this.node&&(this.node.collapse(),this.tbody.removeChild(this.node.getDom()),delete this.node)},e._setRoot=function(n){this.clear();this.node=n;this.tbody.appendChild(n.getDom())},e.search=function(n){var t;return this.node?(this.content.removeChild(this.table),t=this.node.search(n),this.content.appendChild(this.table)):t=[],t},e.expandAll=function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},e.collapseAll=function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},e._onAction=function(n,t){if(this.history&&this.history.add(n,t),this.options.change)try{this.options.change()}catch(i){f.log("Error in change callback: ",i)}},e.startAutoScroll=function(n){var r=this,t=this.content,u=f.getAbsoluteTop(t),e=t.clientHeight,o=u+e,i=24;this.autoScrollStep=n<u+i&&t.scrollTop>0?(u+i-n)/3:n>o-i&&e+t.scrollTop<t.scrollHeight?(o-i-n)/3:undefined;this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval(function(){r.autoScrollStep?t.scrollTop-=r.autoScrollStep:r.stopAutoScroll()},50)):this.stopAutoScroll()},e.stopAutoScroll=function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer);this.autoScrollStep&&delete this.autoScrollStep},e.setSelection=function(n){n&&("scrollTop"in n&&this.content&&(this.content.scrollTop=n.scrollTop),n.range&&f.setSelectionOffset(n.range),n.dom&&n.dom.focus())},e.getSelection=function(){return{dom:o,scrollTop:this.content?this.content.scrollTop:0,range:f.getSelectionOffset()}},e.scrollTo=function(n,t){var r=this.content,i;if(r){i=this;i.animateTimeout&&(clearTimeout(i.animateTimeout),delete i.animateTimeout);i.animateCallback&&(i.animateCallback(!1),delete i.animateCallback);var u=r.clientHeight,o=r.scrollHeight-u,f=Math.min(Math.max(n-u/4,0),o),e=function(){var u=r.scrollTop,n=f-u;Math.abs(n)>3?(r.scrollTop+=n/3,i.animateCallback=t,i.animateTimeout=setTimeout(e,50)):(t&&t(!0),r.scrollTop=f,delete i.animateTimeout,delete i.animateCallback)};e()}else t&&t(!1)},e._createFrame=function(){function n(n){t._onEvent(n)}var t,o,s,r,e,h;this.frame=document.createElement("div");this.frame.className="jsoneditor";this.container.appendChild(this.frame);t=this;this.frame.onclick=function(t){var i=t.target;n(t);i.nodeName=="BUTTON"&&t.preventDefault()};this.frame.oninput=n;this.frame.onchange=n;this.frame.onkeydown=n;this.frame.onkeyup=n;this.frame.oncut=n;this.frame.onpaste=n;this.frame.onmousedown=n;this.frame.onmouseup=n;this.frame.onmouseover=n;this.frame.onmouseout=n;f.addEventListener(this.frame,"focus",n,!0);f.addEventListener(this.frame,"blur",n,!0);this.frame.onfocusin=n;this.frame.onfocusout=n;this.menu=document.createElement("div");this.menu.className="menu";this.frame.appendChild(this.menu);o=document.createElement("button");o.className="expand-all";o.title="Expand all fields";o.onclick=function(){t.expandAll()};this.menu.appendChild(o);s=document.createElement("button");s.title="Collapse all fields";s.className="collapse-all";s.onclick=function(){t.collapseAll()};this.menu.appendChild(s);this.history&&(r=document.createElement("button"),r.className="undo separator",r.title="Undo last action (Ctrl+Z)",r.onclick=function(){t._onUndo()},this.menu.appendChild(r),this.dom.undo=r,e=document.createElement("button"),e.className="redo",e.title="Redo (Ctrl+Shift+Z)",e.onclick=function(){t._onRedo()},this.menu.appendChild(e),this.dom.redo=e,this.history.onChange=function(){r.disabled=!t.history.canUndo();e.disabled=!t.history.canRedo()},this.history.onChange());this.options&&this.options.modes&&this.options.modes.length&&(h=u.create(this,this.options.modes,this.options.mode),this.menu.appendChild(h),this.dom.modeBox=h);this.options.search&&(this.searchBox=new i(this,this.menu))},e._onUndo=function(){this.history&&(this.history.undo(),this.options.change&&this.options.change())},e._onRedo=function(){this.history&&(this.history.redo(),this.options.change&&this.options.change())},e._onEvent=function(n){var i=n.target,t;if(n.type=="keydown"&&this._onKeyDown(n),n.type=="focus"&&(o=i),t=r.getNodeFromTarget(i),t)t.onEvent(n)},e._onKeyDown=function(n){var t=n.which||n.keyCode,r=n.ctrlKey,u=n.shiftKey,i=!1,e;t==9&&setTimeout(function(){f.selectContentEditable(o)},0);this.searchBox&&(r&&t==70?(this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),i=!0):(t==114||r&&t==71)&&(e=!0,u?this.searchBox.previous(e):this.searchBox.next(e),i=!0));this.history&&(r&&!u&&t==90?(this._onUndo(),i=!0):r&&u&&t==90&&(this._onRedo(),i=!0));i&&(n.preventDefault(),n.stopPropagation())},e._createTable=function(){var t=document.createElement("div"),n;t.className="outer";this.contentOuter=t;this.content=document.createElement("div");this.content.className="tree";t.appendChild(this.content);this.table=document.createElement("table");this.table.className="tree";this.content.appendChild(this.table);this.colgroupContent=document.createElement("colgroup");this.options.mode==="tree"&&(n=document.createElement("col"),n.width="24px",this.colgroupContent.appendChild(n));n=document.createElement("col");n.width="24px";this.colgroupContent.appendChild(n);n=document.createElement("col");this.colgroupContent.appendChild(n);this.table.appendChild(this.colgroupContent);this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.frame.appendChild(t)},[{mode:"tree",mixin:e,data:"json"},{mode:"view",mixin:e,data:"json"},{mode:"form",mixin:e,data:"json"}]}.apply(null,u),r!==undefined&&(n.exports=r))},function(n,t,i){var u,r;!(u=[i(8),i(3)],r=function(n,t){var i={};return i.create=function(i,r){var e,o,s,c,u,f,h;if(r=r||{},this.options=r,this.indentation=r.indentation?Number(r.indentation):2,this.mode=r.mode=="code"?"code":"text",this.mode=="code"&&typeof ace=="undefined"&&(this.mode="text",t.log("WARNING: Cannot load code editor, Ace library not loaded. Falling back to plain text editor")),e=this,this.container=i,this.dom={},this.editor=undefined,this.textarea=undefined,this.width=i.clientWidth,this.height=i.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor",this.frame.onclick=function(n){n.preventDefault()},this.menu=document.createElement("div"),this.menu.className="menu",this.frame.appendChild(this.menu),o=document.createElement("button"),o.className="format",o.title="Format JSON data, with proper indentation and line feeds",this.menu.appendChild(o),o.onclick=function(){try{e.format()}catch(n){e._onError(n)}},s=document.createElement("button"),s.className="compact",s.title="Compact JSON data, remove all whitespaces",this.menu.appendChild(s),s.onclick=function(){try{e.compact()}catch(n){e._onError(n)}},this.options&&this.options.modes&&this.options.modes.length&&(c=n.create(this,this.options.modes,this.options.mode),this.menu.appendChild(c),this.dom.modeBox=c),this.content=document.createElement("div"),this.content.className="outer",this.frame.appendChild(this.content),this.container.appendChild(this.frame),this.mode=="code"){if(this.editorDom=document.createElement("div"),this.editorDom.style.height="100%",this.editorDom.style.width="100%",this.content.appendChild(this.editorDom),u=ace.edit(this.editorDom),u.setTheme("ace/theme/jsoneditor"),u.setShowPrintMargin(!1),u.setFontSize(13),u.getSession().setMode("ace/mode/json"),u.getSession().setTabSize(2),u.getSession().setUseSoftTabs(!0),u.getSession().setUseWrapMode(!0),this.editor=u,f=document.createElement("a"),f.appendChild(document.createTextNode("powered by ace")),f.href="http://ace.ajax.org",f.target="_blank",f.className="poweredBy",f.onclick=function(){window.open(f.href,f.target)},this.menu.appendChild(f),r.change)u.on("change",function(){r.change()})}else h=document.createElement("textarea"),h.className="text",h.spellcheck=!1,this.content.appendChild(h),this.textarea=h,r.change&&(this.textarea.oninput===null?this.textarea.oninput=function(){r.change()}:this.textarea.onchange=function(){r.change()})},i._delete=function(){this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame)},i._onError=function(n){if(typeof this.onError=="function"){t.log("WARNING: JSONEditor.onError is deprecated. Use options.error instead.");this.onError(n)}if(this.options&&typeof this.options.error=="function")this.options.error(n);else throw n;},i.compact=function(){var n=t.parse(this.getText());this.setText(JSON.stringify(n))},i.format=function(){var n=t.parse(this.getText());this.setText(JSON.stringify(n,null,this.indentation))},i.focus=function(){this.textarea&&this.textarea.focus();this.editor&&this.editor.focus()},i.resize=function(){if(this.editor)this.editor.resize(!1)},i.set=function(n){this.setText(JSON.stringify(n,null,this.indentation))},i.get=function(){return t.parse(this.getText())},i.getText=function(){return this.textarea?this.textarea.value:this.editor?this.editor.getValue():""},i.setText=function(n){this.textarea&&(this.textarea.value=n);this.editor&&this.editor.setValue(n,-1)},[{mode:"text",mixin:i,data:"text",load:i.format},{mode:"code",mixin:i,data:"text",load:i.format}]}.apply(null,u),r!==undefined&&(n.exports=r))},function(n,t,i){var r;!(r=function(){var n={},i,t;return n.parse=function(t){try{return JSON.parse(t)}catch(i){try{return n.parseJS(t)}catch(r){n.validate(t);throw i;}}},n.parseJS=function(n){for(var f=[],r=!1,u=0,t,i;u<n.length;)t=n.charAt(u),(t==='"'||t==="'")&&(t===r?r=!1:r?n.charAt(u-1)!=="\\"&&f.push("\\"):r=t),f.push(t),u++;return i=f.join(""),i=i.replace(/(.)'/g,function(n,t){var i=t.replace(/"/g,'\\"');return t=="\\"?"'":i+'"'}),i=i.replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)(\s*:)/g,function(n,t,i,r){return t+'"'+i+'"'+r}),JSON.parse(i)},n.validate=function(n){typeof jsonlint!="undefined"?jsonlint.parse(n):JSON.parse(n)},n.extend=function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},n.clear=function(n){for(var t in n)n.hasOwnProperty(t)&&delete n[t];return n},n.log=function(){typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)},n.type=function(t){return t===null?"null":t===undefined?"undefined":t instanceof Number||typeof t=="number"?"number":t instanceof String||typeof t=="string"?"string":t instanceof Boolean||typeof t=="boolean"?"boolean":t instanceof RegExp||typeof t=="regexp"?"regexp":n.isArray(t)?"array":"object"},i=/^https?:\/\/\S+$/,n.isUrl=function(n){return(typeof n=="string"||n instanceof String)&&i.test(n)},n.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"},n.getAbsoluteLeft=function(n){var t=n.getBoundingClientRect();return t.left+window.pageXOffset||document.scrollLeft||0},n.getAbsoluteTop=function(n){var t=n.getBoundingClientRect();return t.top+window.pageYOffset||document.scrollTop||0},n.addClassName=function(n,t){var i=n.className.split(" ");i.indexOf(t)==-1&&(i.push(t),n.className=i.join(" "))},n.removeClassName=function(n,t){var i=n.className.split(" "),r=i.indexOf(t);r!=-1&&(i.splice(r,1),n.className=i.join(" "))},n.stripFormatting=function(t){for(var i,r,u,e,o=t.childNodes,f=0,s=o.length;f<s;f++){if(i=o[f],i.style&&i.removeAttribute("style"),r=i.attributes,r)for(u=r.length-1;u>=0;u--)e=r[u],e.specified==!0&&i.removeAttribute(e.name);n.stripFormatting(i)}},n.setEndOfContentEditable=function(n){var t,i;document.createRange&&(t=document.createRange(),t.selectNodeContents(n),t.collapse(!1),i=window.getSelection(),i.removeAllRanges(),i.addRange(t))},n.selectContentEditable=function(n){if(n&&n.nodeName=="DIV"){var t,i;window.getSelection&&document.createRange&&(i=document.createRange(),i.selectNodeContents(n),t=window.getSelection(),t.removeAllRanges(),t.addRange(i))}},n.getSelection=function(){if(window.getSelection){var n=window.getSelection();if(n.getRangeAt&&n.rangeCount)return n.getRangeAt(0)}return null},n.setSelection=function(n){if(n&&window.getSelection){var t=window.getSelection();t.removeAllRanges();t.addRange(n)}},n.getSelectionOffset=function(){var t=n.getSelection();return t&&"startOffset"in t&&"endOffset"in t&&t.startContainer&&t.startContainer==t.endContainer?{startOffset:t.startOffset,endOffset:t.endOffset,container:t.startContainer.parentNode}:null},n.setSelectionOffset=function(t){var r,i;document.createRange&&window.getSelection&&(r=window.getSelection(),r&&(i=document.createRange(),i.setStart(t.container.firstChild,t.startOffset),i.setEnd(t.container.firstChild,t.endOffset),n.setSelection(i)))},n.getInnerText=function(t,i){var c=i==undefined,o,r,f,h,u,s,e;if(c&&(i={text:"",flush:function(){var n=this.text;return this.text="",n},set:function(n){this.text=n}}),t.nodeValue)return i.flush()+t.nodeValue;if(t.hasChildNodes()){for(o=t.childNodes,r="",f=0,h=o.length;f<h;f++)u=o[f],u.nodeName=="DIV"||u.nodeName=="P"?(s=o[f-1],e=s?s.nodeName:undefined,e&&e!="DIV"&&e!="P"&&e!="BR"&&(r+="\n",i.flush()),r+=n.getInnerText(u,i),i.set("\n")):u.nodeName=="BR"?(r+=i.flush(),i.set("\n")):r+=n.getInnerText(u,i);return r}return t.nodeName=="P"&&n.getInternetExplorerVersion()!=-1?i.flush():""},n.getInternetExplorerVersion=function(){var n,i,r;return t==-1&&(n=-1,navigator.appName=="Microsoft Internet Explorer"&&(i=navigator.userAgent,r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),r.exec(i)!=null&&(n=parseFloat(RegExp.$1))),t=n),t},n.isFirefox=function(){return navigator.userAgent.indexOf("Firefox")!=-1},t=-1,n.addEventListener=function(t,i,r,u){if(t.addEventListener)return u===undefined&&(u=!1),i==="mousewheel"&&n.isFirefox()&&(i="DOMMouseScroll"),t.addEventListener(i,r,u),r;if(t.attachEvent){var f=function(){return r.call(t,window.event)};return t.attachEvent("on"+i,f),f}},n.removeEventListener=function(t,i,r,u){t.removeEventListener?(u===undefined&&(u=!1),i==="mousewheel"&&n.isFirefox()&&(i="DOMMouseScroll"),t.removeEventListener(i,r,u)):t.detachEvent&&t.detachEvent("on"+i,r)},n}.call(t,i,t,n),r!==undefined&&(n.exports=r))},function(n,t,i){var r;!(r=function(){function n(){this.locked=!1}return n.prototype.highlight=function(n){this.locked||(this.node!=n&&(this.node&&this.node.setHighlight(!1),this.node=n,this.node.setHighlight(!0)),this._cancelUnhighlight())},n.prototype.unhighlight=function(){if(!this.locked){var n=this;this.node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout(function(){n.node.setHighlight(!1);n.node=undefined;n.unhighlightTimer=undefined},0))}},n.prototype._cancelUnhighlight=function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=undefined)},n.prototype.lock=function(){this.locked=!0},n.prototype.unlock=function(){this.locked=!1},n}.call(t,i,t,n),r!==undefined&&(n.exports=r))},function(n,t,i){var u,r;!(u=[i(3)],r=function(n){function t(n){this.editor=n;this.clear();this.actions={editField:{undo:function(n){n.node.updateField(n.oldValue)},redo:function(n){n.node.updateField(n.newValue)}},editValue:{undo:function(n){n.node.updateValue(n.oldValue)},redo:function(n){n.node.updateValue(n.newValue)}},appendNode:{undo:function(n){n.parent.removeChild(n.node)},redo:function(n){n.parent.appendChild(n.node)}},insertBeforeNode:{undo:function(n){n.parent.removeChild(n.node)},redo:function(n){n.parent.insertBefore(n.node,n.beforeNode)}},insertAfterNode:{undo:function(n){n.parent.removeChild(n.node)},redo:function(n){n.parent.insertAfter(n.node,n.afterNode)}},removeNode:{undo:function(n){var t=n.parent,i=t.childs[n.index]||t.append;t.insertBefore(n.node,i)},redo:function(n){n.parent.removeChild(n.node)}},duplicateNode:{undo:function(n){n.parent.removeChild(n.clone)},redo:function(n){n.parent.insertAfter(n.clone,n.node)}},changeType:{undo:function(n){n.node.changeType(n.oldType)},redo:function(n){n.node.changeType(n.newType)}},moveNode:{undo:function(n){n.startParent.moveTo(n.node,n.startIndex)},redo:function(n){n.endParent.moveTo(n.node,n.endIndex)}},sort:{undo:function(n){var t=n.node;t.hideChilds();t.sort=n.oldSort;t.childs=n.oldChilds;t.showChilds()},redo:function(n){var t=n.node;t.hideChilds();t.sort=n.newSort;t.childs=n.newChilds;t.showChilds()}}}}return t.prototype.onChange=function(){},t.prototype.add=function(n,t){this.index++;this.history[this.index]={action:n,params:t,timestamp:new Date};this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1);this.onChange()},t.prototype.clear=function(){this.history=[];this.index=-1;this.onChange()},t.prototype.canUndo=function(){return this.index>=0},t.prototype.canRedo=function(){return this.index<this.history.length-1},t.prototype.undo=function(){var t,i;this.canUndo()&&(t=this.history[this.index],t&&(i=this.actions[t.action],i&&i.undo?(i.undo(t.params),t.params.oldSelection&&this.editor.setSelection(t.params.oldSelection)):n.log('Error: unknown action "'+t.action+'"')),this.index--,this.onChange())},t.prototype.redo=function(){var t,i;this.canRedo()&&(this.index++,t=this.history[this.index],t&&(i=this.actions[t.action],i&&i.redo?(i.redo(t.params),t.params.newSelection&&this.editor.setSelection(t.params.newSelection)):n.log('Error: unknown action "'+t.action+'"')),this.onChange())},t}.apply(null,u),r!==undefined&&(n.exports=r))},function(n,t,i){var r;!(r=function(){function n(n,t){var f=this,o,c,r,i,l,e,v,y,a,u,s,h;this.editor=n;this.timeout=undefined;this.delay=200;this.lastText=undefined;this.dom={};this.dom.container=t;o=document.createElement("table");this.dom.table=o;o.className="search";t.appendChild(o);c=document.createElement("tbody");this.dom.tbody=c;o.appendChild(c);r=document.createElement("tr");c.appendChild(r);i=document.createElement("td");r.appendChild(i);l=document.createElement("div");this.dom.results=l;l.className="results";i.appendChild(l);i=document.createElement("td");r.appendChild(i);e=document.createElement("div");this.dom.input=e;e.className="frame";e.title="Search fields and values";i.appendChild(e);v=document.createElement("table");e.appendChild(v);y=document.createElement("tbody");v.appendChild(y);r=document.createElement("tr");y.appendChild(r);a=document.createElement("button");a.className="refresh";i=document.createElement("td");i.appendChild(a);r.appendChild(i);u=document.createElement("input");this.dom.search=u;u.oninput=function(n){f._onDelayedSearch(n)};u.onchange=function(n){f._onSearch(n)};u.onkeydown=function(n){f._onKeyDown(n)};u.onkeyup=function(n){f._onKeyUp(n)};a.onclick=function(){u.select()};i=document.createElement("td");i.appendChild(u);r.appendChild(i);s=document.createElement("button");s.title="Next result (Enter)";s.className="next";s.onclick=function(){f.next()};i=document.createElement("td");i.appendChild(s);r.appendChild(i);h=document.createElement("button");h.title="Previous result (Shift+Enter)";h.className="previous";h.onclick=function(){f.previous()};i=document.createElement("td");i.appendChild(h);r.appendChild(i)}return n.prototype.next=function(n){if(this.results!=undefined){var t=this.resultIndex!=undefined?this.resultIndex+1:0;t>this.results.length-1&&(t=0);this._setActiveResult(t,n)}},n.prototype.previous=function(n){if(this.results!=undefined){var i=this.results.length-1,t=this.resultIndex!=undefined?this.resultIndex-1:i;t<0&&(t=i);this._setActiveResult(t,n)}},n.prototype._setActiveResult=function(n,t){var r,f,i,u;if(this.activeResult&&(r=this.activeResult.node,f=this.activeResult.elem,f=="field"?delete r.searchFieldActive:delete r.searchValueActive,r.updateDom()),!this.results||!this.results[n]){this.resultIndex=undefined;this.activeResult=undefined;return}this.resultIndex=n;i=this.results[this.resultIndex].node;u=this.results[this.resultIndex].elem;u=="field"?i.searchFieldActive=!0:i.searchValueActive=!0;this.activeResult=this.results[this.resultIndex];i.updateDom();i.scrollTo(function(){t&&i.focus(u)})},n.prototype._clearDelay=function(){this.timeout!=undefined&&(clearTimeout(this.timeout),delete this.timeout)},n.prototype._onDelayedSearch=function(){this._clearDelay();var n=this;this.timeout=setTimeout(function(t){n._onSearch(t)},this.delay)},n.prototype._onSearch=function(n,t){var r,i,u;if(this._clearDelay(),r=this.dom.search.value,i=r.length>0?r:undefined,i!=this.lastText||t)if(this.lastText=i,this.results=this.editor.search(i),this._setActiveResult(undefined),i!=undefined){u=this.results.length;switch(u){case 0:this.dom.results.innerHTML="no&nbsp;results";break;case 1:this.dom.results.innerHTML="1&nbsp;result";break;default:this.dom.results.innerHTML=u+"&nbsp;results"}}else this.dom.results.innerHTML=""},n.prototype._onKeyDown=function(n){var t=n.which;t==27?(this.dom.search.value="",this._onSearch(n),n.preventDefault(),n.stopPropagation()):t==13&&(n.ctrlKey?this._onSearch(n,!0):n.shiftKey?this.previous():this.next(),n.preventDefault(),n.stopPropagation())},n.prototype._onKeyUp=function(n){var t=n.keyCode;t!=27&&t!=13&&this._onDelayedSearch(n)},n}.call(t,i,t,n),r!==undefined&&(n.exports=r))},function(n,t,i){var u,r;!(u=[i(9),i(10),i(3)],r=function(n,t,i){function r(n,t){this.editor=n;this.dom={};this.expanded=!1;t&&t instanceof Object?(this.setField(t.field,t.fieldEditable),this.setValue(t.value,t.type)):(this.setField(""),this.setValue(null))}r.prototype._updateEditability=function(){if(this.editable={field:!0,value:!0},this.editor&&(this.editable.field=this.editor.options.mode==="tree",this.editable.value=this.editor.options.mode!=="view",this.editor.options.mode==="tree"&&typeof this.editor.options.editable=="function")){var n=this.editor.options.editable({field:this.field,value:this.value,path:this.path()});typeof n=="boolean"?(this.editable.field=n,this.editable.value=n):(typeof n.field=="boolean"&&(this.editable.field=n.field),typeof n.value=="boolean"&&(this.editable.value=n.value))}};r.prototype.path=function(){for(var n=this,i=[],t;n;)t=n.field||n.index,t!==undefined&&i.unshift(t),n=n.parent;return i};r.prototype.setParent=function(n){this.parent=n};r.prototype.setField=function(n,t){this.field=n;this.fieldEditable=t==!0};r.prototype.getField=function(){return this.field===undefined&&this._getDomField(),this.field};r.prototype.setValue=function(n,t){var i,u,o=this.childs,f,s,e;if(o)while(o.length)this.removeChild(o[0]);if(this.type=this._getType(n),t&&t!=this.type)if(t=="string"&&this.type=="auto")this.type=t;else throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+t+'"');if(this.type=="array"){for(this.childs=[],f=0,s=n.length;f<s;f++)i=n[f],i===undefined||i instanceof Function||(u=new r(this.editor,{value:i}),this.appendChild(u));this.value=""}else if(this.type=="object"){this.childs=[];for(e in n)n.hasOwnProperty(e)&&(i=n[e],i===undefined||i instanceof Function||(u=new r(this.editor,{field:e,value:i}),this.appendChild(u)));this.value=""}else this.childs=undefined,this.value=n};r.prototype.getValue=function(){var n,t;return this.type=="array"?(n=[],this.childs.forEach(function(t){n.push(t.getValue())}),n):this.type=="object"?(t={},this.childs.forEach(function(n){t[n.getField()]=n.getValue()}),t):(this.value===undefined&&this._getDomValue(),this.value)};r.prototype.getLevel=function(){return this.parent?this.parent.getLevel()+1:0};r.prototype.clone=function(){var n=new r(this.editor),t;return n.type=this.type,n.field=this.field,n.fieldInnerText=this.fieldInnerText,n.fieldEditable=this.fieldEditable,n.value=this.value,n.valueInnerText=this.valueInnerText,n.expanded=this.expanded,this.childs?(t=[],this.childs.forEach(function(i){var r=i.clone();r.setParent(n);t.push(r)}),n.childs=t):n.childs=undefined,n};r.prototype.expand=function(n){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="expanded"),this.showChilds(),n!=!1&&this.childs.forEach(function(t){t.expand(n)}))};r.prototype.collapse=function(n){this.childs&&(this.hideChilds(),n!=!1&&this.childs.forEach(function(t){t.collapse(n)}),this.dom.expand&&(this.dom.expand.className="collapsed"),this.expanded=!1)};r.prototype.showChilds=function(){var u=this.childs,t,n,i,r;u&&this.expanded&&(t=this.dom.tr,n=t?t.parentNode:undefined,n&&(i=this.getAppend(),r=t.nextSibling,r?n.insertBefore(i,r):n.appendChild(i),this.childs.forEach(function(t){n.insertBefore(t.getDom(),i);t.showChilds()})))};r.prototype.hide=function(){var n=this.dom.tr,t=n?n.parentNode:undefined;t&&t.removeChild(n);this.hideChilds()};r.prototype.hideChilds=function(){var t=this.childs,n;t&&this.expanded&&(n=this.getAppend(),n.parentNode&&n.parentNode.removeChild(n),this.childs.forEach(function(n){n.hide()}))};r.prototype.appendChild=function(n){if(this._hasChilds()){if(n.setParent(this),n.fieldEditable=this.type=="object",this.type=="array"&&(n.index=this.childs.length),this.childs.push(n),this.expanded){var r=n.getDom(),t=this.getAppend(),i=t?t.parentNode:undefined;t&&i&&i.insertBefore(r,t);n.showChilds()}this.updateDom({updateIndexes:!0});n.updateDom({recurse:!0})}};r.prototype.moveBefore=function(n,t){var i,r;this._hasChilds()&&(i=this.dom.tr?this.dom.tr.parentNode:undefined,i&&(r=document.createElement("tr"),r.style.height=i.clientHeight+"px",i.appendChild(r)),n.parent&&n.parent.removeChild(n),t instanceof u?this.appendChild(n):this.insertBefore(n,t),i&&i.removeChild(r))};r.prototype.moveTo=function(n,t){var i,r;n.parent==this&&(i=this.childs.indexOf(n),i<t&&t++);r=this.childs[t]||this.append;this.moveBefore(n,r)};r.prototype.insertBefore=function(n,t){var r;if(this._hasChilds()){if(t==this.append)n.setParent(this),n.fieldEditable=this.type=="object",this.childs.push(n);else{if(r=this.childs.indexOf(t),r==-1)throw new Error("Node not found");n.setParent(this);n.fieldEditable=this.type=="object";this.childs.splice(r,0,n)}if(this.expanded){var f=n.getDom(),i=t.getDom(),u=i?i.parentNode:undefined;i&&u&&u.insertBefore(f,i);n.showChilds()}this.updateDom({updateIndexes:!0});n.updateDom({recurse:!0})}};r.prototype.insertAfter=function(n,t){if(this._hasChilds()){var r=this.childs.indexOf(t),i=this.childs[r+1];i?this.insertBefore(n,i):this.appendChild(n)}};r.prototype.search=function(n){var t=[],r,u=n?n.toLowerCase():undefined,e,i,f,o;return delete this.searchField,delete this.searchValue,this.field!=undefined&&(e=String(this.field).toLowerCase(),r=e.indexOf(u),r!=-1&&(this.searchField=!0,t.push({node:this,elem:"field"})),this._updateDomField()),this._hasChilds()?(this.childs&&(i=[],this.childs.forEach(function(t){i=i.concat(t.search(n))}),t=t.concat(i)),u!=undefined&&(f=!1,i.length==0?this.collapse(f):this.expand(f))):(this.value!=undefined&&(o=String(this.value).toLowerCase(),r=o.indexOf(u),r!=-1&&(this.searchValue=!0,t.push({node:this,elem:"value"}))),this._updateDomValue()),t};r.prototype.scrollTo=function(n){if(!this.dom.tr||!this.dom.tr.parentNode)for(var t=this.parent;t;)t.expand(!1),t=t.parent;this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,n)};r.focusElement=undefined;r.prototype.focus=function(n){if(r.focusElement=n,this.dom.tr&&this.dom.tr.parentNode){var t=this.dom;switch(n){case"drag":t.drag?t.drag.focus():t.menu.focus();break;case"menu":t.menu.focus();break;case"expand":this._hasChilds()?t.expand.focus():t.field&&this.fieldEditable?(t.field.focus(),i.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),i.selectContentEditable(t.value)):t.menu.focus();break;case"field":t.field&&this.fieldEditable?(t.field.focus(),i.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),i.selectContentEditable(t.value)):this._hasChilds()?t.expand.focus():t.menu.focus();break;case"value":default:t.value&&!this._hasChilds()?(t.value.focus(),i.selectContentEditable(t.value)):t.field&&this.fieldEditable?(t.field.focus(),i.selectContentEditable(t.field)):this._hasChilds()?t.expand.focus():t.menu.focus()}}};r.select=function(n){setTimeout(function(){i.selectContentEditable(n)},0)};r.prototype.blur=function(){this._getDomValue(!1);this._getDomField(!1)};r.prototype._duplicate=function(n){var t=n.clone();return this.insertAfter(t,n),t};r.prototype.containsNode=function(n){var t,i,r;if(this==n)return!0;if(t=this.childs,t)for(i=0,r=t.length;i<r;i++)if(t[i].containsNode(n))return!0;return!1};r.prototype._move=function(n,t){if(n!=t){if(n.containsNode(this))throw new Error("Cannot move a field into a child of itself");n.parent&&n.parent.removeChild(n);var i=n.clone();n.clearDom();t?this.insertBefore(i,t):this.appendChild(i)}};r.prototype.removeChild=function(n){var t,i;return this.childs&&(t=this.childs.indexOf(n),t!=-1)?(n.hide(),delete n.searchField,delete n.searchValue,i=this.childs.splice(t,1)[0],this.updateDom({updateIndexes:!0}),i):undefined};r.prototype._remove=function(n){this.removeChild(n)};r.prototype.changeType=function(n){var t=this.type,i,r,u;t!=n&&((n=="string"||n=="auto")&&(t=="string"||t=="auto")?this.type=n:(i=this.dom.tr?this.dom.tr.parentNode:undefined,r=this.expanded?this.getAppend():this.getDom(),u=r&&r.parentNode?r.nextSibling:undefined,this.hide(),this.clearDom(),this.type=n,n=="object"?(this.childs||(this.childs=[]),this.childs.forEach(function(n){n.clearDom();delete n.index;n.fieldEditable=!0;n.field==undefined&&(n.field="")}),(t=="string"||t=="auto")&&(this.expanded=!0)):n=="array"?(this.childs||(this.childs=[]),this.childs.forEach(function(n,t){n.clearDom();n.fieldEditable=!1;n.index=t}),(t=="string"||t=="auto")&&(this.expanded=!0)):this.expanded=!1,i&&(u?i.insertBefore(this.getDom(),u):i.appendChild(this.getDom())),this.showChilds()),(n=="auto"||n=="string")&&(this.value=n=="string"?String(this.value):this._stringCast(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0}))};r.prototype._getDomValue=function(n){var t,r,u;if(this.dom.value&&this.type!="array"&&this.type!="object"&&(this.valueInnerText=i.getInnerText(this.dom.value)),this.valueInnerText!=undefined)try{this.type=="string"?t=this._unescapeHTML(this.valueInnerText):(r=this._unescapeHTML(this.valueInnerText),t=this._stringCast(r));t!==this.value&&(u=this.value,this.value=t,this.editor._onAction("editValue",{node:this,oldValue:u,newValue:t,oldSelection:this.editor.selection,newSelection:this.editor.getSelection()}))}catch(f){if(this.value=undefined,n!=!0)throw f;}};r.prototype._updateDomValue=function(){var n=this.dom.value,e,o;if(n){var r=this.value,t=this.type=="auto"?i.type(r):this.type,u=t=="string"&&i.isUrl(r),f="";f=u&&!this.editable.value?"":t=="string"?"green":t=="number"?"red":t=="boolean"?"darkorange":this._hasChilds()?"":r===null?"#004ED0":"black";n.style.color=f;e=String(this.value)==""&&this.type!="array"&&this.type!="object";e?i.addClassName(n,"empty"):i.removeClassName(n,"empty");u?i.addClassName(n,"url"):i.removeClassName(n,"url");t=="array"||t=="object"?(o=this.childs?this.childs.length:0,n.title=this.type+" containing "+o+" items"):t=="string"&&i.isUrl(r)?this.editable.value&&(n.title="Ctrl+Click or Ctrl+Enter to open url in new window"):n.title="";this.searchValueActive?i.addClassName(n,"highlight-active"):i.removeClassName(n,"highlight-active");this.searchValue?i.addClassName(n,"highlight"):i.removeClassName(n,"highlight");i.stripFormatting(n)}};r.prototype._updateDomField=function(){var n=this.dom.field,t;n&&(t=String(this.field)==""&&this.parent.type!="array",t?i.addClassName(n,"empty"):i.removeClassName(n,"empty"),this.searchFieldActive?i.addClassName(n,"highlight-active"):i.removeClassName(n,"highlight-active"),this.searchField?i.addClassName(n,"highlight"):i.removeClassName(n,"highlight"),i.stripFormatting(n))};r.prototype._getDomField=function(n){var t,r;if(this.dom.field&&this.fieldEditable&&(this.fieldInnerText=i.getInnerText(this.dom.field)),this.fieldInnerText!=undefined)try{t=this._unescapeHTML(this.fieldInnerText);t!==this.field&&(r=this.field,this.field=t,this.editor._onAction("editField",{node:this,oldValue:r,newValue:t,oldSelection:this.editor.selection,newSelection:this.editor.getSelection()}))}catch(u){if(this.field=undefined,n!=!0)throw u;}};r.prototype.clearDom=function(){this.dom={}};r.prototype.getDom=function(){var n=this.dom,r,t,u,i,f;return n.tr?n.tr:(this._updateEditability(),n.tr=document.createElement("tr"),n.tr.node=this,this.editor.options.mode==="tree"&&(r=document.createElement("td"),this.editable.field&&this.parent&&(t=document.createElement("button"),n.drag=t,t.className="dragarea",t.title="拖动来调整顺序 (Alt+Shift+Arrows)",r.appendChild(t)),n.tr.appendChild(r),u=document.createElement("td"),i=document.createElement("button"),n.menu=i,i.className="contextmenu",i.title="打开功能菜单(Ctrl+M)",u.appendChild(n.menu),n.tr.appendChild(u)),f=document.createElement("td"),n.tr.appendChild(f),n.tree=this._createDomTree(),f.appendChild(n.tree),this.updateDom({updateIndexes:!0}),n.tr)};r.prototype._onDragStart=function(n){var t=this;this.mousemove||(this.mousemove=i.addEventListener(document,"mousemove",function(n){t._onDrag(n)}));this.mouseup||(this.mouseup=i.addEventListener(document,"mouseup",function(n){t._onDragEnd(n)}));this.editor.highlighter.lock();this.drag={oldCursor:document.body.style.cursor,startParent:this.parent,startIndex:this.parent.childs.indexOf(this),mouseX:n.pageX,level:this.getLevel()};document.body.style.cursor="move";n.preventDefault()};r.prototype._onDrag=function(n){var s=n.pageY,b=n.pageX,h,f,o,c,l,p,t,e,a,v,k,d,g,nt,w=!1,y;if(h=this.dom.tr,a=i.getAbsoluteTop(h),d=h.offsetHeight,s<a){f=h;do f=f.previousSibling,t=r.getNodeFromTarget(f),v=f?i.getAbsoluteTop(f):0;while(f&&s<v);t&&!t.parent&&(t=undefined);t||(p=h.parentNode.firstChild,f=p?p.nextSibling:undefined,t=r.getNodeFromTarget(f),t==this&&(t=undefined));t&&(f=t.dom.tr,v=f?i.getAbsoluteTop(f):0,s>v+d&&(t=undefined));t&&(t.parent.moveBefore(this,t),w=!0)}else if(l=this.expanded&&this.append?this.append.getDom():this.dom.tr,c=l?l.nextSibling:undefined,c){k=i.getAbsoluteTop(c);o=c;do e=r.getNodeFromTarget(o),o&&(g=o.nextSibling?i.getAbsoluteTop(o.nextSibling):0,nt=o?g-k:0,e.parent.childs.length==1&&e.parent.childs[0]==this&&(a+=23)),o=o.nextSibling;while(o&&s>a+nt);if(e&&e.parent){var it=b-this.drag.mouseX,rt=Math.round(it/48),ut=this.drag.level+rt,tt=e.getLevel();for(f=e.dom.tr.previousSibling;tt<ut&&f;){if(t=r.getNodeFromTarget(f),t!=this&&!t._isChildOf(this))if(t instanceof u)if(y=t.parent.childs,y.length>1||y.length==1&&y[0]!=this)e=r.getNodeFromTarget(f),tt=e.getLevel();else break;else break;f=f.previousSibling}l.nextSibling!=e.dom.tr&&(e.parent.moveBefore(this,e),w=!0)}}w&&(this.drag.mouseX=b,this.drag.level=this.getLevel());this.editor.startAutoScroll(s);n.preventDefault()};r.prototype._onDragEnd=function(n){var t={node:this,startParent:this.drag.startParent,startIndex:this.drag.startIndex,endParent:this.parent,endIndex:this.parent.childs.indexOf(this)};(t.startParent!=t.endParent||t.startIndex!=t.endIndex)&&this.editor._onAction("moveNode",t);document.body.style.cursor=this.drag.oldCursor;this.editor.highlighter.unlock();delete this.drag;this.mousemove&&(i.removeEventListener(document,"mousemove",this.mousemove),delete this.mousemove);this.mouseup&&(i.removeEventListener(document,"mouseup",this.mouseup),delete this.mouseup);this.editor.stopAutoScroll();n.preventDefault()};r.prototype._isChildOf=function(n){for(var t=this.parent;t;){if(t==n)return!0;t=t.parent}return!1};r.prototype._createDomField=function(){return document.createElement("div")};r.prototype.setHighlight=function(n){this.dom.tr&&(this.dom.tr.className=n?"highlight":"",this.append&&this.append.setHighlight(n),this.childs&&this.childs.forEach(function(t){t.setHighlight(n)}))};r.prototype.updateValue=function(n){this.value=n;this.updateDom()};r.prototype.updateField=function(n){this.field=n;this.updateDom()};r.prototype.updateDom=function(n){var u=this.dom.tree,t,f,i,r;u&&(u.style.marginLeft=this.getLevel()*24+"px");t=this.dom.field;t&&(this.fieldEditable?(t.contentEditable=this.editable.field,t.spellcheck=!1,t.className="field"):t.className="readonly",f=this.index!=undefined?this.index:this.field!=undefined?this.field:this._hasChilds()?this.type:"",t.innerHTML=this._escapeHTML(f));i=this.dom.value;i&&(r=this.childs?this.childs.length:0,i.innerHTML=this.type=="array"?"["+r+"]":this.type=="object"?"{"+r+"}":this._escapeHTML(this.value));this._updateDomField();this._updateDomValue();n&&n.updateIndexes==!0&&this._updateDomIndexes();n&&n.recurse==!0&&this.childs&&this.childs.forEach(function(t){t.updateDom(n)});this.append&&this.append.updateDom()};r.prototype._updateDomIndexes=function(){var t=this.dom.value,n=this.childs;t&&n&&(this.type=="array"?n.forEach(function(n,t){n.index=t;var i=n.dom.field;i&&(i.innerHTML=t)}):this.type=="object"&&n.forEach(function(n){n.index!=undefined&&(delete n.index,n.field==undefined&&(n.field=""))}))};r.prototype._createDomValue=function(){var n;return this.type=="array"?(n=document.createElement("div"),n.className="readonly",n.innerHTML="[...]"):this.type=="object"?(n=document.createElement("div"),n.className="readonly",n.innerHTML="{...}"):!this.editable.value&&i.isUrl(this.value)?(n=document.createElement("a"),n.className="value",n.href=this.value,n.target="_blank",n.innerHTML=this._escapeHTML(this.value)):(n=document.createElement("div"),n.contentEditable=this.editable.value,n.spellcheck=!1,n.className="value",n.innerHTML=this._escapeHTML(this.value)),n};r.prototype._createDomExpandButton=function(){var n=document.createElement("button");return this._hasChilds()?(n.className=this.expanded?"expanded":"collapsed",n.title="Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs."):(n.className="invisible",n.title=""),n};r.prototype._createDomTree=function(){var n=this.dom,e=document.createElement("table"),o=document.createElement("tbody"),t,r,u,i,f;return e.style.borderCollapse="collapse",e.className="values",e.appendChild(o),t=document.createElement("tr"),o.appendChild(t),r=document.createElement("td"),r.className="tree",t.appendChild(r),n.expand=this._createDomExpandButton(),r.appendChild(n.expand),n.tdExpand=r,u=document.createElement("td"),u.className="tree",t.appendChild(u),n.field=this._createDomField(),u.appendChild(n.field),n.tdField=u,i=document.createElement("td"),i.className="tree",t.appendChild(i),this.type!="object"&&this.type!="array"&&(i.appendChild(document.createTextNode(":")),i.className="separator"),n.tdSeparator=i,f=document.createElement("td"),f.className="tree",t.appendChild(f),n.value=this._createDomValue(),f.appendChild(n.value),n.tdValue=f,e};r.prototype.onEvent=function(n){var u=n.type,r=n.target||n.srcElement,t=this.dom,o=this,h,s=this._hasChilds(),c,e,f,l,a;if((r==t.drag||r==t.menu)&&(u=="mouseover"?this.editor.highlighter.highlight(this):u=="mouseout"&&this.editor.highlighter.unhighlight()),u=="mousedown"&&r==t.drag&&this._onDragStart(n),u=="click"&&r==t.menu&&t_datacenter_paragraph_detail_Obj.menu_onclick(o.field),u=="click"&&r==t.expand&&s&&(c=n.ctrlKey,this._onExpand(c)),e=t.value,r==e)switch(u){case"focus":h=this;break;case"blur":case"change":this._getDomValue(!0);this._updateDomValue();this.value&&(e.innerHTML=this._escapeHTML(this.value));break;case"input":this._getDomValue(!0);this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"click":(n.ctrlKey||!this.editable.value)&&i.isUrl(this.value)&&window.open(this.value,"_blank");break;case"keyup":this._getDomValue(!0);this._updateDomValue();break;case"cut":case"paste":setTimeout(function(){o._getDomValue(!0);o._updateDomValue()},1)}if(f=t.field,r==f)switch(u){case"focus":h=this;break;case"blur":case"change":this._getDomField(!0);this._updateDomField();this.field&&(f.innerHTML=this._escapeHTML(this.field));break;case"input":this._getDomField(!0);this._updateDomField();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"keyup":this._getDomField(!0);this._updateDomField();break;case"cut":case"paste":setTimeout(function(){o._getDomField(!0);o._updateDomField()},1)}if(l=t.tree,r==l.parentNode)switch(u){case"click":a=n.offsetX!=undefined?n.offsetX<(this.getLevel()+1)*24:n.pageX<i.getAbsoluteLeft(t.tdSeparator);a||s?f&&(i.setEndOfContentEditable(f),f.focus()):e&&(i.setEndOfContentEditable(e),e.focus())}if(r==t.tdExpand&&!s||r==t.tdField||r==t.tdSeparator)switch(u){case"click":f&&(i.setEndOfContentEditable(f),f.focus())}if(u=="keydown")this.onKeyDown(n)};r.prototype.onKeyDown=function(n){var o=n.which||n.keyCode,f=n.target||n.srcElement,v=n.ctrlKey,s=n.shiftKey,h=n.altKey,t=!1,e,l,a,p,y=this.editor.options.mode==="tree",it,rt,b,k,d,g,w,nt,tt,c;o==13?f==this.dom.value?(!this.editable.value||n.ctrlKey)&&i.isUrl(this.value)&&(window.open(this.value,"_blank"),t=!0):f==this.dom.expand&&(it=this._hasChilds(),it&&(rt=n.ctrlKey,this._onExpand(rt),f.focus(),t=!0)):o==68?v&&y&&(this._onDuplicate(),t=!0):o==69?v&&(this._onExpand(s),f.focus(),t=!0):o==77&&y?v&&(this.showContextMenu(f),t=!0):o==46&&y?v&&(this._onRemove(),t=!0):o==45&&y?v&&!s?(this._onInsertBefore(),t=!0):v&&s&&(this._onInsertAfter(),t=!0):o==35?h&&(b=this._lastNode(),b&&b.focus(r.focusElement||this._getElementName(f)),t=!0):o==36?h&&(k=this._firstNode(),k&&k.focus(r.focusElement||this._getElementName(f)),t=!0):o==37?h&&!s?(d=this._previousElement(f),d&&this.focus(this._getElementName(d)),t=!0):h&&s&&y&&(this.expanded?(g=this.getAppend(),a=g?g.nextSibling:undefined):(w=this.getDom(),a=w.nextSibling),a&&(l=r.getNodeFromTarget(a),p=a.nextSibling,c=r.getNodeFromTarget(p),l&&l instanceof u&&!(this.parent.childs.length==1)&&c&&c.parent&&(c.parent.moveBefore(this,c),this.focus(r.focusElement||this._getElementName(f))))):o==38?h&&!s?(e=this._previousNode(),e&&e.focus(r.focusElement||this._getElementName(f)),t=!0):h&&s&&(e=this._previousNode(),e&&e.parent&&(e.parent.moveBefore(this,e),this.focus(r.focusElement||this._getElementName(f))),t=!0):o==39?h&&!s?(nt=this._nextElement(f),nt&&this.focus(this._getElementName(nt)),t=!0):h&&s&&(w=this.getDom(),tt=w.previousSibling,tt&&(e=r.getNodeFromTarget(tt),e&&e.parent&&e instanceof u&&!e.isVisible()&&(e.parent.moveBefore(this,e),this.focus(r.focusElement||this._getElementName(f))))):o==40&&(h&&!s?(l=this._nextNode(),l&&l.focus(r.focusElement||this._getElementName(f)),t=!0):h&&s&&y&&(l=this.expanded?this.append?this.append._nextNode():undefined:this._nextNode(),a=l?l.getDom():undefined,p=this.parent.childs.length==1?a:a?a.nextSibling:undefined,c=r.getNodeFromTarget(p),c&&c.parent&&(c.parent.moveBefore(this,c),this.focus(r.focusElement||this._getElementName(f))),t=!0));t&&(n.preventDefault(),n.stopPropagation())};r.prototype._onExpand=function(n){if(n){var i=this.dom.tr.parentNode,t=i.parentNode,r=t.scrollTop;t.removeChild(i)}this.expanded?this.collapse(n):this.expand(n);n&&(t.appendChild(i),t.scrollTop=r)};r.prototype._onRemove=function(){var i;this.editor.highlighter.unhighlight();var n=this.parent.childs,t=n.indexOf(this),r=this.editor.getSelection();n[t+1]?n[t+1].focus():n[t-1]?n[t-1].focus():this.parent.focus();i=this.editor.getSelection();this.parent._remove(this);this.editor._onAction("removeNode",{node:this,parent:this.parent,index:t,oldSelection:r,newSelection:i})};r.prototype._onDuplicate=function(){var i=this.editor.getSelection(),n=this.parent._duplicate(this),t;n.focus();t=this.editor.getSelection();this.editor._onAction("duplicateNode",{node:this,clone:n,parent:this.parent,oldSelection:i,newSelection:t})};r.prototype._onInsertBefore=function(n,t,i){var e=this.editor.getSelection(),u=new r(this.editor,{field:n!=undefined?n:"",value:t!=undefined?t:"",type:i}),f;u.expand(!0);this.parent.insertBefore(u,this);this.editor.highlighter.unhighlight();u.focus("field");f=this.editor.getSelection();this.editor._onAction("insertBeforeNode",{node:u,beforeNode:this,parent:this.parent,oldSelection:e,newSelection:f})};r.prototype._onInsertAfter=function(n,t,i){var e=this.editor.getSelection(),u=new r(this.editor,{field:n!=undefined?n:"",value:t!=undefined?t:"",type:i}),f;u.expand(!0);this.parent.insertAfter(u,this);this.editor.highlighter.unhighlight();u.focus("field");f=this.editor.getSelection();this.editor._onAction("insertAfterNode",{node:u,afterNode:this,parent:this.parent,oldSelection:e,newSelection:f})};r.prototype._onAppend=function(n,t,i){var e=this.editor.getSelection(),u=new r(this.editor,{field:n!=undefined?n:"",value:t!=undefined?t:"",type:i}),f;u.expand(!0);this.parent.appendChild(u);this.editor.highlighter.unhighlight();u.focus("field");f=this.editor.getSelection();this.editor._onAction("appendNode",{node:u,parent:this.parent,oldSelection:e,newSelection:f})};r.prototype._onChangeType=function(n){var t=this.type,i,r;n!=t&&(i=this.editor.getSelection(),this.changeType(n),r=this.editor.getSelection(),this.editor._onAction("changeType",{node:this,oldType:t,newType:n,oldSelection:i,newSelection:r}))};r.prototype._onSort=function(n){var i,t,r,u;this._hasChilds()&&(i=n=="desc"?-1:1,t=this.type=="array"?"value":"field",this.hideChilds(),r=this.childs,u=this.sort,this.childs=this.childs.concat(),this.childs.sort(function(n,r){return n[t]>r[t]?i:n[t]<r[t]?-i:0}),this.sort=i==1?"asc":"desc",this.editor._onAction("sort",{node:this,oldChilds:r,oldSort:u,newChilds:this.childs,newSort:this.sort}),this.showChilds())};r.prototype.getAppend=function(){return this.append||(this.append=new u(this.editor),this.append.setParent(this)),this.append.getDom()};r.getNodeFromTarget=function(n){while(n){if(n.node)return n.node;n=n.parentNode}return undefined};r.prototype._previousNode=function(){var t=null,i=this.getDom(),n;if(i&&i.parentNode){n=i;do n=n.previousSibling,t=r.getNodeFromTarget(n);while(n&&t instanceof u&&!t.isVisible())}return t};r.prototype._nextNode=function(){var t=null,i=this.getDom(),n;if(i&&i.parentNode){n=i;do n=n.nextSibling,t=r.getNodeFromTarget(n);while(n&&t instanceof u&&!t.isVisible())}return t};r.prototype._firstNode=function(){var t=null,n=this.getDom(),i;return n&&n.parentNode&&(i=n.parentNode.firstChild,t=r.getNodeFromTarget(i)),t};r.prototype._lastNode=function(){var t=null,i=this.getDom(),n;if(i&&i.parentNode)for(n=i.parentNode.lastChild,t=r.getNodeFromTarget(n);n&&t instanceof u&&!t.isVisible();)n=n.previousSibling,t=r.getNodeFromTarget(n);return t};r.prototype._previousElement=function(n){var t=this.dom;switch(n){case t.value:if(this.fieldEditable)return t.field;case t.field:if(this._hasChilds())return t.expand;case t.expand:return t.menu;case t.menu:if(t.drag)return t.drag;default:return null}};r.prototype._nextElement=function(n){var t=this.dom;switch(n){case t.drag:return t.menu;case t.menu:if(this._hasChilds())return t.expand;case t.expand:if(this.fieldEditable)return t.field;case t.field:if(!this._hasChilds())return t.value;default:return null}};r.prototype._getElementName=function(n){var t=this.dom;for(var i in t)if(t.hasOwnProperty(i)&&t[i]==n)return i;return null};r.prototype._hasChilds=function(){return this.type=="array"||this.type=="object"};r.TYPE_TITLES={auto:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',object:'Field type "object". An object contains an unordered set of key/value pairs.',array:'Field type "array". An array contains an ordered collection of values.',string:'Field type "string". Field type is not determined from the value, but always returned as string.'};r.prototype.showContextMenu=function(t,i){var u=this,f=r.TYPE_TITLES,e=[],o,s,h;this.editable.value&&e.push({text:"Type",title:"调整字段类型",className:"type-"+this.type,submenu:[{text:"Auto",className:"type-auto"+(this.type=="auto"?" selected":""),title:f.auto,click:function(){u._onChangeType("auto")}},{text:"Array",className:"type-array"+(this.type=="array"?" selected":""),title:f.array,click:function(){u._onChangeType("array")}},{text:"Object",className:"type-object"+(this.type=="object"?" selected":""),title:f.object,click:function(){u._onChangeType("object")}},{text:"String",className:"type-string"+(this.type=="string"?" selected":""),title:f.string,click:function(){u._onChangeType("string")}}]});this._hasChilds()&&(o=this.sort=="asc"?"desc":"asc",e.push({text:"Sort",title:"Sort the childs of this "+this.type,className:"sort-"+o,click:function(){u._onSort(o)},submenu:[{text:"Ascending",className:"sort-asc",title:"Sort the childs of this "+this.type+" in ascending order",click:function(){u._onSort("asc")}},{text:"Descending",className:"sort-desc",title:"Sort the childs of this "+this.type+" in descending order",click:function(){u._onSort("desc")}}]}));this.parent&&this.parent._hasChilds()&&(e.length&&e.push({type:"separator"}),s=u.parent.childs,u==s[s.length-1]&&e.push({text:"Append",title:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"append",click:function(){u._onAppend("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:f.auto,click:function(){u._onAppend("","","auto")}},{text:"Array",className:"type-array",title:f.array,click:function(){u._onAppend("",[])}},{text:"Object",className:"type-object",title:f.object,click:function(){u._onAppend("",{})}},{text:"String",className:"type-string",title:f.string,click:function(){u._onAppend("","","string")}}]}),e.push({text:"Insert",title:"在当前字段前塞入一个新字段 (Ctrl+Ins)",submenuTitle:"Select the type of the field to be inserted",className:"insert",click:function(){u._onInsertBefore("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:f.auto,click:function(){u._onInsertBefore("","","auto")}},{text:"Array",className:"type-array",title:f.array,click:function(){u._onInsertBefore("",[])}},{text:"Object",className:"type-object",title:f.object,click:function(){u._onInsertBefore("",{})}},{text:"String",className:"type-string",title:f.string,click:function(){u._onInsertBefore("","","string")}}]}),this.editable.field&&(e.push({text:"Duplicate",title:"复制当前字段 (Ctrl+D)",className:"duplicate",click:function(){u._onDuplicate()}}),e.push({text:"Remove",title:"删除当前字段 (Ctrl+Del)",className:"remove",click:function(){u._onRemove()}})));h=new n(e,{close:i});h.show(t)};r.prototype._getType=function(n){return n instanceof Array?"array":n instanceof Object?"object":typeof n=="string"&&typeof this._stringCast(n)!="string"?"string":"auto"};r.prototype._stringCast=function(n){var t=n.toLowerCase(),i=Number(n),r=parseFloat(n);return n==""?"":t=="null"?null:t=="true"?!0:t=="false"?!1:isNaN(i)||isNaN(r)?n:i};r.prototype._escapeHTML=function(n){var i=String(n).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),t=JSON.stringify(i);return t.substring(1,t.length-1)};r.prototype._unescapeHTML=function(n){var t='"'+this._escapeJSON(n)+'"',r=i.parse(t);return r.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ")};r.prototype._escapeJSON=function(n){for(var i="",r=0,u=n.length,t;r<u;)t=n.charAt(r),t=="\n"?i+="\\n":t=="\\"?(i+=t,r++,t=n.charAt(r),'"\\/bfnrtu'.indexOf(t)==-1&&(i+="\\"),i+=t):i+=t=='"'?'\\"':t,r++;return i};var u=t(r);return r}.apply(null,u),r!==undefined&&(n.exports=r))},function(n,t,i){var u,r;!(u=[i(9)],r=function(n){function t(t,i,r){function f(n){t.setMode(n);var i=t.dom&&t.dom.modeBox;i&&i.focus()}for(var e,o,h,a,u,c={code:{text:"Code",title:"Switch to code highlighter",click:function(){f("code")}},form:{text:"Form",title:"Switch to form editor",click:function(){f("form")}},text:{text:"Text",title:"Switch to plain text editor",click:function(){f("text")}},tree:{text:"Tree",title:"Switch to tree editor",click:function(){f("tree")}},view:{text:"View",title:"Switch to tree view",click:function(){f("view")}}},l=[],s=0;s<i.length;s++){if(e=i[s],o=c[e],!o)throw new Error('Unknown mode "'+e+'"');o.className="type-modes"+(r==e?" selected":"");l.push(o)}if(h=c[r],!h)throw new Error('Unknown mode "'+r+'"');return a=h.text,u=document.createElement("button"),u.className="modes separator",u.innerHTML=a+" &#x25BE;",u.title="Switch editor mode",u.onclick=function(){var t=new n(l);t.show(u)},u}return{create:t}}.apply(null,u),r!==undefined&&(n.exports=r))},function(n,t,i){var u,r;!(u=[i(3)],r=function(n){function t(n,t){function s(n,t,i){i.forEach(function(i){var l,e,f,u,a,c,o,v,y,h;i.type=="separator"?(l=document.createElement("div"),l.className="separator",f=document.createElement("li"),f.appendChild(l),n.appendChild(f)):(e={},f=document.createElement("li"),n.appendChild(f),u=document.createElement("button"),u.className=i.className,e.button=u,i.title&&(u.title=i.title),i.click&&(u.onclick=function(){r.hide();i.click()}),f.appendChild(u),i.submenu?(a=document.createElement("div"),a.className="icon",u.appendChild(a),u.appendChild(document.createTextNode(i.text)),i.click?(u.className+=" default",o=document.createElement("button"),e.buttonExpand=o,o.className="expand",o.innerHTML='<div class="expand"><\/div>',f.appendChild(o),i.submenuTitle&&(o.title=i.submenuTitle),c=o):(v=document.createElement("div"),v.className="expand",u.appendChild(v),c=u),c.onclick=function(){r._onExpandItem(e);c.focus()},y=[],e.subItems=y,h=document.createElement("ul"),e.ul=h,h.className="menu",h.style.height="0",f.appendChild(h),s(h,y,i.submenu)):u.innerHTML='<div class="icon"><\/div>'+i.text,t.push(e))})}var r,u,e,i,o,f;this.dom={};r=this;u=this.dom;this.anchor=undefined;this.items=n;this.eventListeners={};this.selection=undefined;this.visibleSubmenu=undefined;this.onClose=t?t.close:undefined;e=document.createElement("div");e.className="jsoneditor-contextmenu";u.menu=e;i=document.createElement("ul");i.className="menu";e.appendChild(i);u.list=i;u.items=[];o=document.createElement("button");u.focusButton=o;f=document.createElement("li");f.style.overflow="hidden";f.style.height="0";f.appendChild(o);i.appendChild(f);s(i,this.dom.items,n);this.maxHeight=0;n.forEach(function(t){var i=(n.length+(t.submenu?t.submenu.length:0))*24;r.maxHeight=Math.max(r.maxHeight,i)})}return t.prototype._getVisibleButtons=function(){var n=[],t=this;return this.dom.items.forEach(function(i){n.push(i.button);i.buttonExpand&&n.push(i.buttonExpand);i.subItems&&i==t.expandedItem&&i.subItems.forEach(function(t){n.push(t.button);t.buttonExpand&&n.push(t.buttonExpand)})}),n},t.visibleMenu=undefined,t.prototype.show=function(i){var r,f;this.hide();var e=window.innerHeight,h=window.pageYOffset||document.scrollTop||0,c=e+h,o=i.offsetHeight,l=this.maxHeight,s=n.getAbsoluteLeft(i),u=n.getAbsoluteTop(i);u+o+l<c?(this.dom.menu.style.left=s+"px",this.dom.menu.style.top=u+o+"px",this.dom.menu.style.bottom=""):(this.dom.menu.style.left=s+"px",this.dom.menu.style.top="",this.dom.menu.style.bottom=e-u+"px");document.body.appendChild(this.dom.menu);r=this;f=this.dom.list;this.eventListeners.mousedown=n.addEventListener(document,"mousedown",function(n){var t=n.target;t==f||r._isChildOf(t,f)||(r.hide(),n.stopPropagation(),n.preventDefault())});this.eventListeners.mousewheel=n.addEventListener(document,"mousewheel",function(n){n.stopPropagation();n.preventDefault()});this.eventListeners.keydown=n.addEventListener(document,"keydown",function(n){r._onKeyDown(n)});this.selection=n.getSelection();this.anchor=i;setTimeout(function(){r.dom.focusButton.focus()},0);t.visibleMenu&&t.visibleMenu.hide();t.visibleMenu=this},t.prototype.hide=function(){var i,r;this.dom.menu.parentNode&&(this.dom.menu.parentNode.removeChild(this.dom.menu),this.onClose&&this.onClose());for(i in this.eventListeners)this.eventListeners.hasOwnProperty(i)&&(r=this.eventListeners[i],r&&n.removeEventListener(document,i,r),delete this.eventListeners[i]);t.visibleMenu==this&&(t.visibleMenu=undefined)},t.prototype._onExpandItem=function(t){var u=this,f=t==this.expandedItem,r=this.expandedItem,i,e;r&&(r.ul.style.height="0",r.ul.style.padding="",setTimeout(function(){u.expandedItem!=r&&(r.ul.style.display="",n.removeClassName(r.ul.parentNode,"selected"))},300),this.expandedItem=undefined);f||(i=t.ul,i.style.display="block",e=i.clientHeight,setTimeout(function(){u.expandedItem==t&&(i.style.height=i.childNodes.length*24+"px",i.style.padding="5px 10px")},0),n.addClassName(i.parentNode,"selected"),this.expandedItem=t)},t.prototype._onKeyDown=function(t){var o=t.target,s=t.which,e=!1,i,r,f,u;s==27?(this.selection&&n.setSelection(this.selection),this.anchor&&this.anchor.focus(),this.hide(),e=!0):s==9?t.shiftKey?(i=this._getVisibleButtons(),r=i.indexOf(o),r==0&&(i[i.length-1].focus(),e=!0)):(i=this._getVisibleButtons(),r=i.indexOf(o),r==i.length-1&&(i[0].focus(),e=!0)):s==37?(o.className=="expand"&&(i=this._getVisibleButtons(),r=i.indexOf(o),f=i[r-1],f&&f.focus()),e=!0):s==38?(i=this._getVisibleButtons(),r=i.indexOf(o),f=i[r-1],f&&f.className=="expand"&&(f=i[r-2]),f||(f=i[i.length-1]),f&&f.focus(),e=!0):s==39?(i=this._getVisibleButtons(),r=i.indexOf(o),u=i[r+1],u&&u.className=="expand"&&u.focus(),e=!0):s==40&&(i=this._getVisibleButtons(),r=i.indexOf(o),u=i[r+1],u&&u.className=="expand"&&(u=i[r+2]),u||(u=i[0]),u&&(u.focus(),e=!0),e=!0);e&&(t.stopPropagation(),t.preventDefault())},t.prototype._isChildOf=function(n,t){for(var i=n.parentNode;i;){if(i==t)return!0;i=i.parentNode}return!1},t}.apply(null,u),r!==undefined&&(n.exports=r))},function(n,t,i){var u,r;!(u=[i(9),i(3)],r=function(n,t){function i(i){function r(n){this.editor=n;this.dom={}}return r.prototype=new i,r.prototype.getDom=function(){var n=this.dom,i,u,r,f,t;return n.tr?n.tr:(this._updateEditability(),i=document.createElement("tr"),i.node=this,n.tr=i,this.editable.field&&(n.tdDrag=document.createElement("td"),u=document.createElement("td"),n.tdMenu=u,r=document.createElement("button"),r.className="contextmenu",r.title="打开功能菜单 (Ctrl+M)",n.menu=r,u.appendChild(n.menu)),f=document.createElement("td"),t=document.createElement("div"),t.innerHTML="(empty)",t.className="readonly",f.appendChild(t),n.td=f,n.text=t,this.updateDom(),i)},r.prototype.updateDom=function(){var n=this.dom,i=n.td,r,t;i&&(i.style.paddingLeft=this.getLevel()*24+26+"px");r=n.text;r&&(r.innerHTML="(empty "+this.parent.type+")");t=n.tr;this.isVisible()?n.tr.firstChild||(n.tdDrag&&t.appendChild(n.tdDrag),n.tdMenu&&t.appendChild(n.tdMenu),t.appendChild(i)):n.tr.firstChild&&(n.tdDrag&&t.removeChild(n.tdDrag),n.tdMenu&&t.removeChild(n.tdMenu),t.removeChild(i))},r.prototype.isVisible=function(){return this.parent.childs.length==0},r.prototype.showContextMenu=function(t,r){var u=this,f=i.TYPE_TITLES,e=[{text:"Append",title:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"insert",click:function(){u._onAppend("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:f.auto,click:function(){u._onAppend("","","auto")}},{text:"Array",className:"type-array",title:f.array,click:function(){u._onAppend("",[])}},{text:"Object",className:"type-object",title:f.object,click:function(){u._onAppend("",{})}},{text:"String",className:"type-string",title:f.string,click:function(){u._onAppend("","","string")}}]}],o=new n(e,{close:r});o.show(t)},r.prototype.onEvent=function(n){var u=n.type,f=n.target||n.srcElement,i=this.dom,e=i.menu,r;if(f==e&&(u=="mouseover"?this.editor.highlighter.highlight(this.parent):u=="mouseout"&&this.editor.highlighter.unhighlight()),u=="click"&&f==i.menu&&(r=this.editor.highlighter,r.highlight(this.parent),r.lock(),t.addClassName(i.menu,"selected"),this.showContextMenu(i.menu,function(){t.removeClassName(i.menu,"selected");r.unlock();r.unhighlight()})),u=="keydown")this.onKeyDown(n)},r}return i}.apply(null,u),r!==undefined&&(n.exports=r))}])});
