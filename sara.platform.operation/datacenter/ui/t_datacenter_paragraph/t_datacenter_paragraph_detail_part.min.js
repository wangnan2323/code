var t_datacenter_paragraph_detail_Obj=function(){"use strict";var n="//127.0.0.1/sara.dd.ldsw/sara.platform.operation/datacenter/service/service_t_datacenter_paragraph.asmx/",u=null,r=null,t=null,e=function(n){n.success()},o=function(i){var r,u,f;try{r=$("#jsoneditor")[0];u={mode:"text",modes:["text","tree"],error:function(n){alert(n.toString())}};t=new JSONEditor(r,u,null);f={clientInf:_clientInf};doAjaxFunction(n,"GetUserList",f,{success:function(n){var t=new Function("","return "+n)();controlObj.singledropdownlistinit("detail_dropdown_user_t_datacenter_paragraph_detail",t);controlObj.singledropdownlistid("detail_dropdown_user_t_datacenter_paragraph_detail",basePageObj._userInfoJson.sys_userid)},fail:function(t){_blockMessage.show(n+"GetChildParagraphids<br/>"+t,"fail")}});i.success()}catch(e){_blockMessage.show("initControl执行失败。<br/>"+e.message,"fail")}},f=function(n){try{controlObj.textdisable("detail_txt_paragraphid_t_datacenter_paragraph_detail",n);controlObj.textdisable("detail_txt_paragraphnodeid_t_datacenter_paragraph_detail",n);controlObj.textdisable("detail_txt_paragraphtitle_t_datacenter_paragraph_detail",n);controlObj.textdisable("detail_txt_paragraphresume_t_datacenter_paragraph_detail",n);controlObj.textdisable("detail_txt_paragraphlayout_t_datacenter_paragraph_detail",n);controlObj.textdisable("detail_txt_paragraphcode_t_datacenter_paragraph_detail",n);controlObj.textdisable("detail_txt_paragraphcontent_t_datacenter_paragraph_detail",n);controlObj.textdisable("detail_txt_paperid_t_datacenter_paragraph_detail",!0);controlObj.textdisable("detail_txt_paragraphcodeid_t_datacenter_paragraph_detail",n);n?$("#btn_command_save_t_datacenter_paragraph_detail").addClass("hidden"):$("#btn_command_save_t_datacenter_paragraph_detail").removeClass("hidden")}catch(t){_blockMessage.show("setDisable执行失败。<br/>"+t.message,"fail")}},s=function(n,t){controlObj.text("detail_txt_f_value1_t_datacenter_paragraph_detail",n.f_value1);controlObj.text("detail_txt_f_value2_t_datacenter_paragraph_detail",n.f_value2);controlObj.text("detail_txt_f_value3_t_datacenter_paragraph_detail",n.f_value3);controlObj.text("detail_txt_f_value4_t_datacenter_paragraph_detail",n.f_value4);controlObj.text("detail_txt_f_value5_t_datacenter_paragraph_detail",n.f_value5);controlObj.text("detail_txt_f_value6_t_datacenter_paragraph_detail",n.f_value6);controlObj.text("detail_txt_f_value7_t_datacenter_paragraph_detail",n.f_value7);controlObj.text("detail_txt_f_value8_t_datacenter_paragraph_detail",n.f_value8);controlObj.text("detail_txt_f_value9_t_datacenter_paragraph_detail",n.f_value9);controlObj.text("detail_txt_f_value10_t_datacenter_paragraph_detail",n.f_value10);controlObj.text("detail_txt_paragraphid_t_datacenter_paragraph_detail",n.paragraphid);controlObj.text("detail_txt_paragraphnodeid_t_datacenter_paragraph_detail",n.paragraphnodeid);controlObj.text("detail_txt_paragraphtitle_t_datacenter_paragraph_detail",n.paragraphtitle);controlObj.text("detail_txt_paragraphresume_t_datacenter_paragraph_detail",n.paragraphresume);controlObj.text("detail_txt_paragraphlayout_t_datacenter_paragraph_detail",n.paragraphlayout.returnStringRN());controlObj.text("detail_txt_paragraphcode_t_datacenter_paragraph_detail",n.paragraphcode);controlObj.text("detail_txt_paragraphcontent_t_datacenter_paragraph_detail",n.paragraphcontent.returnStringRN());controlObj.text("detail_txt_paperid_t_datacenter_paragraph_detail",n.paperid);controlObj.text("detail_txt_paragraphcodeid_t_datacenter_paragraph_detail",n.paragraphcodeid);t.success()},h=function(n){var i,f,u,r;try{i={};i.f_value1=controlObj.text("detail_txt_f_value1_t_datacenter_paragraph_detail");i.f_value2=controlObj.text("detail_txt_f_value2_t_datacenter_paragraph_detail");i.f_value3=controlObj.text("detail_txt_f_value3_t_datacenter_paragraph_detail");i.f_value4=controlObj.text("detail_txt_f_value4_t_datacenter_paragraph_detail");i.f_value5=controlObj.text("detail_txt_f_value5_t_datacenter_paragraph_detail");i.f_value6=controlObj.text("detail_txt_f_value6_t_datacenter_paragraph_detail");i.f_value7=controlObj.text("detail_txt_f_value7_t_datacenter_paragraph_detail");i.f_value8=controlObj.text("detail_txt_f_value8_t_datacenter_paragraph_detail");i.f_value9=controlObj.text("detail_txt_f_value9_t_datacenter_paragraph_detail");i.f_value10=controlObj.text("detail_txt_f_value10_t_datacenter_paragraph_detail");i.paragraphid=controlObj.text("detail_txt_paragraphid_t_datacenter_paragraph_detail");i.paragraphnodeid=controlObj.text("detail_txt_paragraphnodeid_t_datacenter_paragraph_detail");i.paragraphtitle=controlObj.text("detail_txt_paragraphtitle_t_datacenter_paragraph_detail");i.paragraphresume=controlObj.text("detail_txt_paragraphresume_t_datacenter_paragraph_detail");i.paragraphlayout=controlObj.text("detail_txt_paragraphlayout_t_datacenter_paragraph_detail");f=t.mode;switch(f){case"text":var u=t.get(),r=t.getText(),u=JSON.parse(r);r=JSON.stringify(u);$.isArray(u)?controlObj.text("detail_txt_paragraphcontent_t_datacenter_paragraph_detail",r.replaceAll("\n","").replaceAll("\r","").formatString()):controlObj.text("detail_txt_paragraphcontent_t_datacenter_paragraph_detail","【"+r.replaceAll("\n","").replaceAll("\r","").formatString()+"】");break;case"tree":u=t.get();r=t.getText();$.isArray(u)?controlObj.text("detail_txt_paragraphcontent_t_datacenter_paragraph_detail",r.replaceAll("\n","").replaceAll("\r","").formatString()):controlObj.text("detail_txt_paragraphcontent_t_datacenter_paragraph_detail","【"+r.replaceAll("\n","").replaceAll("\r","").formatString()+"】")}i.paragraphcode=controlObj.text("detail_txt_paragraphcode_t_datacenter_paragraph_detail");i.paragraphcontent=controlObj.text("detail_txt_paragraphcontent_t_datacenter_paragraph_detail");i.paperid=controlObj.text("detail_txt_paperid_t_datacenter_paragraph_detail");i.paragraphcodeid=controlObj.text("detail_txt_paragraphcodeid_t_datacenter_paragraph_detail");n.success(i)}catch(e){_blockMessage.show("getData执行失败。<br/>"+e.message,"fail")}},c=function(n,t){try{var i=new hashMap,r=new hashMap;n.f_value1.length>100&&(i.put("detail_txt_f_value1_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value1_t_datacenter_paragraph_detail","top"));n.f_value2.length>100&&(i.put("detail_txt_f_value2_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value2_t_datacenter_paragraph_detail","top"));n.f_value3.length>100&&(i.put("detail_txt_f_value3_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value3_t_datacenter_paragraph_detail","top"));n.f_value4.length>100&&(i.put("detail_txt_f_value4_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value4_t_datacenter_paragraph_detail","top"));n.f_value5.length>100&&(i.put("detail_txt_f_value5_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value5_t_datacenter_paragraph_detail","top"));n.f_value6.length>100&&(i.put("detail_txt_f_value6_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value6_t_datacenter_paragraph_detail","top"));n.f_value7.length>100&&(i.put("detail_txt_f_value7_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value7_t_datacenter_paragraph_detail","top"));n.f_value8.length>100&&(i.put("detail_txt_f_value8_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value8_t_datacenter_paragraph_detail","top"));n.f_value9.length>100&&(i.put("detail_txt_f_value9_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value9_t_datacenter_paragraph_detail","top"));n.f_value10.length>100&&(i.put("detail_txt_f_value10_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_f_value10_t_datacenter_paragraph_detail","top"));n.paragraphid.length>100&&(i.put("detail_txt_paragraphid_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_paragraphid_t_datacenter_paragraph_detail","top"));n.paragraphnodeid.length>100&&(i.put("detail_txt_paragraphnodeid_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_paragraphnodeid_t_datacenter_paragraph_detail","top"));n.paragraphtitle.length>100&&(i.put("detail_txt_paragraphtitle_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_paragraphtitle_t_datacenter_paragraph_detail","top"));n.paragraphresume.length>100&&(i.put("detail_txt_paragraphresume_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_paragraphresume_t_datacenter_paragraph_detail","top"));n.paragraphcode.length>100&&(i.put("detail_txt_paragraphcode_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_paragraphcode_t_datacenter_paragraph_detail","top"));n.paragraphcontent.length>4e3&&i.put("detail_txt_paragraphcontent_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">4000<\/a>');n.paperid.length>100&&(i.put("detail_txt_paperid_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_paperid_t_datacenter_paragraph_detail","top"));n.paragraphcodeid.length>100&&(i.put("detail_txt_paragraphcodeid_t_datacenter_paragraph_detail",'长度不能超过<a style="color:red">100<\/a>'),r.put("detail_txt_paragraphcodeid_t_datacenter_paragraph_detail","top"));i.keys().length>0?(u.show(i,r,!0),t.fail()):(u.hidden(),t.success(n))}catch(f){_blockMessage.show("checkData执行失败。<br/>"+f.message,"fail")}},l=function(t){var r=" sys_id = '"+i._pr_sys_id+"'",u={whereString:r,orderByString:"",columnsString:"f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^paragraphid^paragraphnodeid^paragraphtitle^paragraphresume^paragraphlayout^paragraphcode^paragraphcontent^paperid^paragraphcodeid^sys_id",pageSizeString:"",pageIndexString:"",clientInf:_clientInf};doAjaxFunction(n,"GetList",u,{success:function(n){var r=new Function("","return "+n)();i._pr_sys_paragraphid=r.rows[0].paragraphid;t.success(r.rows[0])},fail:function(t){_blockMessage.show(n+"GetList<br/>"+t,"fail")}})},a=function(t,r){var u=new Date,f={sys_id:i._pr_sys_id,f_value1:t.f_value1,f_value2:t.f_value2,f_value3:t.f_value3,f_value4:t.f_value4,f_value5:t.f_value5,f_value6:t.f_value6,f_value7:t.f_value7,f_value8:t.f_value8,f_value9:t.f_value9,f_value10:t.f_value10,paragraphid:t.paragraphid,paragraphnodeid:t.paragraphnodeid,paragraphtitle:t.paragraphtitle,paragraphresume:t.paragraphresume,paragraphlayout:t.paragraphlayout.formatStringRN(),paragraphcode:t.paragraphcode,paragraphcontent:t.paragraphcontent.formatStringRN(),paperid:t.paperid,paragraphcodeid:t.paragraphcodeid,sys_lasteditusername:basePageObj._userInfoJson.sys_username,sys_lastedituserid:basePageObj._userInfoJson.sys_userid,sys_lasteditdate:u.Format("yyyy-MM-dd hh:mm:ss")},e={columns:"sys_id^f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^paragraphid^paragraphnodeid^paragraphtitle^paragraphresume^paragraphlayout^paragraphcode^paragraphcontent^paperid^paragraphcodeid^sys_lastedituserid^sys_lasteditusername^sys_lasteditdate",clientInf:_clientInf,json:JSON.stringify(f)};doAjaxFunction(n,"Update",e,{success:function(){i._pr_sys_paragraphid=t.paragraphid;r.success()},fail:function(n){r.fail(n)},error:function(t){_blockMessage.show(n+"Update<br/>"+t,"fail")}})},i={_pr_sys_id:"",_pr_pagetype:"",_pr_sys_paragraphid:"",init:function(n){try{e({success:function(){o({success:function(){u=new validateMessage("btn_command_save_t_datacenter_paragraph_detail");r=Ladda.create("btn_command_save_t_datacenter_paragraph_detail");switch(i._pr_pagetype){case"1":f(!1);break;case"2":f(!0)}n.success()}})}})}catch(t){_blockMessage.show("程序初始化失败。<br/>"+t.message,"fail")}},bindPage:function(n){try{l({success:function(i){var r=new Function("","return "+i.paragraphcontent.returnString())();r.length>1?t.set(r):t.set(r[0]);i.paragraphnodeid.length==4?$("#div_preview").removeClass("hidden"):$("#div_preview").addClass("hidden");s(i,{success:function(){n.success()}})}})}catch(i){_blockMessage.show("bindPage执行失败。<br/>"+i.message,"fail")}},btn_command_save_onclick:function(){try{r.start();h({success:function(n){c(n,{success:function(n){a(n,{success:function(){t_datacenter_paragraph_list_Obj.bindGrid({success:function(){$("#table_grid_t_datacenter_paragraph_list").find("tr.success").removeClass("success");$("#tr_"+i._pr_sys_id).addClass("success");r.stop();_alertMessage.show("保存成功","success",2e3)}})},fail:function(n){r.stop();_alertMessage.show("保存失败<br/>"+n,"fail")}})},fail:function(){r.stop();_alertMessage.show("校验未通过","warning")}})}})}catch(n){_blockMessage.show("保存程序异常。","fail")}},btn_command_preview_onclick:function(){var t=controlObj.singledropdownlistid("detail_dropdown_user_t_datacenter_paragraph_detail"),r=i._pr_sys_paragraphid,u={paragraphid:r,clientInf:_clientInf};doAjaxFunction(n,"GetChildParagraphids",u,{success:function(n){$("#iframe_t_datacenter_paragraph_preview").attr("src","../t_datacenter_paragraph/t_datacenter_paragraph_preview.html?userid="+t+"&sys_paragraphids="+n);$("#div_detail_modal_t_datacenter_paragraph_modallist").modal("show")},fail:function(t){_blockMessage.show(n+"GetChildParagraphids<br/>"+t,"fail")}})},btn_detail_modal_cancle_onclick:function(){$("#div_detail_modal_t_datacenter_paragraph_modallist").modal("hide")},menu_onclick:function(n){alert(n)}};return i}();
