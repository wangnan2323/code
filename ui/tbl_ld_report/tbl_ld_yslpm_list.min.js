var _clientInf='{userid="",appcode="54",appname="",userip="",usermac="",username=""}',_blockMessage=null,_alertMessage=null,_resultMessage=null,_confirmMessage=null,tbl_ld_yslpm_list_Obj=function(){"use strict";var t="//127.0.0.1/sara.dd.ldsw/service/service_tbl_ld_report.asmx/",u=!1,i="",r="",f=function(t){try{var u=new Date,f=u.getMonth()+1;i=u.getFullYear()+"/"+f+"/01 00:00:00";r=u.getFullYear()+"/"+f+"/"+u.getDate()+" 23:59:59";n._pr_listtype=requestQuery("listtype");n._pr_appcode=requestQuery("appcode");_clientInf='{userid:"'+basePageObj._userInfoJson.sys_userid+'",appcode:"'+n._pr_appcode+'",appname:"",userip:"'+basePageObj._userInfoJson.ip+'",usermac:"'+basePageObj._userInfoJson.mac+'",username:"'+basePageObj._userInfoJson.sys_username+'"}';n._pr_listtype==null||n._pr_listtype==""||n._pr_listtype=="null"?_blockMessage.show("listtype参数接收失败...","fail"):t.success()}catch(e){_blockMessage.show("initParameter执行失败<br/>"+e.message,"fail")}},e=function(){try{}catch(n){_blockMessage.show("setDisable执行失败<br/>"+n.message,"fail")}},o=function(n){controlObj.datetimeinit("search_f_cxrq_tbl_ld_yslpm_list_datefrom","search_f_cxrq_tbl_ld_yslpm_list_timefrom");controlObj.datetimeinit("search_f_cxrq_tbl_ld_yslpm_list_dateto","search_f_cxrq_tbl_ld_yslpm_list_timeto");controlObj.datetime("search_f_cxrq_tbl_ld_yslpm_list_datefrom","search_f_cxrq_tbl_ld_yslpm_list_timefrom",i);controlObj.datetime("search_f_cxrq_tbl_ld_yslpm_list_dateto","search_f_cxrq_tbl_ld_yslpm_list_timeto",r);n.success()},s=function(t){try{var i=0;$(window).width()<basePageObj._limSrceenWidth?(i=$(window).height()-320,i<950&&(i=950)):i=$(window).height()-240;$("#table_grid_tbl_ld_yslpm_list").bootstrapTable({cache:!1,height:i,striped:!0,pagination:u,pageNumber:n._pr_gridpageindex,search:!1,showColumns:!1,showRefresh:!1,clickToSelect:!0,sidePagination:"webserver",columns:[{field:"rn",title:"排名","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_yhm",title:"用户名","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"dj",title:"单价","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"yszje",title:"应收总金额","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"yspwf",title:"应收污水处理费","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"yssf",title:"应收水费","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"yssl",title:"应收水量","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sszje",title:"实收总金额","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}}],onPageChange:function(t,i){n._pr_gridpageindex=i;bindGrid(!0,{success:function(){},fail:function(n){_alertMessage.show("绑定失败","fail");_resultMessage.show(n)}})},rowStyle:function(){return{}},onLoadSuccess:function(){}});t.success()}catch(r){_blockMessage.show("initGrid执行失败<br/>"+r.message,"fail")}},h=function(){},n={_pr_appcode:"",_pr_listtype:"",_pr_gridselectids:"",_pr_gridpageindex:1,_pr_searchtype:"1",_pr_searchcontent:null,_pr_searchtime:null,_pr_searchhis:"false",init:function(){try{_alertMessage=new alertMessage;_resultMessage=new resultMessage;_confirmMessage=new confirmMessage;_blockMessage=new blockMessage;_blockMessage.show("程序加载中...","loading");basePageObj.initBasePage({success:function(){f({success:function(){o({success:function(){s({success:function(){n.bindGrid({success:function(){e();_blockMessage.hidden()},fail:function(n){_blockMessage.show("bindGrid执行失败<br/>"+n,"fail")}})}})}})}})},fail:function(n){_blockMessage.show(n,"fail")}})}catch(t){_blockMessage.show("程序初始化失败。<br/>"+t.message,"fail")}},bindGrid:function(n){setTimeout(function(){$("#table_grid_tbl_ld_yslpm_list").bootstrapTable("showLoading");var i=controlObj.datetime("search_f_cxrq_tbl_ld_yslpm_list_datefrom","search_f_cxrq_tbl_ld_yslpm_list_timefrom"),r=controlObj.datetime("search_f_cxrq_tbl_ld_yslpm_list_dateto","search_f_cxrq_tbl_ld_yslpm_list_timeto"),u=controlObj.text("search_yslfrom_tbl_ld_yslpm_list"),f=controlObj.text("search_yslto_tbl_ld_yslpm_list"),e=controlObj.text("search_pm_tbl_ld_yslpm_list"),o={cxrqfrom:i,cxrqto:r,yslfrom:u,yslto:f,pm:e};doAjaxFunction(t,"GetReport",o,{success:function(t){var i=new Function("","return "+t)();$("#table_grid_tbl_ld_yslpm_list").bootstrapTable("hideLoading");$("#table_grid_tbl_ld_yslpm_list").bootstrapTable("loadJson",i);n!=undefined&&n!=null&&n.success()},fail:function(t){n!=undefined&&n!=null&&n.fail(t)}})},0)},btn_command_export_onclick:function(){var n=controlObj.datetime("search_f_cxrq_tbl_ld_yslpm_list_datefrom","search_f_cxrq_tbl_ld_yslpm_list_timefrom"),i=controlObj.datetime("search_f_cxrq_tbl_ld_yslpm_list_dateto","search_f_cxrq_tbl_ld_yslpm_list_timeto"),r=controlObj.text("search_yslfrom_tbl_ld_yslpm_list"),u=controlObj.text("search_yslto_tbl_ld_yslpm_list"),f=controlObj.text("search_pm_tbl_ld_yslpm_list"),e={cxrqfrom:n,cxrqto:i,yslfrom:r,yslto:u,pm:f};doAjaxFunction(t,"ExportReport",e,{success:function(n){window.open(n,"_blank","")},fail:function(){_alertMessage.show("数据导出失败","fail")}})},end:function(){}};return n}();$(document).ready(function(){tbl_ld_yslpm_list_Obj.init()});
