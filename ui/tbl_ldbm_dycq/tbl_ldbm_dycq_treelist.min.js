var _clientInf='{userid:"",appcode:"54",appname:"",userip:"",usermac:"",username:""}',_blockMessage=null,_alertMessage=null,_resultMessage=null,_confirmMessage=null,tbl_ldbm_dycq_treelist_Obj=function(){"use strict";var f="//127.0.0.1/sara.dd.ldsw/service/service_tbl_ldbm_dycq.asmx/",c="",tt=!0,e=950,l=null,a=null,p=null,o=null,s=null,it=null,v="",w=0,t="",i="",r="",rt=function(t){try{n._pr_listtype=requestQuery("listtype");n._pr_appcode=requestQuery("appcode");n._pr_gridpageindex=requestQuery("gridpageIndex");n._pr_searchtype=requestQuery("searchtype");n._pr_searchcontent=requestQuery("searchcontent");_clientInf='{userid:"'+basePageObj._userInfoJson.sys_userid+'",appcode:"'+n._pr_appcode+'",appname:"",userip:"'+basePageObj._userInfoJson.ip+'",usermac:"'+basePageObj._userInfoJson.mac+'",username:"'+basePageObj._userInfoJson.sys_username+'"}';n._pr_gridpageindex=n._pr_gridpageindex==null||n._pr_gridpageindex==""||n._pr_gridpageindex=="null"?1:Number(n._pr_gridpageindex);n._pr_searchcontent=n._pr_searchcontent==null||n._pr_searchcontent==""||n._pr_searchcontent=="null"?{}:new Function("","return "+n._pr_searchcontent)();(n._pr_searchtype==null||n._pr_searchtype==""||n._pr_searchtype=="null")&&(n._pr_searchtype="1");switch(n._pr_searchtype){case"1":$("#btn_command_search_tbl_ldbm_dycq_treelist").html("简单查询");$("#txt_command_search_tbl_ldbm_dycq_treelist").removeAttr("disabled");break;case"2":$("#btn_command_search_tbl_ldbm_dycq_treelist").html("高级查询");$("#txt_command_search_tbl_ldbm_dycq_treelist").attr("disabled",!0)}n._pr_listtype==null||n._pr_listtype==""||n._pr_listtype=="null"?_blockMessage.show("listtype参数接收失败...","fail"):t.success()}catch(i){_blockMessage.show("initParameter执行失败"+i.message,"fail")}},y=function(t){if(n._pr_listtype=="1")if(t==!0){$("#btn_command_save_tbl_ldbm_dycq_treelist").addClass("hidden");$("#btn_command_delete_tbl_ldbm_dycq_treelist").addClass("hidden");var i=$("#table_grid_tbl_ldbm_dycq_treelist").bootstrapTable("getData");i.length>0?$("#btn_command_new_tbl_ldbm_dycq_treelist").parent().addClass("hidden"):$("#btn_command_new_tbl_ldbm_dycq_treelist").parent().removeClass("hidden")}else $("#btn_command_save_tbl_ldbm_dycq_treelist").removeClass("hidden"),$("#btn_command_delete_tbl_ldbm_dycq_treelist").removeClass("hidden"),$("#btn_command_new_tbl_ldbm_dycq_treelist").parent().removeClass("hidden");else $("#btn_command_save_tbl_ldbm_dycq_treelist").addClass("hidden"),$("#btn_command_delete_tbl_ldbm_dycq_treelist").addClass("hidden"),$("#btn_command_new_tbl_ldbm_dycq_treelist").parent().addClass("hidden")},ut=function(n){var t="";t+="0504^";t=t.trimEnd("^");commonObj.getCodeServiceJson(t,{success:function(t){try{l=new hashMap;l.put("codeservice_0504",t["0504"]);n.success()}catch(i){_blockMessage.show("initBaseCode执行失败<br/>"+i.message,"fail")}}})},ft=function(n){try{var t=l.get("codeservice_0504");controlObj.multidropdownlistinit("search_f_zt_tbl_ldbm_dycq_treelist",t);$("#div_search_modal_tbl_ldbm_dycq_treelist").modal({keyboard:!1,backdrop:"static",show:!1});n.success()}catch(i){_blockMessage.show("initSearchControl执行失败。<br/>"+i.message,"fail")}},et=function(t){try{switch(n._pr_searchtype){case"1":n._pr_searchcontent.type1!=undefined&&$("#txt_command_search_tbl_ldbm_dycq_treelist").val(n._pr_searchcontent.type1);break;case"2":if(n._pr_searchcontent.type2!=undefined){var i=n._pr_searchcontent.type2;controlObj.text("search_f_value1_tbl_ldbm_dycq_treelist",i.f_value1);controlObj.text("search_f_value2_tbl_ldbm_dycq_treelist",i.f_value2);controlObj.text("search_f_value3_tbl_ldbm_dycq_treelist",i.f_value3);controlObj.text("search_f_value4_tbl_ldbm_dycq_treelist",i.f_value4);controlObj.text("search_f_value5_tbl_ldbm_dycq_treelist",i.f_value5);controlObj.text("search_f_value6_tbl_ldbm_dycq_treelist",i.f_value6);controlObj.text("search_f_value7_tbl_ldbm_dycq_treelist",i.f_value7);controlObj.text("search_f_value8_tbl_ldbm_dycq_treelist",i.f_value8);controlObj.text("search_f_value9_tbl_ldbm_dycq_treelist",i.f_value9);controlObj.text("search_f_value10_tbl_ldbm_dycq_treelist",i.f_value10);controlObj.text("search_f_mc_tbl_ldbm_dycq_treelist",i.f_mc);controlObj.text("search_f_ms_tbl_ldbm_dycq_treelist",i.f_ms);controlObj.multidropdownlistid("search_f_zt_tbl_ldbm_dycq_treelist",i.f_ztid);controlObj.text("search_f_bz_tbl_ldbm_dycq_treelist",i.f_bz)}}t.success()}catch(r){_blockMessage.show("setSearchModel执行失败<br/>"+r.message,"fail")}},k=function(t){try{switch(n._pr_searchtype){case"1":n._pr_searchcontent.type1=$("#txt_command_search_tbl_ldbm_dycq_treelist").val();break;case"2":var i={};i.f_value1=controlObj.text("search_f_value1_tbl_ldbm_dycq_treelist");i.f_value2=controlObj.text("search_f_value2_tbl_ldbm_dycq_treelist");i.f_value3=controlObj.text("search_f_value3_tbl_ldbm_dycq_treelist");i.f_value4=controlObj.text("search_f_value4_tbl_ldbm_dycq_treelist");i.f_value5=controlObj.text("search_f_value5_tbl_ldbm_dycq_treelist");i.f_value6=controlObj.text("search_f_value6_tbl_ldbm_dycq_treelist");i.f_value7=controlObj.text("search_f_value7_tbl_ldbm_dycq_treelist");i.f_value8=controlObj.text("search_f_value8_tbl_ldbm_dycq_treelist");i.f_value9=controlObj.text("search_f_value9_tbl_ldbm_dycq_treelist");i.f_value10=controlObj.text("search_f_value10_tbl_ldbm_dycq_treelist");i.f_mc=controlObj.text("search_f_mc_tbl_ldbm_dycq_treelist");i.f_ms=controlObj.text("search_f_ms_tbl_ldbm_dycq_treelist");i.f_ztid=controlObj.multidropdownlistid("search_f_zt_tbl_ldbm_dycq_treelist");i.f_bz=controlObj.text("search_f_bz_tbl_ldbm_dycq_treelist");n._pr_searchcontent.type2=i}t.success()}catch(r){t.fail(r.message)}},ot=function(t){try{var r=n._pr_searchcontent.type2,i=new hashMap,u=new hashMap;r.f_value1.length>200&&i.put("search_f_value1_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value2.length>200&&i.put("search_f_value2_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value3.length>200&&i.put("search_f_value3_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value4.length>200&&i.put("search_f_value4_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value5.length>200&&i.put("search_f_value5_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value6.length>200&&i.put("search_f_value6_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value7.length>200&&i.put("search_f_value7_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value8.length>200&&i.put("search_f_value8_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value9.length>200&&i.put("search_f_value9_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value10.length>200&&i.put("search_f_value10_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_mc.length>200&&i.put("search_f_mc_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_ms.length>200&&i.put("search_f_ms_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_ztid.length>200&&i.put("search_f_zt_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');r.f_bz.length>200&&i.put("search_f_bz_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');i.keys().length>0?(a.show(i,u,!1),t.fail("")):(a.hidden(),t.success())}catch(f){t.fail(f.message)}},d=function(){switch(n._pr_searchtype){case"1":n._pr_searchcontent.type2==undefined&&(n._pr_searchcontent.type2={});n._pr_searchcontent.type2.f_value1="";controlObj.text("search_f_value1_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value1);n._pr_searchcontent.type2.f_value2="";controlObj.text("search_f_value2_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value2);n._pr_searchcontent.type2.f_value3="";controlObj.text("search_f_value3_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value3);n._pr_searchcontent.type2.f_value4="";controlObj.text("search_f_value4_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value4);n._pr_searchcontent.type2.f_value5="";controlObj.text("search_f_value5_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value5);n._pr_searchcontent.type2.f_value6="";controlObj.text("search_f_value6_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value6);n._pr_searchcontent.type2.f_value7="";controlObj.text("search_f_value7_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value7);n._pr_searchcontent.type2.f_value8="";controlObj.text("search_f_value8_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value8);n._pr_searchcontent.type2.f_value9="";controlObj.text("search_f_value9_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value9);n._pr_searchcontent.type2.f_value10="";controlObj.text("search_f_value10_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_value10);n._pr_searchcontent.type2.f_mc="";controlObj.text("search_f_mc_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_mc);n._pr_searchcontent.type2.f_ms="";controlObj.text("search_f_ms_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_ms);n._pr_searchcontent.type2.f_ztid="";controlObj.multidropdownlistid("search_f_zt_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_ztid);n._pr_searchcontent.type2.f_bz="";controlObj.text("search_f_bz_tbl_ldbm_dycq_treelist",n._pr_searchcontent.type2.f_bz);break;case"2":n._pr_searchcontent.type1==undefined&&(n._pr_searchcontent.type1="");$("#txt_command_search_tbl_ldbm_dycq_treelist").val("")}},st=function(f){try{$("#table_grid_tbl_ldbm_dycq_treelist").bootstrapTable({showHeader:!1,cache:!1,height:e-97,striped:!1,pagination:tt,pageSize:c,pageList:[c],pageNumber:n._pr_gridpageindex,search:!1,showColumns:!1,showRefresh:!1,clickToSelect:!0,singleSelect:!0,idField:"sys_id",sidePagination:"webserver",columns:[{field:"sys_id",title:"sys_id",align:"left",valign:"middle",visible:!0,sortable:!1,clickToSelect:!0,formatter:function(n,t){var i="",n="",u,r;for(i+='<div class="gridcell-divtable">',u=t.sys_orderid.length/4,r=0;r<u;r++)r==u-1?(i+='<div class="gridcell-divcell gridcell-node">',t.ishaschid=="true"&&(i+='<a><i sys_id="'+t.sys_id+'" class="hand icon-minus-sign fold"><\/i><\/a>'),i+="<\/div>"):i+='<div class="gridcell-divcell gridcell-node "><\/div>';return i+='<div class="gridcell-divcell gridcell-content" >',n=t.f_mc,i+='<div><span class="gridcell-fieldnamecn">名称：<\/span>'+n+"<\/div>",n=t.f_ms,i+='<div><span class="gridcell-fieldnamecn">描述：<\/span>'+n+"<\/div>",n=t.f_zt,i+='<div><span class="gridcell-fieldnamecn">状态：<\/span>'+n+"<\/div>",n=t.f_bz,n.length>10&&(n=n.substr(0,10)+"..."),i+='<div><span class="gridcell-fieldnamecn">备注：<\/span>'+n+"<\/div>",i+="<\/div>",i+='<div  class="gridcell-divcell gridcell-edit" >',i+='<a class="edit ml10" href="javascript:void(0)"><i class="glyphicon glyphicon-edit"><\/i><\/a>',i+="<\/div>",i+"<\/div>"},events:{"click .edit":function(n,i,r){t!=r.sys_id&&($("#table_grid_tbl_ldbm_dycq_treelist").find("tr.success").removeClass("success"),$(n.target).parent().parent().parent().parent().parent().addClass("success"),t=r.sys_id,u({success:function(){},fail:function(n){_alertMessage.show("bindDetailControl执行失败","fail");_resultMessage.show(n)}}))},"click .fold":function(n,f,e){var o=$(n.target),h=e.sys_orderid,s=e.sys_id,l=$("#table_grid_tbl_ldbm_dycq_treelist").bootstrapTable("getData"),c=$.grep(l,function(n){return n.sys_orderid.length>h.length&&n.sys_orderid.indexOf(h)==0},!1);o.hasClass("icon-minus-sign")?($.each(c,function(n,i){$("#table_grid_tbl_ldbm_dycq_treelist").find("#tr_"+i.sys_id).addClass("hidden");("^"+r+"^").indexOf("^"+i.sys_id+"^")<=-1&&(r+="^"+i.sys_id+"^",r=r.trimEnd("^").trimStart("^"));i.sys_id==t&&(t="",u({success:function(){},fail:function(n){_alertMessage.show("bindDetailControl执行失败","fail");_resultMessage.show(n)}}))}),o.removeClass("icon-minus-sign"),o.addClass("icon-plus-sign"),("^"+i+"^").indexOf("^"+s+"^")<=-1&&(i+="^"+s+"^",i=i.trimEnd("^").trimStart("^"))):($.each(c,function(n,i){$("#table_grid_tbl_ldbm_dycq_treelist").find("#tr_"+i.sys_id).removeClass("hidden");$("#table_grid_tbl_ldbm_dycq_treelist").find("#tr_"+i.sys_id).find("i.icon-plus-sign").addClass("icon-minus-sign").removeClass("icon-plus-sign");$("#table_grid_tbl_ldbm_dycq_treelist").find("#tr_"+i.sys_id).hasClass("success")&&(t=i.sys_id,u({success:function(){},fail:function(n){_alertMessage.show("bindDetailControl执行失败","fail");_resultMessage.show(n)}}));("^"+r+"^").indexOf("^"+i.sys_id+"^")>-1&&(r=("^"+r+"^").replaceAll("^"+i.sys_id+"^","^").replaceAll("^^","^"),r=r.trimEnd("^").trimStart("^"))}),o.removeClass("icon-plus-sign"),o.addClass("icon-minus-sign"),("^"+i+"^").indexOf("^"+s+"^")>-1&&(i=("^"+i+"^").replaceAll("^"+s+"^","^").replaceAll("^^","^"),i=i.trimEnd("^").trimStart("^")))}}},{field:"f_value1",title:"备用字段1","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value2",title:"备用字段2","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value3",title:"备用字段3","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value4",title:"备用字段4","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value5",title:"备用字段5","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value6",title:"备用字段6","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value7",title:"备用字段7","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value8",title:"备用字段8","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value9",title:"备用字段9","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value10",title:"备用字段10","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_mc",title:"名称","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_ms",title:"描述","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_zt",title:"状态","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_ztid",title:"状态id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_bz",title:"备注","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},],onPageChange:function(t,i){n._pr_gridpageindex=i;h(!0,{success:function(){u({success:function(){},fail:function(n){_alertMessage.show("bindDetailControl执行失败","fail");_resultMessage.show(n)}})},fail:function(n){_alertMessage.show("bindDetailControl执行失败","fail");_resultMessage.show(n)}})},rowStyle:function(){return{}},onLoadSuccess:function(){},onCheck:function(){},onUncheck:function(){},onCheckAll:function(){},onUncheckAll:function(){}});f.success()}catch(o){_blockMessage.show("initGrid执行失败<br/>"+o.message,"fail")}},b=function(t){var i="",u,f,r,e;switch(n._pr_searchtype){case"1":if(n._pr_searchcontent.type1!=undefined){if(u=n._pr_searchcontent.type1.split(" "),u.length>0){for(f=0;f<u.length;f++)u[f]!=""&&(i+="(",i+=" f_mc like '%"+u[f]+"%' or ",i+=" f_ms like '%"+u[f]+"%' or ",i+=" f_zt like '%"+u[f]+"%' or ",i+=" f_bz like '%"+u[f]+"%' or ",i.length>0&&(i=i.substr(0,i.length-3)),i+=") and ");i.length>0&&(i=i.substr(0,i.length-4))}v=i}t.success();break;case"2":n._pr_searchcontent.type2!=undefined&&(r=n._pr_searchcontent.type2,r.f_mc.length>0&&(i+=" f_mc like '%"+r.f_mc+"%' and "),r.f_ms.length>0&&(i+=" f_ms like '%"+r.f_ms+"%' and "),r.f_ztid.length>0&&(e=r.f_ztid.split(","),i+="(",$.each(e,function(n){i+=n==0?" ":" or ";i+="((','||f_ztid||',') like ('%,'||'"+e[n]+"'||',%')) "}),i+=") and "),r.f_bz.length>0&&(i+=" f_bz like '%"+r.f_bz+"%' and "),i.length>0&&(i=i.substr(0,i.length-4)));v=i;t.success()}},h=function(u,e){u==!0?(t="",w=0,i="",r=""):w=$("#table_grid_tbl_ldbm_dycq_treelist").parent().scrollTop();setTimeout(function(){var s;$("#table_grid_tbl_ldbm_dycq_treelist").bootstrapTable("showLoading");var h=v,u=" sys_id desc",o="f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^f_mc^f_ms^f_zt^f_ztid^f_bz^sys_id";o+="^sys_orderid";u=" sys_orderid asc";s={whereString:h,orderByString:u,columnsString:o,pageSizeString:c,pageIndexString:n._pr_gridpageindex,clientInf:_clientInf};doAjaxFunction(f,"GetList",s,{success:function(n){var u=new Function("","return "+n)(),f,o;$.each(u.rows,function(n,t){var i=t.sys_orderid,r=$.grep(u.rows,function(n){return n.sys_orderid.length>i.length&&n.sys_orderid.indexOf(i)==0},!1);t.ishaschid=r.length>0?"true":"false"});$("#table_grid_tbl_ldbm_dycq_treelist").bootstrapTable("hideLoading");$("#table_grid_tbl_ldbm_dycq_treelist").bootstrapTable("loadJson",u);t==""&&u.rows.length>0&&(t=u.rows[0].sys_id);$("#table_grid_tbl_ldbm_dycq_treelist").find("tr.success").removeClass("success");$("#table_grid_tbl_ldbm_dycq_treelist").find("#tr_"+t).addClass("success");f=r.split("^");$.each(f,function(n,t){t!=""&&$("#table_grid_tbl_ldbm_dycq_treelist").find("#tr_"+t).addClass("hidden")});o=i.split("^");$.each(o,function(n,t){t!=""&&$("#table_grid_tbl_ldbm_dycq_treelist").find("#tr_"+t).find("i.icon-minus-sign").addClass("icon-plus-sign").removeClass("icon-minus-sign")});$("#table_grid_tbl_ldbm_dycq_treelist").parent().scrollTop(w);e.success()},fail:function(n){e.fail(n)}})},0)},ht=function(n){try{$("#div_detail_control_container_tbl_ldbm_dycq").css("min-height",e);$("#div_list_container_tbl_ldbm_dycq").css("min-height",e);var t=l.get("codeservice_0504");controlObj.singledropdownlistinit("detail_f_zt_tbl_ldbm_dycq_treelist",t,wt);n.success()}catch(i){_blockMessage.show("initDetailControl执行失败。<br/>"+i.message,"fail")}},u=function(n){t!=""?($("#div_detail_tbl_ldbm_dycq").removeClass("hidden"),y(!1),yt({success:function(t){ct(t,{success:function(){n.success()},fail:function(t){n.fail(t)}})},fail:function(t){n.fail(t)}})):(vt(),$("#div_detail_tbl_ldbm_dycq").addClass("hidden"),y(!0),n.success())},g=function(n){controlObj.textdisable("detail_f_mc_tbl_ldbm_dycq_treelist",n);controlObj.textdisable("detail_f_ms_tbl_ldbm_dycq_treelist",n);controlObj.singledropdownlistdisable("detail_f_zt_tbl_ldbm_dycq_treelist",n);controlObj.textdisable("detail_f_bz_tbl_ldbm_dycq_treelist",n)},ct=function(n,t){try{controlObj.text("detail_f_value1_tbl_ldbm_dycq_treelist",n.f_value1);controlObj.text("detail_f_value2_tbl_ldbm_dycq_treelist",n.f_value2);controlObj.text("detail_f_value3_tbl_ldbm_dycq_treelist",n.f_value3);controlObj.text("detail_f_value4_tbl_ldbm_dycq_treelist",n.f_value4);controlObj.text("detail_f_value5_tbl_ldbm_dycq_treelist",n.f_value5);controlObj.text("detail_f_value6_tbl_ldbm_dycq_treelist",n.f_value6);controlObj.text("detail_f_value7_tbl_ldbm_dycq_treelist",n.f_value7);controlObj.text("detail_f_value8_tbl_ldbm_dycq_treelist",n.f_value8);controlObj.text("detail_f_value9_tbl_ldbm_dycq_treelist",n.f_value9);controlObj.text("detail_f_value10_tbl_ldbm_dycq_treelist",n.f_value10);controlObj.text("detail_f_mc_tbl_ldbm_dycq_treelist",n.f_mc);controlObj.text("detail_f_ms_tbl_ldbm_dycq_treelist",n.f_ms);controlObj.singledropdownlistid("detail_f_zt_tbl_ldbm_dycq_treelist",n.f_ztid);controlObj.text("detail_f_bz_tbl_ldbm_dycq_treelist",n.f_bz.returnStringRN());t.success()}catch(i){t.fail(i.message)}},lt=function(n){try{var t={};t.f_value1=controlObj.text("detail_f_value1_tbl_ldbm_dycq_treelist");t.f_value2=controlObj.text("detail_f_value2_tbl_ldbm_dycq_treelist");t.f_value3=controlObj.text("detail_f_value3_tbl_ldbm_dycq_treelist");t.f_value4=controlObj.text("detail_f_value4_tbl_ldbm_dycq_treelist");t.f_value5=controlObj.text("detail_f_value5_tbl_ldbm_dycq_treelist");t.f_value6=controlObj.text("detail_f_value6_tbl_ldbm_dycq_treelist");t.f_value7=controlObj.text("detail_f_value7_tbl_ldbm_dycq_treelist");t.f_value8=controlObj.text("detail_f_value8_tbl_ldbm_dycq_treelist");t.f_value9=controlObj.text("detail_f_value9_tbl_ldbm_dycq_treelist");t.f_value10=controlObj.text("detail_f_value10_tbl_ldbm_dycq_treelist");t.f_mc=controlObj.text("detail_f_mc_tbl_ldbm_dycq_treelist");t.f_ms=controlObj.text("detail_f_ms_tbl_ldbm_dycq_treelist");t.f_zt=controlObj.singledropdownlist("detail_f_zt_tbl_ldbm_dycq_treelist");t.f_ztid=controlObj.singledropdownlistid("detail_f_zt_tbl_ldbm_dycq_treelist");t.f_bz=controlObj.text("detail_f_bz_tbl_ldbm_dycq_treelist");n.success(t)}catch(i){n.fail(i.message)}},at=function(n,t){try{var i=new hashMap,r=new hashMap;n.f_value1.length>200&&i.put("detail_f_value1_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value2.length>200&&i.put("detail_f_value2_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value3.length>200&&i.put("detail_f_value3_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value4.length>200&&i.put("detail_f_value4_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value5.length>200&&i.put("detail_f_value5_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value6.length>200&&i.put("detail_f_value6_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value7.length>200&&i.put("detail_f_value7_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value8.length>200&&i.put("detail_f_value8_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value9.length>200&&i.put("detail_f_value9_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_value10.length>200&&i.put("detail_f_value10_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_mc.length>200&&i.put("detail_f_mc_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_mc.length<1&&i.put("detail_f_mc_tbl_ldbm_dycq_treelist",'长度不能小于<a style="color:red">1<\/a>个字');n.f_ms.length>200&&i.put("detail_f_ms_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_zt.length>200&&i.put("detail_f_zt_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">200<\/a>个字');n.f_zt.length<1&&i.put("detail_f_zt_tbl_ldbm_dycq_treelist",'长度不能小于<a style="color:red">1<\/a>个字');n.f_bz.length>4e3&&i.put("detail_f_bz_tbl_ldbm_dycq_treelist",'长度不能超过<a style="color:red">4000<\/a>个字');i.keys().length>0?(p.show(i,r,!0),t.fail("")):(p.hidden(),t.success(n))}catch(u){t.fail(u.message)}},vt=function(){var n={};n.f_value1="";controlObj.text("detail_f_value1_tbl_ldbm_dycq_treelist",n.f_value1);n.f_value2="";controlObj.text("detail_f_value2_tbl_ldbm_dycq_treelist",n.f_value2);n.f_value3="";controlObj.text("detail_f_value3_tbl_ldbm_dycq_treelist",n.f_value3);n.f_value4="";controlObj.text("detail_f_value4_tbl_ldbm_dycq_treelist",n.f_value4);n.f_value5="";controlObj.text("detail_f_value5_tbl_ldbm_dycq_treelist",n.f_value5);n.f_value6="";controlObj.text("detail_f_value6_tbl_ldbm_dycq_treelist",n.f_value6);n.f_value7="";controlObj.text("detail_f_value7_tbl_ldbm_dycq_treelist",n.f_value7);n.f_value8="";controlObj.text("detail_f_value8_tbl_ldbm_dycq_treelist",n.f_value8);n.f_value9="";controlObj.text("detail_f_value9_tbl_ldbm_dycq_treelist",n.f_value9);n.f_value10="";controlObj.text("detail_f_value10_tbl_ldbm_dycq_treelist",n.f_value10);n.f_mc="";controlObj.text("detail_f_mc_tbl_ldbm_dycq_treelist",n.f_mc);n.f_ms="";controlObj.text("detail_f_ms_tbl_ldbm_dycq_treelist",n.f_ms);n.f_zt="";n.f_ztid="";controlObj.singledropdownlistid("detail_f_zt_tbl_ldbm_dycq_treelist",n.f_ztid);n.f_bz="";controlObj.text("detail_f_bz_tbl_ldbm_dycq_treelist",n.f_bz.returnStringRN())},yt=function(n){var i=" sys_id = '"+t+"'",r={whereString:i,orderByString:"",columnsString:"f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^f_mc^f_ms^f_zt^f_ztid^f_bz^sys_id",pageSizeString:"",pageIndexString:"",clientInf:_clientInf};doAjaxFunction(f,"GetList",r,{success:function(t){try{var i=new Function("","return "+t)();n.success(i.rows[0])}catch(r){n.fail(r.message)}},fail:function(t){n.fail(t)}})},pt=function(n,i){var r=new Date,u={sys_id:t,f_value1:n.f_value1,f_value2:n.f_value2,f_value3:n.f_value3,f_value4:n.f_value4,f_value5:n.f_value5,f_value6:n.f_value6,f_value7:n.f_value7,f_value8:n.f_value8,f_value9:n.f_value9,f_value10:n.f_value10,f_mc:n.f_mc,f_ms:n.f_ms,f_zt:n.f_zt,f_ztid:n.f_ztid,f_bz:n.f_bz.formatStringRN(),sys_lasteditusername:basePageObj._userInfoJson.sys_username,sys_lastedituserid:basePageObj._userInfoJson.sys_userid,sys_lasteditdate:r.Format("yyyy-MM-dd hh:mm:ss")},e={columns:"f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^f_mc^f_ms^f_zt^f_ztid^f_bz^sys_id^sys_lastedituserid^sys_lasteditusername^sys_lasteditdate",clientInf:_clientInf,json:JSON.stringify(u)};doAjaxFunction(f,"Update",e,{success:function(){i.success(n)},fail:function(n){i.fail(n)},error:function(n){_blockMessage.show(f+"Update<br/>"+n,"fail")}})},nt=function(n,i){var r={baseSysId:t,operType:n,clientInf:_clientInf};doAjaxFunction(f,"GetNodeid",r,{success:function(n){var r=new Date,e={f_value1:"",f_value2:"",f_value3:"",f_value4:"",f_value5:"",f_value6:"",f_value7:"",f_value8:"",f_value9:"",f_value10:"",f_mc:"",f_ms:"",f_ztid:"0",f_bz:"",sys_orderid:n,sys_delflag:"0",sys_lasteditusername:basePageObj._userInfoJson.sys_username,sys_lastedituserid:basePageObj._userInfoJson.sys_userid,sys_lasteditdate:r.Format("yyyy-MM-dd hh:mm:ss"),sys_creatdate:r.Format("yyyy-MM-dd hh:mm:ss"),sys_creatusername:basePageObj._userInfoJson.sys_username,sys_creatuserid:basePageObj._userInfoJson.sys_userid},o={json:JSON.stringify(e),clientInf:_clientInf};doAjaxFunction(f,"Add",o,{success:function(n){t=n;h(!1,{success:function(){u({success:function(){i.success()},fail:function(n){i.fail("bindDetailControl:"+n)}})},fail:function(){i.fail("bindGrid:"+message)}})},fail:function(n){i.fail("Add:"+n)}})},fail:function(n){i.fail("GetNodeid:"+n)}})},wt=function(n){var t=n.target.id},bt=function(){},n={_pr_listtype:"",_pr_gridselectid:"",_pr_gridpageindex:1,_pr_searchtype:"1",_pr_searchcontent:null,_pr_appcode:"",init:function(){try{_alertMessage=new alertMessage;_confirmMessage=new confirmMessage;_blockMessage=new blockMessage;_resultMessage=new resultMessage;_blockMessage.show("程序加载中...","loading");basePageObj.initBasePage({success:function(){rt({success:function(){$(window).width()<basePageObj._limSrceenWidth?(e=$(window).height()-320,e<950&&(e=950)):e=$(window).height()-140;o=Ladda.create("btn_command_new_tbl_ldbm_dycq_treelist");s=Ladda.create("btn_command_delete_tbl_ldbm_dycq_treelist");it=Ladda.create("btn_command_save_tbl_ldbm_dycq_treelist");a=new validateMessage("btn_search_modal_search_tbl_ldbm_dycq_treelist");p=new validateMessage("btn_command_save_tbl_ldbm_dycq_treelist");b({success:function(){st({success:function(){h(!1,{success:function(){ut({success:function(){ft({success:function(){et({success:function(){}})}});ht({success:function(){switch(n._pr_listtype){case"1":g(!1);y(!1);break;case"2":g(!0);y(!0)}u({success:function(){_blockMessage.hidden()},fail:function(){_blockMessage.show("bindDetailControl执行失败<br/>"+message,"fail")}})}})}})},fail:function(n){_blockMessage.show("bindGrid执行失败<br/>"+n,"fail")}})}})}})}})},fail:function(n){_blockMessage.show(n,"fail")}})}catch(t){_blockMessage.show("程序初始化失败。<br/>"+t.message,"fail")}},btn_command_new_onclick:function(){o.start();nt("level",{success:function(){o.stop()},fail:function(n){o.stop();_alertMessage.show("addDetailData执行失败","fail");_resultMessage.show(n)}})},btn_command_newchild_onclick:function(){o.start();nt("child",{success:function(){o.stop()},fail:function(n){o.stop();_alertMessage.show("addDetailData执行失败","fail");_resultMessage.show(n)}})},btn_command_search_onclick:function(){try{switch(n._pr_searchtype){case"1":k({success:function(){b({success:function(){d();n._pr_gridpageindex="1";h(!0,{success:function(){u({success:function(){},fail:function(n){_alertMessage.show("bindDetailControl执行失败","fail");_resultMessage.show(n)}})},fail:function(){_alertMessage.show("bindGrid执行失败","fail");_resultMessage.show(message)}})}})},fail:function(n){_alertMessage.show("获取数据失败","fail");_resultMessage.show(n)}});break;case"2":n.btn_command_search_2_onclick()}}catch(t){_alertMessage.show("查询失败<br/>"+t.message,"fail")}},btn_command_search_1_onclick:function(){n._pr_searchtype="1";$("#btn_command_search_tbl_ldbm_dycq_treelist").html("简单查询");$("#txt_command_search_tbl_ldbm_dycq_treelist").removeAttr("disabled")},btn_command_search_2_onclick:function(){n._pr_searchtype="2";$("#btn_command_search_tbl_ldbm_dycq_treelist").html("高级查询");$("#txt_command_search_tbl_ldbm_dycq_treelist").attr("disabled","disabled");$("#div_search_modal_tbl_ldbm_dycq_treelist").modal("show")},btn_search_modal_search_onclick:function(){k({success:function(){ot({success:function(){b({success:function(){d();$("#div_search_modal_tbl_ldbm_dycq_treelist").modal("hide");n._pr_gridpageindex="1";h(!0,{success:function(){u({success:function(){},fail:function(n){_alertMessage.show("bindDetailControl执行失败","fail");_resultMessage.show(n)}})},fail:function(){_alertMessage.show("bindGrid执行失败","fail");_resultMessage.show(message)}})}})},fail:function(n){n==""?_alertMessage.show("校验不通过","warning"):(_alertMessage.show("校验失败","fail"),_resultMessage.show(n))}})},fail:function(n){_alertMessage.show("获取数据失败","fail");_resultMessage.show(n)}})},btn_search_modal_cancle_onclick:function(){a.hidden();$("#div_search_modal_tbl_ldbm_dycq_treelist").modal("hide");n._pr_searchtype="1";$("#btn_command_search_tbl_ldbm_dycq_treelist").html("简单查询");$("#txt_command_search_tbl_ldbm_dycq_treelist").removeAttr("disabled")},btn_command_save_onclick:function(){lt({success:function(n){at(n,{success:function(n){pt(n,{success:function(){h(!1,{success:function(){_alertMessage.show("保存成功","success","2000")},fail:function(n){_alertMessage.show("bindGrid失败","fail");_resultMessage.show(n)}})},fail:function(n){_alertMessage.show("数据更新失败","fail");_resultMessage.show(n)}})},fail:function(n){n!=""?(_alertMessage.show("校验失败","fail"),_resultMessage.show(n)):_alertMessage.show("校验未通过","warning")}})},fail:function(n){_alertMessage.show("数据获取失败","warning");_resultMessage.show(n)}})},btn_command_delete_onclick:function(){var r,e,i;t==""?_alertMessage.show("请选择一条数据!","warning",1e3):(r=$("#table_grid_tbl_ldbm_dycq_treelist").bootstrapTable("getData"),e=$.grep(r,function(n){return n.sys_id==t&&n.ishaschid=="true"}),e.length>0?_alertMessage.show("含有子节点的数据不能删除!","warning",1e3):(i="<blockquote> ",i+="<h3>请确认删除当前选中数据<\/h3>",i+="<\/blockquote> ",_confirmMessage.destory(),_confirmMessage.show("删除确认？",i,{confirm:function(){s.start();var i="sys_id in ('"+t.toString().replaceAll("^","','")+"')",r={clientInf:_clientInf,whereString:i};doAjaxFunction(f,"Delete",r,{success:function(){var t={clientInf:_clientInf,whereString:v};doAjaxFunction(f,"GetCount",t,{success:function(t){var i=parseInt(t);i<n._pr_gridpageindex*c&&(n._pr_gridpageindex=Math.ceil(i/c));n._pr_gridpageindex==0&&(n._pr_gridpageindex=1);h(!0,{success:function(){u({success:function(){s.stop()},fail:function(n){s.stop();_alertMessage.show("bindDetailControl失败","fail");_resultMessage.show(n)}})},fail:function(n){s.stop();_alertMessage.show("bindGrid失败","fail");_resultMessage.show(n)}})},fail:function(n){s.stop();_alertMessage.show("数据删除完成，获取数据条数失败","fail");_resultMessage.show(n)}})},fail:function(n){s.stop();_alertMessage.show("数据删除失败","fail");_resultMessage.show(n)}})},cancle:function(){}})))},end:function(){}};return n}();$(document).ready(function(){tbl_ldbm_dycq_treelist_Obj.init()});