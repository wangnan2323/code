var tbl_app_news_discuss_detail_Obj=function(){"use strict";var i="//127.0.0.1/sara.dd.ldsw/service/service_tbl_app_news_discuss.asmx/",r=null,n=null,f=function(n){try{n.success()}catch(t){_blockMessage.show("initControl执行失败。<br/>"+t.message,"fail")}},u=function(n){try{controlObj.textdisable("detail_txt_fk_tbl_app_news_sys_id_tbl_app_news_discuss_detail",n);controlObj.textdisable("detail_txt_f_discusscontent_tbl_app_news_discuss_detail",n);controlObj.textdisable("detail_txt_f_nodeid_tbl_app_news_discuss_detail",n);controlObj.textdisable("detail_txt_fk_t_user_id_tbl_app_news_discuss_detail",!0);controlObj.textdisable("detail_txt_f_username_tbl_app_news_discuss_detail",!0);n?($("#btn_command_save_tbl_app_news_discuss_detail").addClass("hidden"),$(".btn-command-message").attr("disabled","disabled")):($("#btn_command_save_tbl_app_news_discuss_detail").removeClass("hidden"),$(".btn-command-message").removeAttr("disabled"))}catch(t){_blockMessage.show("setDisable执行失败。<br/>"+t.message,"fail")}},e=function(n,i){controlObj.text("detail_txt_f_value1_tbl_app_news_discuss_detail",n.f_value1);controlObj.text("detail_txt_f_value2_tbl_app_news_discuss_detail",n.f_value2);controlObj.text("detail_txt_f_value3_tbl_app_news_discuss_detail",n.f_value3);controlObj.text("detail_txt_f_value4_tbl_app_news_discuss_detail",n.f_value4);controlObj.text("detail_txt_f_value5_tbl_app_news_discuss_detail",n.f_value5);controlObj.text("detail_txt_f_value6_tbl_app_news_discuss_detail",n.f_value6);controlObj.text("detail_txt_f_value7_tbl_app_news_discuss_detail",n.f_value7);controlObj.text("detail_txt_f_value8_tbl_app_news_discuss_detail",n.f_value8);controlObj.text("detail_txt_f_value9_tbl_app_news_discuss_detail",n.f_value9);controlObj.text("detail_txt_f_value10_tbl_app_news_discuss_detail",n.f_value10);controlObj.text("detail_txt_fk_tbl_app_news_sys_id_tbl_app_news_discuss_detail",n.fk_tbl_app_news_sys_id);controlObj.text("detail_txt_f_discusscontent_tbl_app_news_discuss_detail",n.f_discusscontent);controlObj.text("detail_txt_f_nodeid_tbl_app_news_discuss_detail",n.f_nodeid);controlObj.text("detail_txt_fk_t_user_id_tbl_app_news_discuss_detail",n.fk_t_user_id);controlObj.text("detail_txt_f_username_tbl_app_news_discuss_detail",n.f_username);controlObj.text("div_detail_file_f_userimg_tbl_app_news_discuss_detail",n.f_userimg);$("#detail_img_f_userimg_tbl_app_news_discuss_detail")[0].src=commonObj.getUserPhotoUrlByFileName(n.f_userimg);$("#div_add_selectuser_tbl_app_news_discuss_detail").load("../commonselectuser/commonselectuser_part.html",null,function(){commonselectuser_Obj.containerId="div_add_selectuser_tbl_app_news_discuss_detail";commonselectuser_Obj.selectUserIdsControlId="detail_txt_fk_t_user_id_tbl_app_news_discuss_detail";commonselectuser_Obj.selectUserNamesControlId="detail_txt_f_username_tbl_app_news_discuss_detail";commonselectuser_Obj.selectUserPotourlsControlId="div_detail_file_f_userimg_tbl_app_news_discuss_detail";commonselectuser_Obj.showText="用户";commonselectuser_Obj.controlType=t._pr_pagetype;commonselectuser_Obj.searchTabArray=["username","role","position","usergroup","organ"];commonselectuser_Obj.maxSelectedUser="1";commonselectuser_Obj.onChange=function(){$("#detail_img_f_userimg_tbl_app_news_discuss_detail")[0].src=commonObj.getUserPhotoUrlByFileName(controlObj.text("div_detail_file_f_userimg_tbl_app_news_discuss_detail"))};commonselectuser_Obj.init({success:function(){i.success()}})})},o=function(n){try{var t={};t.f_value1=controlObj.text("detail_txt_f_value1_tbl_app_news_discuss_detail");t.f_value2=controlObj.text("detail_txt_f_value2_tbl_app_news_discuss_detail");t.f_value3=controlObj.text("detail_txt_f_value3_tbl_app_news_discuss_detail");t.f_value4=controlObj.text("detail_txt_f_value4_tbl_app_news_discuss_detail");t.f_value5=controlObj.text("detail_txt_f_value5_tbl_app_news_discuss_detail");t.f_value6=controlObj.text("detail_txt_f_value6_tbl_app_news_discuss_detail");t.f_value7=controlObj.text("detail_txt_f_value7_tbl_app_news_discuss_detail");t.f_value8=controlObj.text("detail_txt_f_value8_tbl_app_news_discuss_detail");t.f_value9=controlObj.text("detail_txt_f_value9_tbl_app_news_discuss_detail");t.f_value10=controlObj.text("detail_txt_f_value10_tbl_app_news_discuss_detail");t.fk_tbl_app_news_sys_id=controlObj.text("detail_txt_fk_tbl_app_news_sys_id_tbl_app_news_discuss_detail");t.f_discusscontent=controlObj.text("detail_txt_f_discusscontent_tbl_app_news_discuss_detail");t.f_nodeid=controlObj.text("detail_txt_f_nodeid_tbl_app_news_discuss_detail");t.fk_t_user_id=controlObj.text("detail_txt_fk_t_user_id_tbl_app_news_discuss_detail");t.f_username=controlObj.text("detail_txt_f_username_tbl_app_news_discuss_detail");t.f_userimg=controlObj.text("div_detail_file_f_userimg_tbl_app_news_discuss_detail");n.success(t)}catch(i){_blockMessage.show("getData执行失败。<br/>"+i.message,"fail")}},s=function(n,t){try{var i=new hashMap,u=new hashMap;n.f_value1.length>100&&(i.put("detail_txt_f_value1_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value1_tbl_app_news_discuss_detail","top"));n.f_value2.length>100&&(i.put("detail_txt_f_value2_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value2_tbl_app_news_discuss_detail","top"));n.f_value3.length>100&&(i.put("detail_txt_f_value3_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value3_tbl_app_news_discuss_detail","top"));n.f_value4.length>100&&(i.put("detail_txt_f_value4_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value4_tbl_app_news_discuss_detail","top"));n.f_value5.length>100&&(i.put("detail_txt_f_value5_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value5_tbl_app_news_discuss_detail","top"));n.f_value6.length>100&&(i.put("detail_txt_f_value6_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value6_tbl_app_news_discuss_detail","top"));n.f_value7.length>100&&(i.put("detail_txt_f_value7_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value7_tbl_app_news_discuss_detail","top"));n.f_value8.length>100&&(i.put("detail_txt_f_value8_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value8_tbl_app_news_discuss_detail","top"));n.f_value9.length>100&&(i.put("detail_txt_f_value9_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value9_tbl_app_news_discuss_detail","top"));n.f_value10.length>100&&(i.put("detail_txt_f_value10_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_value10_tbl_app_news_discuss_detail","top"));n.fk_tbl_app_news_sys_id.length>100&&(i.put("detail_txt_fk_tbl_app_news_sys_id_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_fk_tbl_app_news_sys_id_tbl_app_news_discuss_detail","top"));n.f_nodeid.length>100&&(i.put("detail_txt_f_nodeid_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_nodeid_tbl_app_news_discuss_detail","top"));n.fk_t_user_id.length>100&&(i.put("detail_txt_fk_t_user_id_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_fk_t_user_id_tbl_app_news_discuss_detail","top"));n.f_username.length>100&&(i.put("detail_txt_f_username_tbl_app_news_discuss_detail",'长度不能超过<a style="color:red">100<\/a>'),u.put("detail_txt_f_username_tbl_app_news_discuss_detail","top"));n.f_username.length==0&&(i.put("detail_txt_f_username_tbl_app_news_discuss_detail","必须选中一个用户！"),u.put("detail_txt_f_username_tbl_app_news_discuss_detail","top"));i.keys().length>0?(r.show(i,u,!0),t.fail()):(r.hidden(),t.success(n))}catch(f){_blockMessage.show("checkData执行失败。<br/>"+f.message,"fail")}},h=function(n){var r=" sys_id = '"+t._pr_sys_id+"'",u={whereString:r,orderByString:"",columnsString:"f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^fk_tbl_app_news_sys_id^f_discusscontent^f_nodeid^fk_t_user_id^f_username^f_userimg^sys_id",pageSizeString:"",pageIndexString:"",clientInf:_clientInf};doAjaxFunction(i,"GetList",u,{success:function(t){var i=new Function("","return "+t)();n.success(i.rows[0])},fail:function(n){_blockMessage.show(i+"GetList<br/>"+n,"fail")}})},c=function(n,r){var u=new Date,f={sys_id:t._pr_sys_id,f_value1:n.f_value1,f_value2:n.f_value2,f_value3:n.f_value3,f_value4:n.f_value4,f_value5:n.f_value5,f_value6:n.f_value6,f_value7:n.f_value7,f_value8:n.f_value8,f_value9:n.f_value9,f_value10:n.f_value10,fk_tbl_app_news_sys_id:n.fk_tbl_app_news_sys_id,f_discusscontent:n.f_discusscontent,f_nodeid:n.f_nodeid,fk_t_user_id:n.fk_t_user_id,f_username:n.f_username,f_userimg:n.f_userimg,sys_lasteditusername:basePageObj._userInfoJson.sys_username,sys_lastedituserid:basePageObj._userInfoJson.sys_userid,sys_lasteditdate:u.Format("yyyy-MM-dd hh:mm:ss")},e={columns:"sys_id^f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^fk_tbl_app_news_sys_id^f_discusscontent^f_nodeid^sys_lastedituserid^sys_lasteditusername^sys_lasteditdate^fk_t_user_id^f_username^f_userimg",clientInf:_clientInf,json:JSON.stringify(f)};doAjaxFunction(i,"Update",e,{success:function(){r.success()},fail:function(n){r.fail(n)},error:function(n){_blockMessage.show(i+"Update<br/>"+n,"fail")}})},l=function(n){var t=_resultMessage.message();t+="<br/>";t+="评论内容"+n;_resultMessage.message(t)},t={_pr_sys_id:"",_pr_pagetype:"",init:function(i){try{f({success:function(){r=new validateMessage("btn_command_save_tbl_app_news_discuss_detail");n=Ladda.create("btn_command_save_tbl_app_news_discuss_detail");switch(t._pr_pagetype){case"1":u(!1);break;case"2":u(!0)}i.success()}})}catch(e){_blockMessage.show("程序初始化失败。<br/>"+e.message,"fail")}},bindPage:function(n){try{h({success:function(t){e(t,{success:function(){n.success()}})}})}catch(t){_blockMessage.show("bindPage执行失败。<br/>"+t.message,"fail")}},btn_command_save_onclick:function(){try{n.start();o({success:function(t){s(t,{success:function(t){c(t,{success:function(){n.stop();tbl_app_news_discuss_list_Obj.bindGrid();$("#div_content_part_tbl_app_news_discuss_detail").css("display","none");_alertMessage.show("保存成功","success",2e3)},fail:function(t){n.stop();_alertMessage.show("保存失败<br/>"+t,"fail")}})},fail:function(){n.stop();_alertMessage.show("校验未通过","warning")}})}})}catch(t){_blockMessage.show("保存程序异常。","fail")}}};return t}();