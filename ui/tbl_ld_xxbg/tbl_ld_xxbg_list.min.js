var _clientInf='{userid="",appcode="54",appname="",userip="",usermac="",username=""}',_blockMessage=null,_alertMessage=null,_resultMessage=null,_confirmMessage=null,tbl_ld_xxbg_list_Obj=function(){"use strict";var f="//127.0.0.1/sara.dd.ldsw/service/service_tbl_ld_xxbg.asmx/",e="20",b=!0,t=null,s=null,h=null,i=null,c=null,o=null,r="",k=function(t){try{n._pr_listtype=requestQuery("listtype");n._pr_appcode=requestQuery("appcode");n._pr_gridselectids=requestQuery("gridselectids");n._pr_gridpageindex=requestQuery("gridpageIndex");n._pr_searchtype=requestQuery("searchtype");n._pr_bglxid=requestQuery("bglxid");n._pr_bglx=requestQuery("bglx");n._pr_isadmin=requestQuery("isadmin");n._pr_searchcontent=requestQuery("searchcontent");_clientInf='{userid:"'+basePageObj._userInfoJson.sys_userid+'",appcode:"'+n._pr_appcode+'",appname:"",userip:"'+basePageObj._userInfoJson.ip+'",usermac:"'+basePageObj._userInfoJson.mac+'",username:"'+basePageObj._userInfoJson.sys_username+'"}';n._pr_gridpageindex=n._pr_gridpageindex==null||n._pr_gridpageindex==""||n._pr_gridpageindex=="null"?1:Number(n._pr_gridpageindex);n._pr_searchcontent=n._pr_searchcontent==null||n._pr_searchcontent==""||n._pr_searchcontent=="null"?{}:new Function("","return "+n._pr_searchcontent)();(n._pr_isadmin==null||n._pr_isadmin==""||n._pr_isadmin=="null")&&(n._pr_isadmin="0");(n._pr_searchtype==null||n._pr_searchtype==""||n._pr_searchtype=="null")&&(n._pr_searchtype="1");(n._pr_bglxid==null||n._pr_bglxid==""||n._pr_bglxid=="null")&&(n._pr_bglxid="0");switch(n._pr_searchtype){case"1":$("#btn_command_search_tbl_ld_xxbg_list").html("简单查询");$("#txt_command_search_tbl_ld_xxbg_list").removeAttr("disabled");break;case"2":$("#btn_command_search_tbl_ld_xxbg_list").html("高级查询");$("#txt_command_search_tbl_ld_xxbg_list").attr("disabled",!0)}n._pr_listtype==null||n._pr_listtype==""||n._pr_listtype=="null"?_blockMessage.show("listtype参数接收失败...","fail"):t.success()}catch(i){_blockMessage.show("initParameter执行失败<br/>"+i.message,"fail")}},v=function(n){try{n?($("#btn_command_delete_tbl_ld_xxbg_list").addClass("hidden"),$("#btn_command_new_tbl_ld_xxbg_list").addClass("hidden")):($("#btn_command_delete_tbl_ld_xxbg_list").removeClass("hidden"),$("#btn_command_new_tbl_ld_xxbg_list").removeClass("hidden"))}catch(t){_blockMessage.show("setDisable执行失败<br/>"+t.message,"fail")}},l=function(t,i){var r="../tbl_ld_xxbg/tbl_ld_xxbg_detail.html";r+="?uid="+basePageObj._userInfoJson.sys_userid;r+="&sys_id="+t;r+="&pagetype="+i;r+="&appcode="+n._pr_appcode;r+="&bglxid="+n._pr_bglxid+"";r+="&bglx="+n._pr_bglx+"";r+="&isadmin="+n._pr_isadmin+"";r+="&fromurl=../tbl_ld_xxbg/tbl_ld_xxbg_list.html";r+="&fromurlparam={";r+='"bglxid":"'+n._pr_bglxid+'",';r+='"bglx":"'+n._pr_bglx+'",';r+='"isadmin":"'+n._pr_isadmin+'",';r+='"appcode":"'+n._pr_appcode+'",';r+='"listtype":"'+n._pr_listtype+'",';r+='"gridselectids":"'+n._pr_gridselectids+'",';r+='"gridpageindex":"'+n._pr_gridpageindex+'",';r+='"searchtype":"'+n._pr_searchtype+'",';r+='"searchcontent":'+JSON.stringify(n._pr_searchcontent)+"";r+="}";commonObj.changeUrl(r,"right-show")},d=function(n){var i="";i+="0470^";i+="0472^";i+="0471^";i=i.trimEnd("^");commonObj.getCodeServiceJson(i,{success:function(i){try{t=new hashMap;t.put("codeservice_0470",i["0470"]);t.put("codeservice_0472",i["0472"]);t.put("codeservice_0471",i["0471"]);t.put("codeservice_0814",[{id:"f_bgyy",text:"变更原因"},{id:"f_fqr",text:"发起人"},{id:"f_fqsj",text:"发起时间"},{id:"f_xgr",text:"修改人"},{id:"f_xgsj",text:"修改时间"},{id:"f_zt",text:"状态"},{id:"f_ly",text:"来源"},{id:"f_bz",text:"备注"},{id:"f_khbh",text:"客户编号"},]);n.success()}catch(r){_blockMessage.show("initBaseCode执行失败。<br/>"+r.message,"fail")}}})},g=function(n){try{var i=t.get("codeservice_0470"),r=t.get("codeservice_0472"),u=t.get("codeservice_0471");controlObj.datetimeinit("search_f_fqsj_tbl_ld_xxbg_list_datefrom","search_f_fqsj_tbl_ld_xxbg_list_timefrom");controlObj.datetimeinit("search_f_fqsj_tbl_ld_xxbg_list_dateto","search_f_fqsj_tbl_ld_xxbg_list_timeto");controlObj.datetime("search_f_fqsj_tbl_ld_xxbg_list_datefrom","search_f_fqsj_tbl_ld_xxbg_list_timefrom","1900-01-01 00:00:00");controlObj.datetime("search_f_fqsj_tbl_ld_xxbg_list_dateto","search_f_fqsj_tbl_ld_xxbg_list_timeto","1900-01-01 00:00:00");controlObj.multidropdownlistinit("search_f_bglx_tbl_ld_xxbg_list",i);controlObj.multidropdownlistinit("search_f_ly_tbl_ld_xxbg_list",r);controlObj.multidropdownlistinit("search_f_zt_tbl_ld_xxbg_list",u);controlObj.datetimeinit("search_f_xgsj_tbl_ld_xxbg_list_datefrom","search_f_xgsj_tbl_ld_xxbg_list_timefrom");controlObj.datetimeinit("search_f_xgsj_tbl_ld_xxbg_list_dateto","search_f_xgsj_tbl_ld_xxbg_list_timeto");controlObj.datetime("search_f_xgsj_tbl_ld_xxbg_list_datefrom","search_f_xgsj_tbl_ld_xxbg_list_timefrom","1900-01-01 00:00:00");controlObj.datetime("search_f_xgsj_tbl_ld_xxbg_list_dateto","search_f_xgsj_tbl_ld_xxbg_list_timeto","1900-01-01 00:00:00");controlObj.multidropdownlistdisable("search_f_bglx_tbl_ld_xxbg_list",!0);controlObj.multidropdownlistdisable("search_f_ly_tbl_ld_xxbg_list",!0);$("#div_search_modal_tbl_ld_xxbg_list").modal({keyboard:!1,backdrop:"static",show:!1});n.success()}catch(f){_blockMessage.show("initSearchControl执行失败。<br/>"+f.message,"fail")}},nt=function(t){try{switch(n._pr_searchtype){case"1":n._pr_searchcontent.type1!=undefined&&$("#txt_command_search_tbl_ld_xxbg_list").val(n._pr_searchcontent.type1);break;case"2":if(n._pr_searchcontent.type2!=undefined){var i=n._pr_searchcontent.type2;controlObj.text("search_f_value1_tbl_ld_xxbg_list",i.f_value1);controlObj.text("search_f_value2_tbl_ld_xxbg_list",i.f_value2);controlObj.text("search_f_value3_tbl_ld_xxbg_list",i.f_value3);controlObj.text("search_f_value4_tbl_ld_xxbg_list",i.f_value4);controlObj.text("search_f_value5_tbl_ld_xxbg_list",i.f_value5);controlObj.text("search_f_value6_tbl_ld_xxbg_list",i.f_value6);controlObj.text("search_f_value7_tbl_ld_xxbg_list",i.f_value7);controlObj.text("search_f_value8_tbl_ld_xxbg_list",i.f_value8);controlObj.text("search_f_value9_tbl_ld_xxbg_list",i.f_value9);controlObj.text("search_f_value10_tbl_ld_xxbg_list",i.f_value10);controlObj.text("search_f_khbh_tbl_ld_xxbg_list",i.f_khbh);controlObj.text("search_f_fqr_tbl_ld_xxbg_list",i.f_fqr);controlObj.text("search_f_fqrid_tbl_ld_xxbg_list",i.f_fqrid);controlObj.datetime("search_f_fqsj_tbl_ld_xxbg_list_datefrom","search_f_fqsj_tbl_ld_xxbg_list_timefrom",i.f_fqsjfrom);controlObj.datetime("search_f_fqsj_tbl_ld_xxbg_list_dateto","search_f_fqsj_tbl_ld_xxbg_list_timeto",i.f_fqsjto);controlObj.multidropdownlistid("search_f_bglx_tbl_ld_xxbg_list",i.f_bglxid);controlObj.text("search_f_bgyy_tbl_ld_xxbg_list",i.f_bgyy);controlObj.multidropdownlistid("search_f_ly_tbl_ld_xxbg_list",i.f_lyid);controlObj.multidropdownlistid("search_f_zt_tbl_ld_xxbg_list",i.f_ztid);controlObj.text("search_fk_tbl_maintable_sys_id_tbl_ld_xxbg_list",i.fk_tbl_maintable_sys_id);controlObj.text("search_f_bz_tbl_ld_xxbg_list",i.f_bz);controlObj.text("search_f_xgr_tbl_ld_xxbg_list",i.f_xgr);controlObj.text("search_f_xgrid_tbl_ld_xxbg_list",i.f_xgrid);controlObj.datetime("search_f_xgsj_tbl_ld_xxbg_list_datefrom","search_f_xgsj_tbl_ld_xxbg_list_timefrom",i.f_xgsjfrom);controlObj.datetime("search_f_xgsj_tbl_ld_xxbg_list_dateto","search_f_xgsj_tbl_ld_xxbg_list_timeto",i.f_xgsjto);controlObj.text("search_f_bgmc_tbl_ld_xxbg_list",i.f_bgmc)}}t.success()}catch(r){_blockMessage.show("setSearchModel执行失败<br/>"+r.message,"fail")}},y=function(t){try{switch(n._pr_searchtype){case"1":n._pr_searchcontent.type1=$("#txt_command_search_tbl_ld_xxbg_list").val();break;case"2":var i={};i.f_value1=controlObj.text("search_f_value1_tbl_ld_xxbg_list");i.f_value2=controlObj.text("search_f_value2_tbl_ld_xxbg_list");i.f_value3=controlObj.text("search_f_value3_tbl_ld_xxbg_list");i.f_value4=controlObj.text("search_f_value4_tbl_ld_xxbg_list");i.f_value5=controlObj.text("search_f_value5_tbl_ld_xxbg_list");i.f_value6=controlObj.text("search_f_value6_tbl_ld_xxbg_list");i.f_value7=controlObj.text("search_f_value7_tbl_ld_xxbg_list");i.f_value8=controlObj.text("search_f_value8_tbl_ld_xxbg_list");i.f_value9=controlObj.text("search_f_value9_tbl_ld_xxbg_list");i.f_value10=controlObj.text("search_f_value10_tbl_ld_xxbg_list");i.f_khbh=controlObj.text("search_f_khbh_tbl_ld_xxbg_list");i.f_fqr=controlObj.text("search_f_fqr_tbl_ld_xxbg_list");i.f_fqrid=controlObj.text("search_f_fqrid_tbl_ld_xxbg_list");i.f_fqsjfrom=controlObj.datetime("search_f_fqsj_tbl_ld_xxbg_list_datefrom","search_f_fqsj_tbl_ld_xxbg_list_timefrom");i.f_fqsjto=controlObj.datetime("search_f_fqsj_tbl_ld_xxbg_list_dateto","search_f_fqsj_tbl_ld_xxbg_list_timeto");i.f_bglxid=controlObj.multidropdownlistid("search_f_bglx_tbl_ld_xxbg_list");i.f_bgyy=controlObj.text("search_f_bgyy_tbl_ld_xxbg_list");i.f_lyid=controlObj.multidropdownlistid("search_f_ly_tbl_ld_xxbg_list");i.f_ztid=controlObj.multidropdownlistid("search_f_zt_tbl_ld_xxbg_list");i.fk_tbl_maintable_sys_id=controlObj.text("search_fk_tbl_maintable_sys_id_tbl_ld_xxbg_list");i.f_bz=controlObj.text("search_f_bz_tbl_ld_xxbg_list");i.f_xgr=controlObj.text("search_f_xgr_tbl_ld_xxbg_list");i.f_xgrid=controlObj.text("search_f_xgrid_tbl_ld_xxbg_list");i.f_xgsjfrom=controlObj.datetime("search_f_xgsj_tbl_ld_xxbg_list_datefrom","search_f_xgsj_tbl_ld_xxbg_list_timefrom");i.f_xgsjto=controlObj.datetime("search_f_xgsj_tbl_ld_xxbg_list_dateto","search_f_xgsj_tbl_ld_xxbg_list_timeto");i.f_bgmc=controlObj.text("search_f_bgmc_tbl_ld_xxbg_list");n._pr_searchcontent.type2=i}t.success()}catch(r){t.fail(r.message)}},tt=function(t){try{var r=n._pr_searchcontent.type2,i=new hashMap,u=new hashMap;r.f_value1.length>200&&i.put("search_f_value1_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value2.length>200&&i.put("search_f_value2_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value3.length>200&&i.put("search_f_value3_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value4.length>200&&i.put("search_f_value4_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value5.length>200&&i.put("search_f_value5_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value6.length>200&&i.put("search_f_value6_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value7.length>200&&i.put("search_f_value7_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value8.length>200&&i.put("search_f_value8_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value9.length>200&&i.put("search_f_value9_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_value10.length>200&&i.put("search_f_value10_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_fqr.length>200&&i.put("search_f_fqr_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_fqrid.length>200&&i.put("search_f_fqrid_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_bglxid.length>200&&i.put("search_f_bglx_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_bgyy.length>200&&i.put("search_f_bgyy_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_lyid.length>200&&i.put("search_f_ly_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_ztid.length>200&&i.put("search_f_zt_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.fk_tbl_maintable_sys_id.length>200&&i.put("search_fk_tbl_maintable_sys_id_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_bz.length>200&&i.put("search_f_bz_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_xgr.length>200&&i.put("search_f_xgr_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_xgrid.length>200&&i.put("search_f_xgrid_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');r.f_bgmc.length>200&&i.put("search_f_bgmc_tbl_ld_xxbg_list",'长度不能超过<a style="color:red">200<\/a>个字');i.keys().length>0?(s.show(i,u,!1),t.fail("")):(s.hidden(),t.success())}catch(f){t.fail(f.message)}},p=function(){switch(n._pr_searchtype){case"1":n._pr_searchcontent.type2==undefined&&(n._pr_searchcontent.type2={});n._pr_searchcontent.type2.f_value1="";controlObj.text("search_f_value1_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value1);n._pr_searchcontent.type2.f_value2="";controlObj.text("search_f_value2_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value2);n._pr_searchcontent.type2.f_value3="";controlObj.text("search_f_value3_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value3);n._pr_searchcontent.type2.f_value4="";controlObj.text("search_f_value4_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value4);n._pr_searchcontent.type2.f_value5="";controlObj.text("search_f_value5_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value5);n._pr_searchcontent.type2.f_value6="";controlObj.text("search_f_value6_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value6);n._pr_searchcontent.type2.f_value7="";controlObj.text("search_f_value7_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value7);n._pr_searchcontent.type2.f_value8="";controlObj.text("search_f_value8_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value8);n._pr_searchcontent.type2.f_value9="";controlObj.text("search_f_value9_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value9);n._pr_searchcontent.type2.f_value10="";controlObj.text("search_f_value10_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_value10);n._pr_searchcontent.type2.f_khbh="";controlObj.text("search_f_khbh_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_khbh);n._pr_searchcontent.type2.f_fqr="";controlObj.text("search_f_fqr_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_fqr);n._pr_searchcontent.type2.f_fqrid="";controlObj.text("search_f_fqrid_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_fqrid);n._pr_searchcontent.type2.f_fqsjfrom="1900-01-01 00:00:00";n._pr_searchcontent.type2.f_fqsjto="1900-01-01 00:00:00";controlObj.datetime("search_f_fqsj_tbl_ld_xxbg_list_datefrom","search_f_fqsj_tbl_ld_xxbg_list_timefrom",n._pr_searchcontent.type2.f_fqsjfrom);controlObj.datetime("search_f_fqsj_tbl_ld_xxbg_list_dateto","search_f_fqsj_tbl_ld_xxbg_list_timeto",n._pr_searchcontent.type2.f_fqsjto);n._pr_searchcontent.type2.f_bglxid="";controlObj.multidropdownlistid("search_f_bglx_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_bglxid);n._pr_searchcontent.type2.f_bgyy="";controlObj.text("search_f_bgyy_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_bgyy);n._pr_searchcontent.type2.f_lyid="";controlObj.multidropdownlistid("search_f_ly_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_lyid);n._pr_searchcontent.type2.f_ztid="";controlObj.multidropdownlistid("search_f_zt_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_ztid);n._pr_searchcontent.type2.fk_tbl_maintable_sys_id="";controlObj.text("search_fk_tbl_maintable_sys_id_tbl_ld_xxbg_list",n._pr_searchcontent.type2.fk_tbl_maintable_sys_id);n._pr_searchcontent.type2.f_bz="";controlObj.text("search_f_bz_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_bz);n._pr_searchcontent.type2.f_xgr="";controlObj.text("search_f_xgr_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_xgr);n._pr_searchcontent.type2.f_xgrid="";controlObj.text("search_f_xgrid_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_xgrid);n._pr_searchcontent.type2.f_xgsjfrom="1900-01-01 00:00:00";n._pr_searchcontent.type2.f_xgsjto="1900-01-01 00:00:00";controlObj.datetime("search_f_xgsj_tbl_ld_xxbg_list_datefrom","search_f_xgsj_tbl_ld_xxbg_list_timefrom",n._pr_searchcontent.type2.f_xgsjfrom);controlObj.datetime("search_f_xgsj_tbl_ld_xxbg_list_dateto","search_f_xgsj_tbl_ld_xxbg_list_timeto",n._pr_searchcontent.type2.f_xgsjto);n._pr_searchcontent.type2.f_bgmc="";controlObj.text("search_f_bgmc_tbl_ld_xxbg_list",n._pr_searchcontent.type2.f_bgmc);break;case"2":n._pr_searchcontent.type1==undefined&&(n._pr_searchcontent.type1="");$("#txt_command_search_tbl_ld_xxbg_list").val("")}},a=function(t){var i="",f,e,u,o;switch(n._pr_searchtype){case"1":if(n._pr_searchcontent.type1!=undefined){if(f=n._pr_searchcontent.type1.split(" "),f.length>0){for(e=0;e<f.length;e++)f[e]!=""&&(i+="(",i+=" f_fqr like '%"+f[e]+"%' or ",i+=" f_khbh like '%"+f[e]+"%' or ",i+=" f_fqrid like '%"+f[e]+"%' or ",i+=" to_char(f_fqsj,'yyyy-MM-dd hh24:mi:ss') like '%"+f[e]+"%' or ",i+=" f_bglx like '%"+f[e]+"%' or ",i+=" f_bgyy like '%"+f[e]+"%' or ",i+=" f_ly like '%"+f[e]+"%' or ",i+=" f_zt like '%"+f[e]+"%' or ",i+=" fk_tbl_maintable_sys_id like '%"+f[e]+"%' or ",i+=" f_bz like '%"+f[e]+"%' or ",i+=" f_xgr like '%"+f[e]+"%' or ",i+=" f_xgrid like '%"+f[e]+"%' or ",i+=" to_char(f_xgsj,'yyyy-MM-dd hh24:mi:ss') like '%"+f[e]+"%' or ",i+=" f_bgmc like '%"+f[e]+"%' or ",i.length>0&&(i=i.substr(0,i.length-3)),i+=") and ");i.length>0&&(i=i.substr(0,i.length-4))}r=i}t.success();break;case"2":n._pr_searchcontent.type2!=undefined&&(u=n._pr_searchcontent.type2,u.f_fqr.length>0&&(i+=" f_fqr like '%"+u.f_fqr+"%' and "),u.f_fqrid.length>0&&(i+=" f_fqrid like '%"+u.f_fqrid+"%' and "),u.f_fqsjfrom!="1900-01-01 00:00:00"&&(i+=" f_fqsj >= to_date('"+u.f_fqsjfrom+"','yyyy-MM-dd hh24:mi:ss') and "),u.f_fqsjto!="1900-01-01 00:00:00"&&(i+=" f_fqsj <= to_date('"+u.f_fqsjto+"','yyyy-MM-dd hh24:mi:ss') and "),u.f_bglxid.length>0&&(o=u.f_bglxid.split(","),i+="(",$.each(o,function(n){i+=n==0?" ":" or ";i+="((','||f_bglxid||',') like ('%,'||'"+o[n]+"'||',%')) "}),i+=") and "),u.f_bgyy.length>0&&(i+=" f_bgyy like '%"+u.f_bgyy+"%' and "),u.f_lyid.length>0&&(o=u.f_lyid.split(","),i+="(",$.each(o,function(n){i+=n==0?" ":" or ";i+="((','||f_lyid||',') like ('%,'||'"+o[n]+"'||',%')) "}),i+=") and "),u.f_ztid.length>0&&(o=u.f_ztid.split(","),i+="(",$.each(o,function(n){i+=n==0?" ":" or ";i+="((','||f_ztid||',') like ('%,'||'"+o[n]+"'||',%')) "}),i+=") and "),u.fk_tbl_maintable_sys_id.length>0&&(i+=" fk_tbl_maintable_sys_id like '%"+u.fk_tbl_maintable_sys_id+"%' and "),u.f_bz.length>0&&(i+=" f_bz like '%"+u.f_bz+"%' and "),u.f_xgr.length>0&&(i+=" f_xgr like '%"+u.f_xgr+"%' and "),u.f_xgrid.length>0&&(i+=" f_xgrid like '%"+u.f_xgrid+"%' and "),u.f_xgsjfrom!="1900-01-01 00:00:00"&&(i+=" f_xgsj >= to_date('"+u.f_xgsjfrom+"','yyyy-MM-dd hh24:mi:ss') and "),u.f_xgsjto!="1900-01-01 00:00:00"&&(i+=" f_xgsj <= to_date('"+u.f_xgsjto+"','yyyy-MM-dd hh24:mi:ss') and "),u.f_bgmc.length>0&&(i+=" f_bgmc like '%"+u.f_bgmc+"%' and "),i.length>0&&(i=i.substr(0,i.length-4)));r=i;t.success()}},u=function(){if(n._pr_gridselectids=="")$("#btn_command_clearselect_tbl_ld_xxbg_list").addClass("hidden");else{$("#btn_command_clearselect_tbl_ld_xxbg_list").removeClass("hidden");var t=n._pr_gridselectids.split("^").length,i=$("#table_grid_tbl_ld_xxbg_list").bootstrapTable("getSelections").length;$("#btn_command_clearselect_tbl_ld_xxbg_list .cc-badge-p").html(i+"/"+t)}},w=function(t){var f,r,s,h,i,o;try{f=[{field:"_checkbox",checkbox:!0,formatter:function(t,i){switch(n._pr_listtype){case"1":return i.f_ztid=="1"?{disabled:!0}:{disabled:!1,checked:!1};case"2":return("^"+n._pr_gridselectids+"^").indexOf("^"+i.sys_id+"^")>-1?{disabled:!0,checked:!0}:{disabled:!0}}}},{field:"sys_id",title:"sys_id","class":"gridcell-ordercolumn hidden",align:"center",valign:"middle",visible:!0,sortable:!1},];r=new hashMap;r.put("f_khbh",{field:"f_khbh",title:"客户编号","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}});r.put("f_bgmc",{field:"f_bgmc",title:"变更名称","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}});r.put("f_bglx",{field:"f_bglx",title:"变更类型","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}});r.put("f_fqr",{field:"f_fqr",title:"发起人","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}});r.put("f_fqrid",{field:"f_fqrid",title:"发起人id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}});r.put("f_fqsj",{field:"f_fqsj",title:"发起时间","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){n==""&&(n="1900-01-01 00:00:00");var t=n.toDateTime().Format("yyyy-MM-dd hh:mm:ss");return t=="1900-01-01 00:00:00"&&(t="&nbsp;&nbsp;"),t}});r.put("f_bglxid",{field:"f_bglxid",title:"变更类型id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}});r.put("fk_tbl_maintable_sys_id",{field:"fk_tbl_maintable_sys_id",title:"maintable外键","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}});r.put("f_xgr",{field:"f_xgr",title:"修改人","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}});r.put("f_xgrid",{field:"f_xgrid",title:"修改人id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}});r.put("f_xgsj",{field:"f_xgsj",title:"修改时间","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){n==""&&(n="1900-01-01 00:00:00");var t=n.toDateTime().Format("yyyy-MM-dd hh:mm:ss");return t=="1900-01-01 00:00:00"&&(t="&nbsp;&nbsp;"),t}});r.put("f_bgyy",{field:"f_bgyy",title:"变更原因","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}});r.put("f_ly",{field:"f_ly",title:"来源","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}});r.put("f_lyid",{field:"f_lyid",title:"来源id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}});r.put("f_zt",{field:"f_zt",title:"状态","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}});r.put("f_ztid",{field:"f_ztid",title:"状态id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}});r.put("f_bz",{field:"f_bz",title:"备注","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}});s=getCookie("tbl_ld_xxbg_list_column");s!=null&&s!="undefined"&&s!=""?(h=s.split(","),$.each(h,function(n,t){var i=r.get(t.toLowerCase());i!=undefined&&(i.class="",f.push(i))})):(i=r.get("f_khbh"),i["class"]="",f.push(i),i=r.get("f_bgmc"),i["class"]="",f.push(i),i=r.get("f_bglx"),i["class"]="",f.push(i),i=r.get("f_fqr"),i["class"]="",f.push(i),i=r.get("f_fqsj"),i["class"]="",f.push(i),i=r.get("f_xgr"),i["class"]="",f.push(i),i=r.get("f_xgsj"),i["class"]="",f.push(i),i=r.get("f_bgyy"),i["class"]="",f.push(i),i=r.get("f_ly"),i["class"]="",f.push(i),i=r.get("f_zt"),i["class"]="",f.push(i),i=r.get("f_bz"),i["class"]="",f.push(i));f.push({field:"",title:"操作",align:"center",valign:"middle",sortable:!1,clickToSelect:!1,formatter:function(t,i){switch(n._pr_listtype){case"1":return i.f_ztid=="1"?'<a class="view ml10" href="javascript:void(0)" title="浏览"><i class="glyphicon glyphicon-eye-open"><\/i><\/a>':'<a class="edit ml10" href="javascript:void(0)" title="编辑"><i class="glyphicon glyphicon-edit"><\/i><\/a>';case"2":return'<a class="view ml10" href="javascript:void(0)" title="浏览"><i class="glyphicon glyphicon-eye-open"><\/i><\/a>'}},events:{"click .view":function(n,t,i){l(i.sys_id,"2")},"click .edit":function(n,t,i){l(i.sys_id,"1")}}});o=0;$(window).width()<basePageObj._limSrceenWidth?(o=$(window).height()-320,o<950&&(o=950)):o=$(window).height()-240;$("#table_grid_tbl_ld_xxbg_list").bootstrapTable({cache:!1,height:o,striped:!0,pagination:b,pageSize:e,pageList:[e],pageNumber:n._pr_gridpageindex,search:!1,showColumns:!1,showRefresh:!1,clickToSelect:!0,idField:"sys_id",sidePagination:"webserver",columns:f,onPageChange:function(t,i){n._pr_gridpageindex=i;n.bindGrid()},rowStyle:function(){return{}},onLoadSuccess:function(){},onCheck:function(t){n._pr_gridselectids+="^"+t.sys_id;n._pr_gridselectids=n._pr_gridselectids.trimStartEnd("^");u()},onUncheck:function(t){n._pr_gridselectids=("^"+n._pr_gridselectids+"^").replaceAll("^"+t.sys_id+"^","^");n._pr_gridselectids=n._pr_gridselectids.trimStartEnd("^");u()},onCheckAll:function(){var t=$("#table_grid_tbl_ld_xxbg_list").bootstrapTable("getSelections");$.each(t,function(i){("^"+n._pr_gridselectids+"^").indexOf("^"+t[i].sys_id+"^")>-1||(n._pr_gridselectids+="^"+t[i].sys_id)});n._pr_gridselectids=n._pr_gridselectids.trimStartEnd("^");u()},onUncheckAll:function(){var t=$("#table_grid_tbl_ld_xxbg_list").bootstrapTable("getData");$.each(t,function(i){("^"+n._pr_gridselectids+"^").indexOf("^"+t[i].sys_id+"^")>-1&&(n._pr_gridselectids=("^"+n._pr_gridselectids+"^").replaceAll("^"+t[i].sys_id+"^","^"))});n._pr_gridselectids=n._pr_gridselectids.trimStartEnd("^");u()}});t.success()}catch(c){_blockMessage.show("initGrid执行失败<br/>"+c.message,"fail")}},it=function(i){var h=t.get("codeservice_0470"),e="",r,u,o,s;$.each(h,function(t,i){i.id==n._pr_bglxid&&(e=i.text)});n._pr_bglx=e;r=new Date;u="";switch(n._pr_isadmin){case"0":u="04720002";break;case"1":u="04720001"}o={f_value1:"",f_value2:"",f_value3:"",f_value4:"",f_value5:"",f_value6:"",f_value7:"",f_value8:"",f_value9:"",f_value10:"",f_bgmc:"新建_"+basePageObj._userInfoJson.sys_username+"_"+e+"_"+r.Format("yyyyMMddhhmmss"),f_bglxid:n._pr_bglxid,fk_tbl_maintable_sys_id:"",f_bgyy:"",f_bgyj:controlObj.fileuploadernewfileid(),f_fqr:basePageObj._userInfoJson.sys_username,f_fqrid:basePageObj._userInfoJson.sys_userid,f_fqsj:r.Format("yyyy-MM-dd hh:mm:ss"),f_xgr:"",f_xgrid:"",f_xgsj:"1900-01-01 00:00:00",f_ztid:"0",f_zt:"新建",f_lyid:u,f_bz:"",sys_delflag:"0",sys_lasteditusername:basePageObj._userInfoJson.sys_username,sys_lastedituserid:basePageObj._userInfoJson.sys_userid,sys_lasteditdate:r.Format("yyyy-MM-dd hh:mm:ss"),sys_creatdate:r.Format("yyyy-MM-dd hh:mm:ss"),sys_creatusername:basePageObj._userInfoJson.sys_username,sys_creatuserid:basePageObj._userInfoJson.sys_userid};s={json:JSON.stringify(o),clientInf:_clientInf};doAjaxFunction(f,"Add",s,{success:function(n){i.success(n)},fail:function(n){i.fail("Add:"+n)}})},rt=function(n){try{var i=t.get("codeservice_0814");controlObj.multidropdownlistinit("model_dropdown_f_checklist_tbl_ld_xxbg_showcolumnlist",i,null);$("#div_modal_tbl_ld_xxbg_sortlist").modal({keyboard:!1,backdrop:"static",show:!1});n.success()}catch(r){_blockMessage.show("initDetailControlShowColumn执行失败。<br/>"+r.message,"fail")}},ut=function(){},n={_pr_appcode:"",_pr_listtype:"",_pr_gridselectids:"",_pr_gridpageindex:1,_pr_searchtype:"1",_pr_searchcontent:null,_pr_bglxid:"",_pr_bglx:"",_pr_isadmin:"",init:function(){try{_alertMessage=new alertMessage;_resultMessage=new resultMessage;_confirmMessage=new confirmMessage;_blockMessage=new blockMessage;_blockMessage.show("程序加载中...","loading");basePageObj.initBasePage({success:function(){k({success:function(){a({success:function(){w({success:function(){n.bindGrid({success:function(){s=new validateMessage("btn_search_modal_search_tbl_ld_xxbg_list");h=Ladda.create("btn_command_new_tbl_ld_xxbg_list");i=Ladda.create("btn_command_delete_tbl_ld_xxbg_list");c=Ladda.create("btn_command_showcolunm_tbl_ld_xxbg_list");o=Ladda.create("btn_command_report_tbl_ld_xxbg_list");switch(n._pr_listtype){case"1":v(!1);break;case"2":v(!0)}_blockMessage.hidden()},fail:function(n){_blockMessage.show("bindGrid执行失败<br/>"+n,"fail")}})}})}});d({success:function(){g({success:function(){nt({success:function(){rt({success:function(){}})}})}})}})}})},fail:function(n){_blockMessage.show(n,"fail")}})}catch(t){_blockMessage.show("程序初始化失败。<br/>"+t.message,"fail")}},bindGrid:function(t){setTimeout(function(){var i=r;i==""&&(i+=" 1 = 1 ");i+=" and  f_bglxid  = '"+n._pr_bglxid+"'";("^"+basePageObj._userInfoJson.sys_roles+"^").indexOf("^2022^")<=-1&&(i+=" and sys_creatuserid = '"+basePageObj._userInfoJson.sys_userid+"'");var o={whereString:i,orderByString:" sys_id desc",columnsString:"f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^f_khbh^f_fqr^f_fqrid^f_fqsj^f_bglx^f_bglxid^f_bgyj^f_bgyy^f_ly^f_lyid^f_zt^f_ztid^fk_tbl_maintable_sys_id^f_bz^f_khxx^f_khjson^f_khbh^f_khbhid^f_xgr^f_xgrid^f_xgsj^f_bgmc^sys_id",pageSizeString:e,pageIndexString:n._pr_gridpageindex,clientInf:_clientInf};doAjaxFunction(f,"GetList",o,{success:function(n){var i=new Function("","return "+n)();$("#table_grid_tbl_ld_xxbg_list").bootstrapTable("loadJson",i);u();t!=undefined&&t!=null&&t.success()},fail:function(n){t!=undefined&&t!=null&&t.fail(n)}})},0)},btn_command_new_onclick:function(){h.start();it({success:function(n){h.stop();l(n,"1")},fail:function(n){h.stop();_alertMessage.show("addDetailData执行失败","fail");_resultMessage.show(n)}})},btn_command_delete_onclick:function(){var u=n._pr_gridselectids.split("^").length;if(n._pr_gridselectids=="")_alertMessage.show("至少选择一条数据!","warning",1e3);else{var o=$("#table_grid_tbl_ld_xxbg_list").bootstrapTable("getSelections").length,s=u-o,t="<blockquote> ";t+='<h3>将对被选中的全部数据<a style="color:red">'+u+'<\/a>条进行<a style="color:red">删除<\/a><\/h3>';t+="其中<br/>";t+='<h5><a style="color:red">当前页<\/a>的数据<a style="color:red">'+o+"<\/a>条<\/h5>";t+='<h5><a style="color:red">其他页<\/a>的数据<a style="color:red">'+s+"<\/a>条<\/h5>";t+="<\/blockquote> ";_confirmMessage.destory();_confirmMessage.show("删除确认？",t,{confirm:function(){i.start();var t="sys_id in ('"+n._pr_gridselectids.toString().replaceAll("^","','")+"')",u={clientInf:_clientInf,whereString:t};doAjaxFunction(f,"Delete",u,{success:function(){var t={clientInf:_clientInf,whereString:r};doAjaxFunction(f,"GetCount",t,{success:function(t){var r=parseInt(t);r<n._pr_gridpageindex*e&&(n._pr_gridpageindex=Math.ceil(r/e));n._pr_gridpageindex==0&&(n._pr_gridpageindex=1);n._pr_gridselectids="";n.bindGrid({success:function(){i.stop()},fail:function(n){_alertMessage.show("数据删除完成，绑定数据失败","fail");i.stop();_resultMessage.show(n)}})},fail:function(n){_alertMessage.show("数据删除完成，获取数据条数失败","fail");i.stop();_resultMessage.show(n)}})},fail:function(n){_alertMessage.show("数据删除失败","fail");i.stop();_resultMessage.show(n)}})},cancle:function(){}})}},btn_command_clearselect_onclick:function(){$("#table_grid_tbl_ld_xxbg_list").bootstrapTable("uncheckAll");n._pr_gridselectids="";u()},btn_command_search_onclick:function(){try{switch(n._pr_searchtype){case"1":y({success:function(){a({success:function(){p();n._pr_gridpageindex="1";n._pr_gridselectids="";n.bindGrid()}})},fail:function(n){_alertMessage.show("获取数据失败","fail");_resultMessage.show(n)}});break;case"2":n.btn_command_search_2_onclick()}}catch(t){_alertMessage.show("查询失败","fail");_resultMessage.show(t.message)}},btn_command_search_1_onclick:function(){n._pr_searchtype="1";$("#btn_command_search_tbl_ld_xxbg_list").html("简单查询");$("#txt_command_search_tbl_ld_xxbg_list").removeAttr("disabled")},btn_command_search_2_onclick:function(){n._pr_searchtype="2";controlObj.multidropdownlistid("search_f_bglx_tbl_ld_xxbg_list",n._pr_bglxid);n._pr_isadmin=="0"?controlObj.multidropdownlistid("search_f_ly_tbl_ld_xxbg_list","04720002"):n._pr_isadmin=="1"&&controlObj.multidropdownlistid("search_f_ly_tbl_ld_xxbg_list","04720001");$("#btn_command_search_tbl_ld_xxbg_list").html("高级查询");$("#txt_command_search_tbl_ld_xxbg_list").attr("disabled","disabled");$("#div_search_modal_tbl_ld_xxbg_list").modal("show")},btn_search_modal_search_onclick:function(){y({success:function(){tt({success:function(){a({success:function(){p();$("#div_search_modal_tbl_ld_xxbg_list").modal("hide");n._pr_gridpageindex="1";n._pr_gridselectids="";n.bindGrid()}})},fail:function(n){n==""?_alertMessage.show("校验不通过","warning"):(_alertMessage.show("校验失败","fail"),_resultMessage.show(n))}})},fail:function(n){_alertMessage.show("获取数据失败","fail");_resultMessage.show(n)}})},btn_search_modal_cancle_onclick:function(){s.hidden();$("#div_search_modal_tbl_ld_xxbg_list").modal("hide");n._pr_searchtype="1";$("#btn_command_search_tbl_ld_xxbg_list").html("简单查询");$("#txt_command_search_tbl_ld_xxbg_list").removeAttr("disabled")},btn_command_search_xs_onclick:function(){n._pr_searchtype="2";$("#btn_command_search_tbl_ld_xxbg_list").html("高级查询");$("#txt_command_search_tbl_ld_xxbg_list").attr("disabled","disabled");$("#div_search_modal_tbl_ld_xxbg_list").modal("show")},btn_command_report_onclick:function(){var n,t,e,i,u,s,h;o.start();n=getCookie("tbl_ld_xxbg_list_column");t=getCookie("tbl_ld_xxbg_list_columnname");e=r==""?" 1=1":r;n!=null&&t!=null&&n!=""&&t!=""?(i=n,u=t):(i="f_bgyy,f_fqr,f_fqsj,f_xgr,f_xgsj,f_zt,f_ly,f_bz,f_khbh",u="变更原因,发起人,发起时间,修改人,修改时间,状态,来源,备注,客户编号");s=" sys_id desc";h={whereString:e,orderByString:s,column:i,columnname:u,clientInf:_clientInf};doAjaxFunction(f,"Export",h,{success:function(n){o.stop();window.open(n,"_blank","")},fail:function(n){o.stop();_alertMessage.show("数据导出失败","fail");_resultMessage.show(n)},error:function(n){o.stop();_alertMessage.show("数据导出失败","fail");_resultMessage.show(n)}})},btn_command_showcolunm_onclick:function(){c.start();var n=getCookie("tbl_ld_xxbg_list_column");n!=null&&n!="undefined"&&n!=""&&controlObj.multidropdownlistid("model_dropdown_f_checklist_tbl_ld_xxbg_showcolumnlist",n);$("#div_modal_tbl_ld_xxbg_showcolumnlist").modal("show")},btn_showcolumn_modal_cancle_onclick:function(){$("#div_modal_tbl_ld_xxbg_showcolumnlist").modal("hide");c.stop()},btn_showcolumn_modal_save_onclick:function(){var t=controlObj.multidropdownlistid("model_dropdown_f_checklist_tbl_ld_xxbg_showcolumnlist"),i=controlObj.multidropdownlist("model_dropdown_f_checklist_tbl_ld_xxbg_showcolumnlist");setCookieMinutes("tbl_ld_xxbg_list_column",t,5256e3);setCookieMinutes("tbl_ld_xxbg_list_columnname",i,5256e3);$("#table_grid_tbl_ld_xxbg_list").bootstrapTable("destroy");w({success:function(){n.bindGrid({success:function(){$("#div_modal_tbl_ld_xxbg_showcolumnlist").modal("hide");c.stop()},fail:function(n){_blockMessage.show("bindGrid执行失败<br/>"+n,"fail")}})}})},end:function(){}};return n}();$(document).ready(function(){tbl_ld_xxbg_list_Obj.init()});