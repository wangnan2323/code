var tbl_ld_cbiao_list_Obj=function(){"use strict";var c="//127.0.0.1/sara.dd.ldsw/service/service_tbl_ld_cbiao.asmx/",r="20",l=!0,i="",f="",u=null,e="",t="",a=function(n){try{i=requestQuery("isadmin");n.success()}catch(t){_blockMessage.show("initParameter执行失败<br/>"+t.message,"fail")}},o=function(t){var r,f;try{u=new hashMap;r="select t.sys_id as id,t.f_pgpcmc as text,t.f_pgsj as pgsj from tbl_ld_pgb t where f_value1='"+n._pr_cbbhid+"'";i=="1"?r+=" and f_ztid in ('0','2')":i=="0"&&(r+=" and f_ztid='1'");r+=" order by sys_id desc";f={tbl_ld_sfb:r};commonObj.querySqls(f,{success:function(n){u.put("codeservice_sf",n.tbl_ld_sfb);t.success()}})}catch(e){_blockMessage.show("initBaseCode执行失败<br/>"+e.message,"fail")}},w=function(){},s=function(t,i){var r="../tbl_ld_cbiao/tbl_ld_cbiao_detail.html";r+="?uid="+basePageObj._userInfoJson.sys_userid;r+="&sys_id="+t;r+="&pagetype="+i;r+="&appcode="+n._pr_appcode;r+="&isadmin=0";r+="&fromurl=../tbl_ld_cben/tbl_ld_cben_cbiao_treelist.html";r+="&fromurlparam={";r+='"appcode":"'+n._pr_appcode+'",';r+='"listtype":"'+n._pr_listtype+'",';r+='"isadmin":"'+n._pr_isadmin+'",';r+='"partgridselectids":"'+n._pr_part_gridselectids+'",';r+='"partgridpageindex":"'+n._pr_part_gridpageindex+'",';r+='"gridstatusscrolltop":"'+n._pr_tree_gridstatusscrolltop+'",';r+='"gridselectid":"'+n._pr_tree_gridselectid+'",';r+='"gridpageindex":"'+n._pr_tree_gridpageindex+'",';r+='"searchtype":"'+n._pr_tree_searchtype+'",';r+='"pgid":"'+n._pr_pgb_sys_id+'",';r+='"searchcontent":'+JSON.stringify(n._pr_tree_searchcontent)+"";r+="}";commonObj.changeUrl(r,"right-show")},h=function(t){try{var i=u.get("codeservice_sf");controlObj.singledropdownlistinit("detail_f_pgpcmc_tbl_ld_cben_treelist",i,v);controlObj.singledropdownlistid("detail_f_pgpcmc_tbl_ld_cben_treelist",n._pr_pgb_sys_id);t.success()}catch(r){_blockMessage.show("initDetailControl执行失败。<br/>"+r.message,"fail")}},v=function(i){e!=i.added.id&&(e=i.added.id,n._pr_pgb_sys_id=controlObj.singledropdownlistid("detail_f_pgpcmc_tbl_ld_cben_treelist"),t=i.added.pgsj,n.bindGrid({success:function(){},fail:function(n){_blockMessage.show("绑定列表执行失败。<br/>"+n,"fail")}}))},y=function(n){f="";n.success()},p=function(t){try{var u=200,i=0;$(window).width()<basePageObj._limSrceenWidth?(i=$(window).height()-u,i<950&&(i=950)):i=$(window).height()-u;$("#table_grid_tbl_ld_cbiao_list").bootstrapTable({cache:!1,height:i,striped:!0,pagination:l,pageSize:r,pageList:[r],pageNumber:n._pr_part_gridpageindex,search:!1,showColumns:!1,showRefresh:!1,clickToSelect:!1,idField:"sys_id",sidePagination:"webserver",columns:[{field:"sys_id",title:"sys_id","class":"gridcell-ordercolumn hidden",align:"center",valign:"middle",visible:!0,sortable:!1},{field:"f_value1",title:"备用字段1","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value2",title:"备用字段2","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value3",title:"备用字段3","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value4",title:"备用字段4","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value5",title:"备用字段5","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value6",title:"备用字段6","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value7",title:"备用字段7","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value8",title:"备用字段8","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value9",title:"备用字段9","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_value10",title:"备用字段10","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_yhm",title:"用户名","class":"",align:"left",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_dz",title:"地址","class":"",align:"left",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_dh",title:"电话","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_bqzm",title:"本期止码","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_bqsl",title:"当月水量","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_qsqpjsl",title:"前三期平均水量","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_ly",title:"来源","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_sblx",title:"水表类型","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_yslx",title:"用水类型","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_sfsfts",title:"是否算费提示","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return n=="true"?"是":"否"}},{field:"f_zt",title:"状态","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_sblxid",title:"水表类型id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_khbhid",title:"客户编号id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cbyid",title:"抄表员id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cbyphoto",title:"抄表员photo","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_sbbhid",title:"水表编号id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_yslxid",title:"用水类型id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cbbhid",title:"抄本编号id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_khbh",title:"客户编号","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_sqzm",title:"上期止码","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_sqsl",title:"上期水量","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_qlqpjsl",title:"前六期平均水量","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cbyname",title:"抄表员name","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cbsj",title:"抄表时间","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){n==""&&(n="1900-01-01 00:00:00");var t=n.toDateTime().Format("yyyy-MM-dd hh:mm:ss");return t=="1900-01-01 00:00:00"&&(t="&nbsp;&nbsp;"),t}},{field:"f_bk",title:"表况","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_bkid",title:"表况id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_ztid",title:"状态id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_lyid",title:"来源id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_bz",title:"备注","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_jfm",title:"缴费名","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_dy",title:"地域","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_dyid",title:"地域id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_sc",title:"水厂","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_scid",title:"水厂id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_qy",title:"区域","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_qyid",title:"区域id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_pq",title:"片区","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_pqid",title:"片区id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_lxtkhh",title:"老系统客户号","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_pgbh",title:"评估编号","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_pgbhid",title:"评估编号id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_pgr",title:"评估人","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_pgrid",title:"评估人id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_pgpcmc",title:"评估批次名称","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_pgsj",title:"评估时间","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){n==""&&(n="1900-01-01 00:00:00");var t=n.toDateTime().Format("yyyy-MM-dd hh:mm:ss");return t=="1900-01-01 00:00:00"&&(t="&nbsp;&nbsp;"),t}},{field:"f_jfbh",title:"缴费编号","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_jfbhid",title:"缴费编号id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n;return t.length>10&&(t=t.substr(0,10)+"..."),t}},{field:"f_jfsj",title:"缴费时间","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){n==""&&(n="1900-01-01 00:00:00");var t=n.toDateTime().Format("yyyy-MM-dd hh:mm:ss");return t=="1900-01-01 00:00:00"&&(t="&nbsp;&nbsp;"),t}},{field:"f_bqje",title:"本期金额","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_jmje",title:"减免金额","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_jmbh",title:"减免编号","class":"",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_sbbh",title:"水表编号","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cbbh",title:"抄本编号","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cbmc",title:"抄本名称","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cb_cbbh",title:"抄表编号","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_cb_cbbhid",title:"抄表编号id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_yhbh",title:"用户编号","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"f_yhbhid",title:"用户编号id","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"",title:"操作",align:"center",valign:"middle",sortable:!1,clickToSelect:!1,formatter:function(){switch(n._pr_listtype){case"1":return'<a class="edit ml10" href="javascript:void(0)" title="编辑"><i class="glyphicon glyphicon-edit"><\/i><\/a>';case"2":return'<a class="view ml10" href="javascript:void(0)" title="浏览"><i class="glyphicon glyphicon-eye-open"><\/i><\/a>'}},events:{"click .view":function(n,t,i){s(i.sys_id,"2")},"click .edit":function(n,t,i){s(i.sys_id,"1")}}}],onPageChange:function(t,i){n._pr_part_gridpageindex=i;n.bindGrid()},rowStyle:function(n){return n.f_sfsfts=="true"?{classes:"danger"}:{}},onLoadSuccess:function(){},onCheck:function(t){n._pr_part_gridselectids+="^"+t.sys_id;n._pr_part_gridselectids=n._pr_part_gridselectids.trimStartEnd("^")},onUncheck:function(t){n._pr_part_gridselectids=("^"+n._pr_part_gridselectids+"^").replaceAll("^"+t.sys_id+"^","^");n._pr_part_gridselectids=n._pr_part_gridselectids.trimStartEnd("^")},onCheckAll:function(){var t=$("#table_grid_tbl_ld_cbiao_list").bootstrapTable("getSelections");$.each(t,function(i){("^"+n._pr_part_gridselectids+"^").indexOf("^"+t[i].sys_id+"^")>-1||(n._pr_part_gridselectids+="^"+t[i].sys_id)});n._pr_part_gridselectids=n._pr_part_gridselectids.trimStartEnd("^")},onUncheckAll:function(){var t=$("#table_grid_tbl_ld_cbiao_list").bootstrapTable("getData");$.each(t,function(i){("^"+n._pr_part_gridselectids+"^").indexOf("^"+t[i].sys_id+"^")>-1&&(n._pr_part_gridselectids=("^"+n._pr_part_gridselectids+"^").replaceAll("^"+t[i].sys_id+"^","^"))});n._pr_part_gridselectids=n._pr_part_gridselectids.trimStartEnd("^")}});t.success()}catch(f){_blockMessage.show("initGrid执行失败<br/>"+f.message,"fail")}},b=function(){},n={_pr_appcode:"",_pr_listtype:"",_pr_isadmin:"",_pr_cbbhid:"",_pr_part_gridselectids:"",_pr_part_gridpageindex:1,_pr_pgb_sys_id:"",_pr_cb_count:"0",_pr_tree_gridselectid:"",_pr_tree_gridpageindex:1,_pr_tree_gridstatusscrolltop:"",_pr_tree_searchtype:"1",_pr_tree_searchcontent:null,init:function(n){try{a({success:function(){y({success:function(){o({success:function(){h({success:function(){n.success()}})}})}})}})}catch(t){_blockMessage.show("程序初始化失败。<br/>"+t.message,"fail")}},bindGrid:function(u){setTimeout(function(){var e,s,o,h,l;$("#table_grid_tbl_ld_cbiao_list").bootstrapTable("showLoading");e=f;n._pr_cbbhid!=""?(e!=""&&(e+=" and "),e+=" f_cbbhid = '"+n._pr_cbbhid+"'",e+=" and sys_delflag = '0'",i=="1"?(e+=n._pr_pgb_sys_id==null||n._pr_pgb_sys_id==""?" and (f_pgbhid is null or f_pgbhid = '')":" and f_pgbhid = '"+n._pr_pgb_sys_id+"'",e+=" and f_ztid = '1'"):(e+=n._pr_pgb_sys_id==null||n._pr_pgb_sys_id==""?" and 1=2 ":" and f_pgbhid = '"+n._pr_pgb_sys_id+"'",e+=" and (f_ztid = '2'or f_ztid = '3')"),s=" f_sfsfts desc",o="f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^f_khbhid^f_cbyid^f_cbyphoto^f_sbbhid^f_sblxid^f_yslxid^f_cbbhid^f_khbh^f_sqzm^f_bqzm^f_bqsl^f_sqsl^f_qsqpjsl^f_qlqpjsl^f_cbyname^f_cbsj^f_bk^f_bkid^f_zt^f_ztid^f_ly^f_lyid^f_bz^f_yhm^f_jfm^f_dh^f_dz^f_dy^f_dyid^f_sc^f_scid^f_qy^f_qyid^f_pq^f_pqid^f_lxtkhh^f_pgbh^f_pgbhid^f_pgr^f_pgrid^f_pgpcmc^f_pgsj^f_jfbh^f_jfbhid^f_jfsj^f_bqje^f_sbbh^f_sblx^f_yslx^f_cbbh^f_cbmc^f_cb_cbbh^f_cb_cbbhid^f_yhbh^f_yhbhid^f_sfsfts^sys_id",o+="^f_jmje^f_jmbh",(t==""||t=="1900-01-01 00:00:00")&&(h=new Date,t=h.Format("yyyy-MM-dd hh:mm:ss")),l={whereString:e,cxzxsjString:t,orderByString:s,columnsString:o,pageSizeString:r,pageIndexString:n._pr_part_gridpageindex,clientInf:_clientInf},doAjaxFunction(c,"GetList",l,{success:function(t){var i=new Function("","return "+t)();$("#table_grid_tbl_ld_cbiao_list").bootstrapTable("hideLoading");$("#table_grid_tbl_ld_cbiao_list").bootstrapTable("loadJson",i);n._pr_cb_count=i.total;u!=undefined&&u!=null&&u.success()},fail:function(n){u!=undefined&&u!=null&&u.fail(n)}})):u!=undefined&&u!=null&&u.fail("抄本标号ID不能为空")},0)},initAndBindGrid:function(t){n._pr_cb_count="0";$("#table_grid_tbl_ld_cbiao_list").bootstrapTable("destroy");p({success:function(){o({success:function(){h({success:function(){n.bindGrid({success:function(){t.success()},fail:function(n){t.fail(n)}})}})}})},fail:function(n){t.fail(n)}})},end:function(){}};return n}();