var _pr_fromurl="",_pr_fromurlparam="",_pr_appcode="",_clientInf='{userid:"",appcode:"54",appname:"",userip:"",usermac:"",username:"",userimg:""}',_blockMessage=null,_alertMessage=null,_resultMessage=null,_confirmMessage=null,tbl_app_news_detail_Obj=function(){"use strict";var u="//127.0.0.1/sara.dd.ldsw/service/service_tbl_app_news.asmx/",v="//127.0.0.1/sara.dd.ldsw/sara.platform.operation/auth/service/service_t_usergroup.asmx/",y="//127.0.0.1/sara.dd.ldsw.file/service/fileupload/service_fileuploaddo.asmx/",t=null,r=null,f=null,i=[],p=function(t){try{_pr_fromurl=requestQuery("fromurl");_pr_fromurlparam=requestQuery("fromurlparam");n._pr_sys_id=requestQuery("sys_id");n._pr_pagetype=requestQuery("pagetype");_pr_appcode=requestQuery("appcode");n._pr_newstype=requestQuery("newstype");n._pr_newstypeactive=requestQuery("newstypeactive");n._pr_titletypeactive=requestQuery("titletypeactive");n._pr_contenttypeactive=requestQuery("contenttypeactive");_clientInf='{userid:"'+basePageObj._userInfoJson.sys_userid+'",appcode:"'+_pr_appcode+'",appname:"",userip:"'+basePageObj._userInfoJson.ip+'",usermac:"'+basePageObj._userInfoJson.mac+'",username:"'+basePageObj._userInfoJson.sys_username+'",userimg:"'+basePageObj._userInfoJson.sys_photourl+'"}';n._pr_sys_id==null||n._pr_sys_id==""?_blockMessage.show("_pr_sys_id参数接收失败","fail"):n._pr_pagetype==null||n._pr_pagetype==""?_blockMessage.show("_pr_pagetype参数接收失败...","fail"):n._pr_newstype==null||n._pr_newstype==""||n._pr_newstype=="null"?_blockMessage.show("_pr_newstype参数接收失败...","fail"):t.success()}catch(i){_blockMessage.show("initParameter执行失败"+i.message,"fail")}},w=function(i){commonObj.getCodeServiceJson(n._pr_newstype,{success:function(r){var o,c,s,l,e,f,y;try{if(t=new hashMap,n._pr_newstypeactive!=""){var h=r[n._pr_newstype],a=[],e="^"+n._pr_newstypeactive+"^";for(f=0;f<h.length;f++)e.indexOf("^"+h[f].id+"^")>-1&&a.push(h[f]);t.put("servicecode_newstype",a)}else t.put("servicecode_newstype",r[n._pr_newstype]);if(o=[{id:"1",text:"标题+简述+状态"},{id:"2",text:"标题+N张小图并排+状态"},{id:"3",text:"标题+N张大图滚动+图片描述+状态"},{id:"4",text:"标题+简述+小图九宫+状态"},{id:"5",text:"标题+1张小图在右侧+状态"},{id:"6",text:"标题+1张小图在左侧+状态"},{id:"7",text:"标题+1张大图-首页置顶用"},{id:"8",text:"标题+1张小图-首页中部横向滚动用"},],n._pr_titletypeactive!=""){for(c=[],e="^"+n._pr_titletypeactive+"^",f=0;f<o.length;f++)e.indexOf("^"+o[f].id+"^")>-1&&c.push(o[f]);t.put("servicecode_01",c)}else t.put("servicecode_01",o);if(s=[{id:"1",text:"图文混排"},{id:"2",text:"大图+文字描述"},{id:"3",text:"无"},{id:"4",text:"指定程序"}],n._pr_contenttypeactive!=""){for(l=[],e="^"+n._pr_contenttypeactive+"^",f=0;f<s.length;f++)e.indexOf("^"+s[f].id+"^")>-1&&l.push(s[f]);t.put("servicecode_02",l)}else t.put("servicecode_02",s);y={whereString:" f_value1 = 'news'",orderByString:"g_id desc",columnsString:"g_name^g_id",pageSizeString:"",pageIndexString:"",clientInf:_clientInf};doAjaxFunction(v,"GetList",y,{success:function(n){var f,o,r,e,s;try{for(f=new Function("","return "+n)(),o=[],r=0;r<f.rows.length;r++)e={},e.id=f.rows[r].g_id,e.text=f.rows[r].g_name,o.push(e);t.put("servicecode_usergroup",o);s={clientInf:_clientInf};doAjaxFunction(u,"GetTags",s,{success:function(n){t.put("servicecode_array",n.split("^"));i.success()}})}catch(h){_blockMessage.show("getFileListByFileid执行失败。<br/>"+h.message,"fail")}},fail:function(n){_blockMessage.show("getFileListByFileid执行失败<br/>"+n,"fail")}})}catch(p){_blockMessage.show("initBaseCode执行失败。<br/>"+p.message,"fail")}}})},b=function(n){try{var i=t.get("servicecode_usergroup"),r=t.get("servicecode_01"),u=t.get("servicecode_02"),f=t.get("servicecode_array");controlObj.fileuploaderinit("detail_file_f_titleresource_tbl_app_news_detail",{isMultiple:!0,isImgThumbnail:!0,isThumbnailImgShow:!0,fileUploadExtnames:";.bmp;.jpg;.gif;.png;.jpeg;",thumbnailWidthHeight:"30",fileUploadCountMax:0,showType:"1",isRealName:!1,onDeleteEnd:function(n,t){tbl_app_news_title_modallist_Obj.deleteByFileUpLoadName(t)},onEditEnd:function(n,t){var o=t.split(".")[0],i=[],s=$("#table_grid_tbl_app_news_title_modallist img"),e,u,r,f;for(i=$.merge(i,s),e=$("#detail_imgs_tbl_app_news_title_modallist img"),i=$.merge(i,e),u=0;u<i.length;u++)r=$(i[u]),r.attr("src")!=undefined&&r.attr("src").indexOf(o)>-1&&(f=r.attr("src"),f.indexOf("?")>-1?r.attr("src",f.split("?")[0]+"?"+Math.random()*1e4):r.attr("src",f+"?"+Math.random()*1e4))}},rt);controlObj.singledropdownlistinit("detail_dropdown_f_titletype_tbl_app_news_detail",r,c);controlObj.richtextinit("detail_txt_f_content_tbl_app_news_detail",ut);controlObj.fileuploaderinit("detail_file_f_contentresource_tbl_app_news_detail",{isMultiple:!0,isImgThumbnail:!0,isThumbnailImgShow:!0,fileUploadExtnames:";.bmp;.jpg;.gif;.png;.jpeg;",thumbnailWidthHeight:"30",fileUploadCountMax:0,showType:"1",isRealName:!1,onDeleteEnd:function(n,t){var i;l();tbl_app_news_content_modallist_Obj.deleteByFileUpLoadName(t);var f="<div>"+controlObj.richtext("detail_txt_f_content_tbl_app_news_detail")+"<div>",u=$(f),r=u.find("img");for(i=0;i<r.length;i++)$(r[i]).attr("src").indexOf(t)>-1&&$(r[i]).remove();controlObj.richtext("detail_txt_f_content_tbl_app_news_detail",u.html())},onEditEnd:function(n,t){var e=t.split(".")[0],r=[],l=$("#table_grid_tbl_app_news_content_modallist img"),o,s,u,i,f;for(r=$.merge(r,l),o=$("#div_detail_modal_tbl_app_news_content_modallist img"),r=$.merge(r,o),s=$("#detail_contentResourceList_tbl_app_news_detail img"),r=$.merge(r,s),u=0;u<r.length;u++)i=$(r[u]),i.attr("src")!=undefined&&i.attr("src").indexOf(e)>-1&&(f=i.attr("src"),f.indexOf("?")>-1?i.attr("src",f.split("?")[0]+"?"+Math.random()*1e4):i.attr("src",f+"?"+Math.random()*1e4));var a="<div>"+controlObj.richtext("detail_txt_f_content_tbl_app_news_detail")+"<div>",h=$(a),c=h.find("img");for(u=0;u<c.length;u++)i=$(c[u]),i.attr("src")!=undefined&&i.attr("src").indexOf(e)>-1&&(f=i.attr("src"),f.indexOf("?")>-1?i.attr("src",f.split("?")[0]+"?"+Math.random()*1e4):i.attr("src",f+"?"+Math.random()*1e4));controlObj.richtext("detail_txt_f_content_tbl_app_news_detail",h.html())}},l);controlObj.singledropdownlistinit("detail_dropdown_f_contenttype_tbl_app_news_detail",u,a);controlObj.multidropdownlistinit("detail_dropdown_f_viewrange_tbl_app_news_detail",i,ft);controlObj.multidropdownlistinit("detail_dropdown_f_discussrange_tbl_app_news_detail",i,et);controlObj.toggleinit("detail_ck_f_isdiscuss_tbl_app_news_detail",o);controlObj.toggleinit("detail_ck_f_isviewdiscussrange_tbl_app_news_detail",ot);controlObj.toggleinit("detail_ck_f_isrelease_tbl_app_news_detail",st);controlObj.datetimeinit("detail_datetime_f_releasedate_tbl_app_news_detail_date","detail_datetime_f_releasedate_tbl_app_news_detail_time",ct,ht);controlObj.singledropdownlistinit("detail_dropdown_f_newstype_tbl_app_news_detail",t.get("servicecode_newstype"),lt);controlObj.autocompleteinit("detail_txt_f_tag_tbl_app_news_detail",f,it);controlObj.toggleinit("detail_txt_f_value2_tbl_app_news_detail");controlObj.toggleinit("detail_txt_f_value3_tbl_app_news_detail");n.success()}catch(e){_blockMessage.show("initControl执行失败。<br/>"+e.message,"fail")}},s=function(n){try{controlObj.textdisable("detail_txt_f_title_tbl_app_news_detail",n);controlObj.fileuploaderdisable("detail_file_f_titleresource_tbl_app_news_detail",n);controlObj.singledropdownlistdisable("detail_dropdown_f_titletype_tbl_app_news_detail",n);controlObj.richtextdisable("detail_txt_f_content_tbl_app_news_detail",n);controlObj.fileuploaderdisable("detail_file_f_contentresource_tbl_app_news_detail",n);controlObj.singledropdownlistdisable("detail_dropdown_f_contenttype_tbl_app_news_detail",n);controlObj.multidropdownlistdisable("detail_dropdown_f_viewrange_tbl_app_news_detail",n);controlObj.multidropdownlistdisable("detail_dropdown_f_discussrange_tbl_app_news_detail",n);controlObj.toggledisable("detail_ck_f_isdiscuss_tbl_app_news_detail",n);controlObj.toggledisable("detail_ck_f_isviewdiscussrange_tbl_app_news_detail",n);controlObj.toggledisable("detail_ck_f_isrelease_tbl_app_news_detail",n);controlObj.datetimedisable("detail_datetime_f_releasedate_tbl_app_news_detail_date","detail_datetime_f_releasedate_tbl_app_news_detail_time",n);controlObj.singledropdownlistdisable("detail_dropdown_f_newstype_tbl_app_news_detail",n);controlObj.textdisable("detail_txt_f_tag_tbl_app_news_detail",n);controlObj.textdisable("detail_txt_f_resume_tbl_app_news_detail",n);controlObj.toggledisable("detail_txt_f_value2_tbl_app_news_detail",n);controlObj.toggledisable("detail_txt_f_value3_tbl_app_news_detail",n);n?($("#btn_command_save_tbl_app_news_detail").addClass("hidden"),$(".btn-command-message").attr("disabled","disabled")):($("#btn_command_save_tbl_app_news_detail").removeClass("hidden"),$(".btn-command-message").removeAttr("disabled"))}catch(t){_blockMessage.show("setDisable执行失败。<br/>"+t.message,"fail")}},k=function(n,t){$("#detail_sys_lasteditusername_tbl_app_news_detail").html(n.sys_lasteditusername);$("#detail_f_value1_tbl_app_news_detail").attr("src",commonObj.getUserPhotoUrlByFileName(n.f_value1));controlObj.toggle("detail_txt_f_value2_tbl_app_news_detail",n.f_value2);controlObj.toggle("detail_txt_f_value3_tbl_app_news_detail",n.f_value3);controlObj.text("detail_txt_sys_orderid_tbl_app_news_detail",n.sys_orderid);controlObj.text("detail_txt_f_value4_tbl_app_news_detail",n.f_value4);controlObj.text("detail_txt_f_value5_tbl_app_news_detail",n.f_value5);controlObj.text("detail_txt_f_value6_tbl_app_news_detail",n.f_value6);controlObj.text("detail_txt_f_value7_tbl_app_news_detail",n.f_value7);controlObj.text("detail_txt_f_value8_tbl_app_news_detail",n.f_value8);controlObj.text("detail_txt_f_value9_tbl_app_news_detail",n.f_value9);controlObj.text("detail_txt_f_value10_tbl_app_news_detail",n.f_value10);controlObj.text("detail_txt_f_title_tbl_app_news_detail",n.f_title);controlObj.fileuploaderbind("detail_file_f_titleresource_tbl_app_news_detail",n.f_titleresource);controlObj.singledropdownlistid("detail_dropdown_f_titletype_tbl_app_news_detail",n.f_titletypeid);controlObj.richtext("detail_txt_f_content_tbl_app_news_detail",n.f_content);controlObj.fileuploaderbind("detail_file_f_contentresource_tbl_app_news_detail",n.f_contentresource);controlObj.singledropdownlistid("detail_dropdown_f_contenttype_tbl_app_news_detail",n.f_contenttypeid);controlObj.multidropdownlistid("detail_dropdown_f_viewrange_tbl_app_news_detail",n.f_viewrangeid);controlObj.multidropdownlistid("detail_dropdown_f_discussrange_tbl_app_news_detail",n.f_discussrangeid);controlObj.toggle("detail_ck_f_isdiscuss_tbl_app_news_detail",n.f_isdiscuss);n.f_isdiscuss=="true"?o(null,!0):o(null,!1);controlObj.toggle("detail_ck_f_isviewdiscussrange_tbl_app_news_detail",n.f_isviewdiscussrange);controlObj.toggle("detail_ck_f_isrelease_tbl_app_news_detail",n.f_isrelease);controlObj.datetime("detail_datetime_f_releasedate_tbl_app_news_detail_date","detail_datetime_f_releasedate_tbl_app_news_detail_time",n.f_releasedate);controlObj.singledropdownlistid("detail_dropdown_f_newstype_tbl_app_news_detail",n.f_newstypeid);controlObj.text("detail_txt_f_tag_tbl_app_news_detail","");n.f_tag!=""&&(i=n.f_tag.split(" "),e());controlObj.text("detail_txt_f_resume_tbl_app_news_detail",n.f_resume);h(t)},h=function(n){var t=controlObj.fileuploaderid("detail_file_f_contentresource_tbl_app_news_detail"),i={fileid:t};doAjaxFunction(y,"getFileListByFileid",i,{success:function(t){var r,i,u;try{r=new Function("","return "+t)();i="";$.each(r,function(n){var t=r[n],f=t.fileuploadname.split("."),u=f[f.length-1];",jpg,jpeg,gif,png,bmp,".indexOf((","+u+",").toLowerCase())>-1?(i+='<div class="div_imgtorich" onclick="tbl_app_news_detail_Obj.insertIntoContent(\''+t.fileuploadname+"','"+t.filerealname+"','"+u+"')\">",i+='<img width="100"  alt="'+t.filerealname+'" src = "'+commonObj.getThumbnailpathUrlByFileName(t.fileuploadname)+"?"+Math.random()*1e4+'"/>',i+=t.filerealname,i+="<\/div><br/>"):(i+='<div class="div_filetorich" onclick="tbl_app_news_detail_Obj.insertIntoContent(\''+t.fileuploadname+"','"+t.filerealname+"','"+u+"')\">",i+="<a>"+t.filerealname+"<\/a>",i+="<\/div><br/>")});u=$("#detail_contentResourceList_tbl_app_news_detail");u.html(i);n.success()}catch(f){_blockMessage.show("getFileListByFileid执行失败。<br/>"+f.message,"fail")}},fail:function(n){_blockMessage.show("getFileListByFileid执行失败<br/>"+n,"fail")}})},d=function(n){var t,r,u;try{for(t={},t.sys_orderid=controlObj.text("detail_txt_sys_orderid_tbl_app_news_detail"),t.f_value4=controlObj.text("detail_txt_f_value4_tbl_app_news_detail"),t.f_value5=controlObj.text("detail_txt_f_value5_tbl_app_news_detail"),t.f_value6=controlObj.text("detail_txt_f_value6_tbl_app_news_detail"),t.f_value7=controlObj.text("detail_txt_f_value7_tbl_app_news_detail"),t.f_value8=controlObj.text("detail_txt_f_value8_tbl_app_news_detail"),t.f_value9=controlObj.text("detail_txt_f_value9_tbl_app_news_detail"),t.f_value10=controlObj.text("detail_txt_f_value10_tbl_app_news_detail"),t.f_title=controlObj.text("detail_txt_f_title_tbl_app_news_detail"),t.f_titleresource=controlObj.fileuploaderid("detail_file_f_titleresource_tbl_app_news_detail"),t.f_titletype=controlObj.singledropdownlist("detail_dropdown_f_titletype_tbl_app_news_detail"),t.f_titletypeid=controlObj.singledropdownlistid("detail_dropdown_f_titletype_tbl_app_news_detail"),t.f_content=controlObj.richtext("detail_txt_f_content_tbl_app_news_detail"),t.f_contentresource=controlObj.fileuploaderid("detail_file_f_contentresource_tbl_app_news_detail"),t.f_contenttype=controlObj.singledropdownlist("detail_dropdown_f_contenttype_tbl_app_news_detail"),t.f_contenttypeid=controlObj.singledropdownlistid("detail_dropdown_f_contenttype_tbl_app_news_detail"),t.f_viewrange=controlObj.multidropdownlist("detail_dropdown_f_viewrange_tbl_app_news_detail"),t.f_viewrangeid=controlObj.multidropdownlistid("detail_dropdown_f_viewrange_tbl_app_news_detail"),t.f_discussrange=controlObj.multidropdownlist("detail_dropdown_f_discussrange_tbl_app_news_detail"),t.f_discussrangeid=controlObj.multidropdownlistid("detail_dropdown_f_discussrange_tbl_app_news_detail"),t.f_isdiscuss=controlObj.toggle("detail_ck_f_isdiscuss_tbl_app_news_detail"),t.f_isviewdiscussrange=controlObj.toggle("detail_ck_f_isviewdiscussrange_tbl_app_news_detail"),t.f_value2=controlObj.toggle("detail_txt_f_value2_tbl_app_news_detail"),t.f_value3=controlObj.toggle("detail_txt_f_value3_tbl_app_news_detail"),t.f_isrelease=controlObj.toggle("detail_ck_f_isrelease_tbl_app_news_detail"),t.f_releasedate=controlObj.datetime("detail_datetime_f_releasedate_tbl_app_news_detail_date","detail_datetime_f_releasedate_tbl_app_news_detail_time"),t.f_newstype=controlObj.singledropdownlist("detail_dropdown_f_newstype_tbl_app_news_detail"),t.f_newstypeid=controlObj.singledropdownlistid("detail_dropdown_f_newstype_tbl_app_news_detail"),r="",u=0;u<i.length;u++)r+=i[u]+" ";r=r.trim(" ");t.f_tag=r;t.f_resume=controlObj.text("detail_txt_f_resume_tbl_app_news_detail");n.success(t)}catch(f){_blockMessage.show("getData执行失败。<br/>"+f.message,"fail")}},g=function(t,i){var f,e,o;try{if(f=new hashMap,e=new hashMap,t.sys_orderid.length>100&&(f.put("detail_txt_sys_orderid_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_sys_orderid_tbl_app_news_detail","top")),t.f_value2.length>100&&(f.put("detail_txt_f_value2_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value2_tbl_app_news_detail","top")),t.f_value3.length>100&&(f.put("detail_txt_f_value3_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value3_tbl_app_news_detail","top")),t.f_value4.length>100&&(f.put("detail_txt_f_value4_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value4_tbl_app_news_detail","top")),t.f_value5.length>100&&(f.put("detail_txt_f_value5_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value5_tbl_app_news_detail","top")),t.f_value6.length>100&&(f.put("detail_txt_f_value6_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value6_tbl_app_news_detail","top")),t.f_value7.length>100&&(f.put("detail_txt_f_value7_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value7_tbl_app_news_detail","top")),t.f_value8.length>100&&(f.put("detail_txt_f_value8_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value8_tbl_app_news_detail","top")),t.f_value9.length>100&&(f.put("detail_txt_f_value9_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value9_tbl_app_news_detail","top")),t.f_value10.length>100&&(f.put("detail_txt_f_value10_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_value10_tbl_app_news_detail","top")),t.f_title.length>100&&(f.put("detail_txt_f_title_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_title_tbl_app_news_detail","top")),t.f_titleresource.length>100&&f.put("detail_file_f_titleresource_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),(t.f_titletype.length>100||t.f_titletypeid.length>100)&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),t.f_contentresource.length>100&&f.put("detail_file_f_contentresource_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),(t.f_contenttype.length>100||t.f_contenttypeid.length>100)&&f.put("detail_dropdown_f_contenttype_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),(t.f_viewrange.length>100||t.f_viewrangeid.length>100)&&f.put("detail_dropdown_f_viewrange_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),(t.f_discussrange.length>100||t.f_discussrangeid.length>100)&&f.put("detail_dropdown_f_discussrange_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),(t.f_newstype.length>100||t.f_newstypeid.length>100)&&f.put("detail_dropdown_f_newstype_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),t.f_tag.length>100&&(f.put("detail_txt_f_tag_tbl_app_news_detail",'长度不能超过<a style="color:red">100<\/a>'),e.put("detail_txt_f_tag_tbl_app_news_detail","top")),t.f_resume.length>4e3&&(f.put("detail_txt_f_resume_tbl_app_news_detail",'长度不能超过<a style="color:red">4000<\/a>'),e.put("detail_txt_f_resume_tbl_app_news_detail","top")),controlObj.toggle("detail_ck_f_isrelease_tbl_app_news_detail")=="true"){if(t.f_titletypeid.length==0&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","不能为空"),t.f_contenttypeid.length==0&&f.put("detail_dropdown_f_contenttype_tbl_app_news_detail","不能为空"),t.f_newstypeid.length==0&&f.put("detail_dropdown_f_newstype_tbl_app_news_detail","不能为空"),t.f_titletypeid.length!=0)switch(t.f_titletypeid){case"1":tbl_app_news_title_modallist_Obj._appNewsTitleNumber>0&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】中不能有图片");break;case"2":tbl_app_news_title_modallist_Obj._appNewsTitleNumber==0&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】不能为空");break;case"3":tbl_app_news_title_modallist_Obj._appNewsTitleNumber==0&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】不能为空");tbl_app_news_title_modallist_Obj._appNewsTitleNumber>9&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】中不能超过9张图片");break;case"4":tbl_app_news_title_modallist_Obj._appNewsTitleNumber==0&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】不能为空");tbl_app_news_title_modallist_Obj._appNewsTitleNumber>9&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】中不能超过9张图片");break;case"5":tbl_app_news_title_modallist_Obj._appNewsTitleNumber!=1&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】中只能有一张图片");break;case"6":tbl_app_news_title_modallist_Obj._appNewsTitleNumber!=1&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】中只能有一张图片");break;case"7":tbl_app_news_title_modallist_Obj._appNewsTitleNumber!=1&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】中只能有一张图片");break;case"8":tbl_app_news_title_modallist_Obj._appNewsTitleNumber!=1&&f.put("detail_dropdown_f_titletype_tbl_app_news_detail","【标题图片列表】中只能有一张图片")}if(t.f_contenttypeid.length!=0)switch(t.f_contenttypeid){case"2":tbl_app_news_content_modallist_Obj._appNewsTitleNumber==0&&f.put("detail_dropdown_f_contenttype_tbl_app_news_detail","【内容图片列表】中不能为空")}o={sysIdString:n._pr_sys_id,clientInf:_clientInf};doAjaxFunction(u,"CheckResource",o,{success:function(n){var u=new Function("","return "+n)();u.title!=""&&f.put("detail_file_f_titleresource_tbl_app_news_detail","存在大于500KB的文件，不利于网络传输，请通过图片编辑功能优化图片。");u.content!=""&&f.put("detail_file_f_contentresource_tbl_app_news_detail","存在大于500KB的文件，不利于网络传输，请通过图片编辑功能优化图片。");f.keys().length>0?(r.show(f,e,!0),i.fail()):(r.hidden(),i.success(t))},fail:function(){f.keys().length>0?(r.show(f,e,!0),i.fail()):(r.hidden(),i.success(t))}})}else f.keys().length>0?(r.show(f,e,!0),i.fail()):(r.hidden(),i.success(t))}catch(s){_blockMessage.show("checkData执行失败。<br/>"+s.message,"fail")}},e=function(){for(var t="",r=0;r<i.length;r++)t+='<span class="label label-warning hand"',n._pr_pagetype=="1"&&(t+='onclick="tbl_app_news_detail_Obj.txt_f_tag_ondelete(this);"'),t+='id="tag_'+i[r]+'">'+i[r]+"<span>",n._pr_pagetype=="1"&&(t+="&times;"),t+="<\/span><\/span>";$("#div_detail_txt_f_tag_tbl_app_news_detail_bq").html(t)},nt=function(t){var i=" sys_id = '"+n._pr_sys_id+"'",r={whereString:i,orderByString:"",columnsString:"sys_lasteditusername^f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^f_title^f_titleresource^f_titletype^f_titletypeid^f_content^f_contentresource^f_contenttype^f_contenttypeid^f_viewrange^f_viewrangeid^f_discussrange^f_discussrangeid^f_isdiscuss^f_isviewdiscussrange^f_isrelease^f_releasedate^f_newstype^f_newstypeid^f_tag^f_resume^sys_id^sys_orderid",pageSizeString:"",pageIndexString:"",clientInf:_clientInf};doAjaxFunction(u,"GetList",r,{success:function(n){var i=new Function("","return "+n)();t.success(i.rows[0])},fail:function(n){_blockMessage.show(u+"GetList<br/>"+n,"fail")}})},tt=function(t,i){var r=new Date,f={sys_id:n._pr_sys_id,sys_orderid:t.sys_orderid,f_value1:basePageObj._userInfoJson.sys_photourl,f_value2:t.f_value2,f_value3:t.f_value3,f_value4:t.f_value4,f_value5:t.f_value5,f_value6:t.f_value6,f_value7:t.f_value7,f_value8:t.f_value8,f_value9:t.f_value9,f_value10:t.f_value10,f_title:t.f_title,f_titleresource:t.f_titleresource,f_titletype:t.f_titletype,f_titletypeid:t.f_titletypeid,f_content:t.f_content,f_contentresource:t.f_contentresource,f_contenttype:t.f_contenttype,f_contenttypeid:t.f_contenttypeid,f_viewrange:t.f_viewrange,f_viewrangeid:t.f_viewrangeid,f_discussrange:t.f_discussrange,f_discussrangeid:t.f_discussrangeid,f_isdiscuss:t.f_isdiscuss,f_isviewdiscussrange:t.f_isviewdiscussrange,f_isrelease:t.f_isrelease,f_releasedate:t.f_releasedate,f_newstype:t.f_newstype,f_newstypeid:t.f_newstypeid,f_tag:t.f_tag,f_resume:t.f_resume,sys_lasteditusername:basePageObj._userInfoJson.sys_username,sys_lastedituserid:basePageObj._userInfoJson.sys_userid,sys_lasteditdate:r.Format("yyyy-MM-dd hh:mm:ss")},e={columns:"sys_id^sys_orderid^f_value1^f_value2^f_value3^f_value4^f_value5^f_value6^f_value7^f_value8^f_value9^f_value10^f_title^f_titleresource^f_titletype^f_titletypeid^f_content^f_contentresource^f_contenttype^f_contenttypeid^f_viewrange^f_viewrangeid^f_discussrange^f_discussrangeid^f_isdiscuss^f_isviewdiscussrange^f_isrelease^f_releasedate^f_newstype^f_newstypeid^f_tag^f_resume^sys_lastedituserid^sys_lasteditusername^sys_lasteditdate",clientInf:_clientInf,json:JSON.stringify(f)};doAjaxFunction(u,"Update",e,{success:function(){i.success()},fail:function(n){i.fail(n)},error:function(n){_blockMessage.show(u+"Update<br/>"+n,"fail")}})},it=function(){var n=controlObj.text("detail_txt_f_tag_tbl_app_news_detail");i.indexOf(n)<0&&(i.push(n),e(),controlObj.text("detail_txt_f_tag_tbl_app_news_detail",""))},rt=function(){var n=_resultMessage.message();n+="<br/>";n+="文件全部上传完成";_resultMessage.message(n)},c=function(n){switch(n.val){case"1":$("#div_detail_txt_f_resume_tbl_app_news_detail").removeClass("hidden");$("#div_detail_file_f_titleresource_tbl_app_news_detail").addClass("hidden");$("#div_titlemodellist_tbl_app_news_detail").addClass("hidden");break;case"2":$("#div_detail_txt_f_resume_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_titleresource_tbl_app_news_detail").removeClass("hidden");$("#div_titlemodellist_tbl_app_news_detail").removeClass("hidden");tbl_app_news_title_modallist_Obj.showFields("f_mediaurl");break;case"3":$("#div_detail_txt_f_resume_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_titleresource_tbl_app_news_detail").removeClass("hidden");$("#div_titlemodellist_tbl_app_news_detail").removeClass("hidden");tbl_app_news_title_modallist_Obj.showFields("f_mediaurl^f_mediadesc");break;case"4":$("#div_detail_txt_f_resume_tbl_app_news_detail").removeClass("hidden");$("#div_detail_file_f_titleresource_tbl_app_news_detail").removeClass("hidden");$("#div_titlemodellist_tbl_app_news_detail").removeClass("hidden");tbl_app_news_title_modallist_Obj.showFields("f_mediaurl");break;case"5":$("#div_detail_txt_f_resume_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_titleresource_tbl_app_news_detail").removeClass("hidden");$("#div_titlemodellist_tbl_app_news_detail").removeClass("hidden");tbl_app_news_title_modallist_Obj.showFields("f_mediaurl");break;case"6":$("#div_detail_txt_f_resume_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_titleresource_tbl_app_news_detail").removeClass("hidden");$("#div_titlemodellist_tbl_app_news_detail").removeClass("hidden");tbl_app_news_title_modallist_Obj.showFields("f_mediaurl");break;case"7":$("#div_detail_txt_f_resume_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_titleresource_tbl_app_news_detail").removeClass("hidden");$("#div_titlemodellist_tbl_app_news_detail").removeClass("hidden");tbl_app_news_title_modallist_Obj.showFields("f_mediaurl");break;case"8":$("#div_detail_txt_f_resume_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_titleresource_tbl_app_news_detail").removeClass("hidden");$("#div_titlemodellist_tbl_app_news_detail").removeClass("hidden");tbl_app_news_title_modallist_Obj.showFields("f_mediaurl")}},ut=function(n){var t=_resultMessage.message();t+="<br/>";t+="内容"+n;_resultMessage.message(t)},l=function(){h({success:function(){}})},a=function(n){switch(n.val){case"1":$("#div_content_tbl_app_news_detail").removeClass("hidden");$("#div_contentList_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_contentresource_tbl_app_news_detail").removeClass("hidden");break;case"2":$("#div_content_tbl_app_news_detail").addClass("hidden");$("#div_contentList_tbl_app_news_detail").removeClass("hidden");$("#div_detail_file_f_contentresource_tbl_app_news_detail").removeClass("hidden");break;case"3":$("#div_content_tbl_app_news_detail").addClass("hidden");$("#div_contentList_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_contentresource_tbl_app_news_detail").addClass("hidden");break;case"4":$("#div_content_tbl_app_news_detail").addClass("hidden");$("#div_contentList_tbl_app_news_detail").addClass("hidden");$("#div_detail_file_f_contentresource_tbl_app_news_detail").addClass("hidden")}},ft=function(n){var t=_resultMessage.message(),i;t+="<br/>";i=!1;i=n.removed==undefined||n.added==undefined?!0:n.added.id!=n.removed.id?!0:!1;t+=i?"可见范围"+n.val:"可见范围无变化";_resultMessage.message(t)},et=function(n){var t=_resultMessage.message(),i;t+="<br/>";i=!1;i=n.removed==undefined||n.added==undefined?!0:n.added.id!=n.removed.id?!0:!1;t+=i?"可评论范围"+n.val:"可评论范围无变化";_resultMessage.message(t)},o=function(n,t){t?($("#li_div_discuess_tbl_app_news_detail").removeClass("hidden"),$("#li_div_like_tbl_app_news_detail").removeClass("hidden")):($("#li_div_discuess_tbl_app_news_detail").addClass("hidden"),$("#li_div_like_tbl_app_news_detail").addClass("hidden"))},ot=function(n,t){var i=_resultMessage.message();i+="<br/>";i+=t?"是否限制评论可见范围开":"是否限制评论可见范围关";_resultMessage.message(i)},st=function(n,t){var i=_resultMessage.message();i+="<br/>";i+=t?"是否发布开":"是否发布关";_resultMessage.message(i)},ht=function(n){var t=_resultMessage.message();t+="<br/>";t+="发布日期"+n.time.value;_resultMessage.message(t)},ct=function(n){var i=new Date(n.date.valueOf()),t=_resultMessage.message();t+="<br/>";t+="发布日期"+i.Format("yyyy-MM-dd");_resultMessage.message(t)},lt=function(n){var t=_resultMessage.message(),i;t+="<br/>";i=!1;i=n.removed==undefined||n.added==undefined?!0:n.added.id!=n.removed.id?!0:!1;t+=i?"新闻类型"+n.val:"新闻类型无变化";_resultMessage.message(t)},n={_pr_sys_id:"",_pr_pagetype:"",_pr_newstype:"",_pr_newstypeactive:"",_pr_titletypeactive:"",_pr_contenttypeactive:"",init:function(){try{_alertMessage=new alertMessage;_confirmMessage=new confirmMessage;_resultMessage=new resultMessage;_blockMessage=new blockMessage;_blockMessage.show("程序加载中...","loading");basePageObj.initBasePage({success:function(){p({success:function(){w({success:function(){b({success:function(){n.bindPage({success:function(){r=new validateMessage("btn_command_save_tbl_app_news_detail");f=Ladda.create("btn_command_save_tbl_app_news_detail");switch(n._pr_pagetype){case"1":s(!1);break;case"2":s(!0)}$("#div_tbl_app_news_title").load("../tbl_app_news_title/tbl_app_news_title_modallist_part.html",null,function(){tbl_app_news_title_modallist_Obj._pr_fk_tbl_app_news_sys_id=n._pr_sys_id;tbl_app_news_title_modallist_Obj._pr_listtype=n._pr_pagetype;tbl_app_news_title_modallist_Obj.init({success:function(){$("#div_tbl_app_news_title").css("display","");$("#div_loading_content1").css("display","none");var n=controlObj.singledropdownlistid("detail_dropdown_f_titletype_tbl_app_news_detail");c({val:n})}})});$("#div_tbl_app_news_content").load("../tbl_app_news_content/tbl_app_news_content_modallist_part.html",null,function(){tbl_app_news_content_modallist_Obj._pr_fk_tbl_app_news_sys_id=n._pr_sys_id;tbl_app_news_content_modallist_Obj._pr_listtype=n._pr_pagetype;tbl_app_news_content_modallist_Obj.init({success:function(){$("#div_tbl_app_news_content").css("display","");$("#div_loading_content2").css("display","none");a({val:controlObj.singledropdownlistid("detail_dropdown_f_contenttype_tbl_app_news_detail")})}})});$("#div_tbl_app_news_discuss").load("../tbl_app_news_discuss/tbl_app_news_discuss_list_part.html",null,function(){tbl_app_news_discuss_list_Obj._pr_fk_tbl_app_news_sys_id=n._pr_sys_id;tbl_app_news_discuss_list_Obj._pr_listtype=n._pr_pagetype;tbl_app_news_discuss_list_Obj.init({success:function(){$("#div_tbl_app_news_discuss").css("display","");$("#div_loading_content3").css("display","none")}})});$("#div_tbl_app_news_like").load("../tbl_app_news_like/tbl_app_news_like_modallist_part.html",null,function(){tbl_app_news_like_modallist_Obj._pr_tbl_app_news_sys_id=n._pr_sys_id;tbl_app_news_like_modallist_Obj._pr_tbl_app_news_discuss_sys_id="";tbl_app_news_like_modallist_Obj._pr_listtype=n._pr_pagetype;tbl_app_news_like_modallist_Obj.init({success:function(){$("#div_tbl_app_news_like").css("display","");$("#div_loading_content5").css("display","none");_blockMessage.hidden()}})});$("#div_tbl_app_news_like_discuss").load("../tbl_app_news_like/tbl_app_news_like_discuss_modallist_part.html",null,function(){tbl_app_news_like_discuss_modallist_Obj._pr_tbl_app_news_sys_id=n._pr_sys_id;tbl_app_news_like_discuss_modallist_Obj._pr_tbl_app_news_discuss_sys_id="";tbl_app_news_like_discuss_modallist_Obj._pr_listtype=n._pr_pagetype;tbl_app_news_like_discuss_modallist_Obj.init({success:function(){$("#div_tbl_app_news_like_discuss").css("display","");$("#div_loading_content4").css("display","none")}})})}})}})}})}})},fail:function(n){_blockMessage.show(n,"fail")}})}catch(t){_blockMessage.show("程序初始化失败。<br/>"+t.message,"fail")}},bindPage:function(n){try{nt({success:function(t){k(t,{success:function(){n.success()}})}})}catch(t){_blockMessage.show("bindPage执行失败。<br/>"+t.message,"fail")}},insertIntoContent:function(t,i,r){if(n._pr_pagetype=="1")switch(r.toLowerCase()){case"png":case"gif":case"jpg":case"jpeg":case"bmp":controlObj.richtext("detail_txt_f_content_tbl_app_news_detail",'<br/><img class="img-responsive" src = "http:'+html5fileuploader_DefaultOps.fileUploadRootPath+"fileuploadpath/"+t+'" style="position:static;max-width: 100%;"/>'+controlObj.richtext("detail_txt_f_content_tbl_app_news_detail"));break;default:controlObj.richtext("detail_txt_f_content_tbl_app_news_detail",'<br/><a href = "'+html5fileuploader_DefaultOps.fileUploadRootPath+"fileuploadpath/"+t+'">'+i+"<\/a>"+controlObj.richtext("detail_txt_f_content_tbl_app_news_detail"))}},btn_command_save_onclick:function(){try{f.start();d({success:function(n){g(n,{success:function(n){tt(n,{success:function(){f.stop();_alertMessage.show("保存成功","success",2e3)},fail:function(n){f.stop();_alertMessage.show("保存失败<br/>"+n,"fail")}})},fail:function(){f.stop();_alertMessage.show("校验未通过","warning")}})}})}catch(n){_blockMessage.show("保存程序异常。","fail")}},btn_command_cancle_onclick:function(){var n=_pr_fromurl,t;n+="?uid="+basePageObj._userInfoJson.sys_userid;t=new Function("","return "+_pr_fromurlparam)();$.each(t,function(t,i){n+=typeof i=="object"?"&"+t+"="+JSON.stringify(i):"&"+t+"="+i});commonObj.changeUrl(n,"right-hide")},txt_f_tag_oninput:function(){var n=controlObj.text("detail_txt_f_tag_tbl_app_news_detail");n.substr(n.length-1,1)==" "&&(n=n.substr(0,n.length-1),i.indexOf(n)<0&&(i.push(n),e()),controlObj.text("detail_txt_f_tag_tbl_app_news_detail",""))},txt_f_tag_ondelete:function(n){var t=n.id.substr(4,n.id.length-4);i.indexOf(t)>=0&&i.remove(i.indexOf(t));e()},showHide:function(n){$("#li_"+n).hasClass("menu-active")||($(".menu-active").removeClass("menu-active"),$(".div-menu").addClass("hidden"),$("#li_"+n).addClass("menu-active"),$("#"+n).removeClass("hidden"))},showHideFValue:function(n){$("#"+n).hasClass("hidden")?$("#"+n).removeClass("hidden"):$("#"+n).addClass("hidden")}};return n}();$(document).ready(function(){tbl_app_news_detail_Obj.init()});