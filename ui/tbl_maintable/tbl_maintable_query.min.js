var _clientInf='{userid:"",appcode:"54",appname:"",userip:"",usermac:"",username:"",userimg:""}',_blockMessage=null,_alertMessage=null,_resultMessage=null,_confirmMessage=null,_pr_appcode="",_pr_projectClassId="",_pr_projectClassDtl1="",_pr_projectClassDtl2="",tbl_maintable_query_Obj=function(){"use strict";var n={_serviceUrl_tbl_maintable_detailall:"//127.0.0.1/sara.dd.ldsw/service/service_tbl_maintable_detailall.asmx/",_serviceUrl:"//127.0.0.1/sara.dd.ldsw/service/service_tbl_maintable.asmx/",_pageSize:"10",_baseCodeHashMap:null,_validateMessage:null,_pr_gridselectids:"",_pr_gridpageindex:1,_pr_searchtype:"1",_pr_searchcontent:null,_whereClauseString:"",_baseWhereClauseString:"",init:function(){try{_alertMessage=new alertMessage;_resultMessage=new resultMessage;_confirmMessage=new confirmMessage;_blockMessage=new blockMessage;_blockMessage.show("程序加载中...","loading");basePageObj.initBasePage({success:function(){n.initParameter({success:function(){n.initSearchBaseCode({success:function(){n.initSearchControl({success:function(){n.setSearchData({success:function(){n.creatWhereClause({success:function(){n.initGrid({success:function(){n.bindGrid({success:function(){n._validateMessage=new validateMessage("btn_search_modal_search_tbl_maintable_query");n.setDisable(!0);_blockMessage.hidden()}})}})}})}})}})}})}})}})}catch(t){_blockMessage.show("程序初始化失败。<br/>"+t.message,"fail")}},initParameter:function(t){try{_pr_appcode=requestQuery("appcode");_pr_projectClassId=requestQuery("projectclassid");_pr_projectClassDtl1=requestQuery("projectclassdtl1");_pr_projectClassDtl2=requestQuery("projectclassdtl2");n._pr_gridselectids=requestQuery("gridselectids");n._pr_gridpageindex=requestQuery("gridpageIndex");n._pr_searchtype=requestQuery("searchtype");n._pr_searchcontent=requestQuery("searchcontent");_clientInf='{userid:"'+basePageObj._userInfoJson.sys_userid+'",appcode:"'+_pr_appcode+'",appname:"",userip:"'+basePageObj._userInfoJson.ip+'",usermac:"'+basePageObj._userInfoJson.mac+'",username:"'+basePageObj._userInfoJson.sys_username+'",userimg:"'+basePageObj._userInfoJson.sys_photourl+'"}';(_pr_projectClassId==undefined||_pr_projectClassId==null)&&(_pr_projectClassId="");(_pr_projectClassDtl1==undefined||_pr_projectClassDtl1==null)&&(_pr_projectClassDtl1="");(_pr_projectClassDtl2==undefined||_pr_projectClassDtl2==null)&&(_pr_projectClassDtl2="");n._pr_gridpageindex=n._pr_gridpageindex==null||n._pr_gridpageindex==""||n._pr_gridpageindex=="null"?1:Number(n._pr_gridpageindex);n._pr_searchcontent=n._pr_searchcontent==null||n._pr_searchcontent==""||n._pr_searchcontent=="null"?{}:new Function("","return "+n._pr_searchcontent)();(n._pr_searchtype==null||n._pr_searchtype==""||n._pr_searchtype=="null")&&(n._pr_searchtype="1");switch(n._pr_searchtype){case"1":$("#btn_command_search_tbl_maintable_query").html("简单查询");$("#txt_command_search_tbl_maintable_query").removeAttr("disabled");break;case"2":$("#btn_command_search_tbl_maintable_query").html("高级查询");$("#txt_command_search_tbl_maintable_query").attr("disabled",!0)}t.success()}catch(i){_blockMessage.show("that.initParameter执行失败"+i.message,"fail")}},initGrid:function(t){try{var i=0;$(window).width()<basePageObj._limSrceenWidth?(i=$(window).height()-320,i<950&&(i=950)):i=$(window).height()-240;$("#table_grid_tbl_maintable_query").bootstrapTable({cache:!1,height:i,striped:!0,pagination:!0,pageSize:n._pageSize,pageList:[n._pageSize],pageNumber:n._pr_gridpageindex,search:!1,showColumns:!1,showRefresh:!1,clickToSelect:!0,idField:"sys_id",sidePagination:"webserver",columns:[{field:"_checkbox",checkbox:!0,formatter:function(t,i){return("^"+n._pr_gridselectids+"^").indexOf("^"+i.sys_id+"^")>-1?{disabled:!0,checked:!0}:{disabled:!0}}},{field:"sys_id",title:"sys_id",align:"center","class":"hidden",valign:"middle",visible:!0,sortable:!0},{field:"shpid",title:"shpid","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_processinsid",title:"processinsid",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"fk_tbl_maintable_sys_id",title:"外键",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value1",title:"备用字段1",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value2",title:"备用字段2",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value3",title:"备用字段3",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value4",title:"备用字段4",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value5",title:"备用字段5",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value6",title:"备用字段6",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value7",title:"备用字段7",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value8",title:"备用字段8",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value9",title:"备用字段9",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"value10",title:"备用字段10",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_first",title:"是否经过操作",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"bz",title:"备注",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"dwmc",title:"单位名称",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"xmmc",title:"项目名称",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"xzqy",title:"行政区域","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"xmlx",title:"项目类型","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_projectclassid",title:"业务类型",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_projectclassid_name",title:"业务类型","class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_projectclassdtl1",title:"业务状态",visible:!1,"class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_projectclassdtl1_name",title:"业务状态","class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_projectclassdtl2",title:"数据类型","class":"hidden",visible:!1,align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_projectclassdtl2_name",title:"数据类型","class":"hidden",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"sys_processnextuser",title:"待办人","class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"lrr",title:"创建人","class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){return n}},{field:"lrrq",title:"创建日期","class":"cc-hidden-sm  cc-hidden-xs",align:"center",valign:"middle",sortable:!0,clickToSelect:!0,formatter:function(n){var t=n.toDateTime().Format("yyyy-MM-dd hh:mm:ss");return t=="1900-01-01 00:00:00"?"&nbsp;&nbsp;":t}},{field:"",title:"操作",align:"center",valign:"middle",sortable:!1,clickToSelect:!1,formatter:function(){return'<a class="view ml10" href="javascript:void(0)" title="浏览"><i class="glyphicon glyphicon-eye-open"><\/i><\/a>'},events:{"click .view":function(t,i,r){n.transToDetailPage(r,"2")}}}],onPageChange:function(t,i){n._pr_gridpageindex=i;n.bindGrid()},rowStyle:function(n){var t="";return n.sys_projectclassdtl1.indexOf("_")>-1&&(t+=" danger "),n.sys_first=="0"&&(t+=" cc-font-weight-bold "),t==""?{}:{classes:t}},onLoadSuccess:function(){},onCheck:function(t){n._pr_gridselectids+="^"+t.sys_id;n._pr_gridselectids=n._pr_gridselectids.trimStartEnd("^");n.gridSelectedChange()},onUncheck:function(t){n._pr_gridselectids=("^"+n._pr_gridselectids+"^").replaceAll("^"+t.sys_id+"^","^");n._pr_gridselectids=n._pr_gridselectids.trimStartEnd("^");n.gridSelectedChange()},onCheckAll:function(){var t=$("#table_grid_tbl_maintable_query").bootstrapTable("getSelections");$.each(t,function(i){("^"+n._pr_gridselectids+"^").indexOf("^"+t[i].sys_id+"^")>-1||(n._pr_gridselectids+="^"+t[i].sys_id)});n._pr_gridselectids=n._pr_gridselectids.trimStartEnd("^");n.gridSelectedChange()},onUncheckAll:function(){var t=$("#table_grid_tbl_maintable_query").bootstrapTable("getData");$.each(t,function(i){("^"+n._pr_gridselectids+"^").indexOf("^"+t[i].sys_id+"^")>-1&&(n._pr_gridselectids=("^"+n._pr_gridselectids+"^").replaceAll("^"+t[i].sys_id+"^","^"))});n._pr_gridselectids=n._pr_gridselectids.trimStartEnd("^");n.gridSelectedChange()}});t.success()}catch(r){_blockMessage.show("that.initGrid执行失败<br/>"+r.message,"fail")}},bindGrid:function(t){setTimeout(function(){var i=n._whereClauseString,r={whereString:i,orderByString:" sys_id desc",columnsString:"sys_processinsid^fk_tbl_maintable_sys_id^value1^value2^value3^value4^value5^value6^value7^value8^value9^value10^sys_processnextuser^sys_projectclassdtl1^sys_projectclassdtl1_name^sys_projectclassdtl2^sys_projectclassdtl2_name^sys_first^sys_projectclassid^sys_projectclassid_name^shpid^xmmc^xzqy^dwmc^lrr^lrrq^bz^xmlx^sys_id",pageSizeString:n._pageSize,pageIndexString:n._pr_gridpageindex,clientInf:_clientInf};doAjaxFunction(n._serviceUrl,"GetList",r,{success:function(i){var r=new Function("","return "+i)();$("#table_grid_tbl_maintable_query").bootstrapTable("loadJson",r);n.gridSelectedChange();t!=undefined&&t!=null&&t.success()},fail:function(n){_blockMessage.show("that.bindGrid执行失败<br/>"+n,"fail")}})},0)},setDisable:function(n){controlObj.singledropdownlistdisable("search_dropdown_sys_projectclassid_tbl_maintable_query",n)},btn_command_search_onclick:function(){try{switch(n._pr_searchtype){case"1":n.getSearchData({success:function(){n.creatWhereClause({success:function(){n.clearSearchData();n._pr_gridpageindex="1";n._pr_gridselectids="";n.bindGrid()}})}});break;case"2":n.btn_command_search_2_onclick()}}catch(t){_alertMessage.show("查询失败<br/>"+t.message,"fail")}},btn_command_search_1_onclick:function(){n._pr_searchtype="1";$("#btn_command_search_tbl_maintable_query").html("简单查询");$("#txt_command_search_tbl_maintable_query").removeAttr("disabled")},btn_command_search_2_onclick:function(){n._pr_searchtype="2";$("#btn_command_search_tbl_maintable_query").html("高级查询");$("#txt_command_search_tbl_maintable_query").attr("disabled","disabled");$("#div_search_modal_tbl_maintable_query").modal("show")},btn_search_modal_search_onclick:function(){n.getSearchData({success:function(){n.checkSearchData({success:function(){n.creatWhereClause({success:function(){n.clearSearchData();$("#div_search_modal_tbl_maintable_query").modal("hide");n._pr_gridpageindex="1";n._pr_gridselectids="";n.bindGrid()}})},fail:function(){}})}})},btn_search_modal_cancle_onclick:function(){n._validateMessage.hidden();$("#div_search_modal_tbl_maintable_query").modal("hide");n._pr_searchtype="1";$("#btn_command_search_tbl_maintable_query").html("简单查询");$("#txt_command_search_tbl_maintable_query").removeAttr("disabled")},btn_command_search_xs_onclick:function(){n._pr_searchtype="2";$("#btn_command_search_tbl_maintable_query").html("高级查询");$("#txt_command_search_tbl_maintable_query").attr("disabled","disabled");$("#div_search_modal_tbl_maintable_query").modal("show")},btn_command_clearselect_onclick:function(){$("#table_grid_tbl_maintable_query").bootstrapTable("uncheckAll");n._pr_gridselectids="";n.gridSelectedChange()},transToDetailPage:function(t,i){var r="../tbl_maintable/tbl_maintable_detailall.html",u,f;r+="?uid="+basePageObj._userInfoJson.sys_userid;r+="&sys_id="+t.sys_id;r+="&pagetype="+i;r+="&appcode="+_pr_appcode;r+="&projectclassid="+t.sys_projectclassid;u=n._baseCodeHashMap.get("t_projclass_dtl1");f=$.grep(u,function(n){return n.text=="归档"});r+="&projectclassdtl1="+f[0].id;r+="&projectclassdtl2="+t.sys_projectclassdtl2;r+="&fromurl=../tbl_maintable/tbl_maintable_query.html";r+="&fromurlparam={";r+='"appcode":"'+_pr_appcode+'",';r+='"gridselectids":"'+n._pr_gridselectids+'",';r+='"gridpageindex":"'+n._pr_gridpageindex+'",';r+='"searchtype":"'+n._pr_searchtype+'",';r+='"projectclassid":"'+_pr_projectClassId+'",';r+='"projectclassdtl1":"'+_pr_projectClassDtl1+'",';r+='"projectclassdtl2":"'+_pr_projectClassDtl2+'",';r+='"searchcontent":'+JSON.stringify(n._pr_searchcontent)+"";r+="}";commonObj.changeUrl(r,"right-show")},initSearchBaseCode:function(t){n._baseCodeHashMap=new hashMap;var i={sysUserIdString:basePageObj._userInfoJson.sys_userid,projectClassIdString:_pr_projectClassId,projectClassDtl1String:_pr_projectClassDtl1,projectClassDtl2String:_pr_projectClassDtl2,userInfoJsonString:basePageObj._userInfoJson},r={parameterJsonString:JSON.stringify(i),clientInf:_clientInf};doAjaxFunction(n._serviceUrl_tbl_maintable_detailall,"GetXzqyIdTextString",r,{success:function(i){var f=new Function("","return "+i)(),u,r,e;n._baseCodeHashMap.put("servicecode_xzfq",f.xzqy);u=f.xzqy;r="(";$.each(u,function(n){r+="'"+u[n].id+"',"});r=r.trimEnd(",")+")";e={projclassid:"select sys_id as id,projclassname as text from t_projclass order by to_number(sys_orderid)",lrr:"select distinct(lrr) from tbl_maintable where xzqyid in "+r+"",dwmc:"select distinct(dwmc) from tbl_maintable where xzqyid in "+r+""};commonObj.querySqls(e,{success:function(i){n._baseCodeHashMap.put("servicecode_projclassid",i.projclassid);n._baseCodeHashMap.put("servicecode_lrr",formatJsonArrayToArray(i.lrr,"lrr"));n._baseCodeHashMap.put("servicecode_dwmc",formatJsonArrayToArray(i.dwmc,"dwmc"));t.success()},fail:function(n){_blockMessage.show("querySqls<br/>"+n,"fail")}})},fail:function(t){_blockMessage.show(n._serviceUrl_tbl_maintable_detailall+"GetXzqyIdTextString<br/>"+t,"fail")},error:function(t){_blockMessage.show(n._serviceUrl_tbl_maintable_detailall+"GetXzqyIdTextString<br/>"+t,"fail")}})},initSearchControl:function(t){try{var f=n._baseCodeHashMap.get("servicecode_xzfq"),i=n._baseCodeHashMap.get("servicecode_projclassid"),r=[{id:"1",text:"是"},{id:"0",text:"否"}],u=[];controlObj.multidropdownlistinit("search_dropdown_sys_delflag_tbl_maintable_query",r);controlObj.multidropdownlistinit("search_dropdown_sys_projectclassdtl1_tbl_maintable_query",u);controlObj.multidropdownlistinit("search_dropdown_sys_projectclassdtl2_tbl_maintable_query",u);controlObj.multidropdownlistinit("search_dropdown_sys_first_tbl_maintable_query",r);controlObj.singledropdownlistinit("search_dropdown_sys_projectclassid_tbl_maintable_query",i,n.search_dropdown_sys_projectclassid_onchange);controlObj.multidropdownlistinit("search_dropdown_xzqy_tbl_maintable_query",f);controlObj.datetimeinit("search_datetime_lrrq_tbl_maintable_query_datefrom","search_datetime_lrrq_tbl_maintable_query_timefrom");controlObj.datetimeinit("search_datetime_lrrq_tbl_maintable_query_dateto","search_datetime_lrrq_tbl_maintable_query_timeto");controlObj.datetime("search_datetime_lrrq_tbl_maintable_query_datefrom","search_datetime_lrrq_tbl_maintable_query_timefrom","1900-01-01 00:00:00");controlObj.datetime("search_datetime_lrrq_tbl_maintable_query_dateto","search_datetime_lrrq_tbl_maintable_query_timeto","1900-01-01 00:00:00");controlObj.multidropdownlistinit("search_dropdown_xmlx_tbl_maintable_query",i);$("#div_search_modal_tbl_maintable_query").modal({keyboard:!1,backdrop:"static",show:!1});t.success()}catch(e){_blockMessage.show("that.initSearchControl执行失败。<br/>"+e.message,"fail")}},search_dropdown_sys_projectclassid_onchange:function(t){n.initProjDtlControlByProjclassID(t.val)},initProjDtlControlByProjclassID:function(t,i){var r={t_projclass_dtl1:"select projstate as id,value1 as text from t_projclass_dtl1 where projclassid = '"+t+"' and value4>=0 order by to_number(sys_orderid)",t_projclass_dtl2:"select projstate as id ,projname as text from t_projclass_dtl2  where projclassid = '"+t+"'"};commonObj.querySqls(r,{success:function(t){n._baseCodeHashMap.put("t_projclass_dtl1",t.t_projclass_dtl1);n._baseCodeHashMap.put("t_projclass_dtl2",t.t_projclass_dtl2);controlObj.multidropdownlistinit("search_dropdown_sys_projectclassdtl1_tbl_maintable_query",t.t_projclass_dtl1);controlObj.multidropdownlistinit("search_dropdown_sys_projectclassdtl2_tbl_maintable_query",t.t_projclass_dtl2);controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl1_tbl_maintable_query","");controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl2_tbl_maintable_query","");i&&i.success()},fail:function(n){_blockMessage.show("querySqls<br/>"+n,"fail")}})},setSearchData:function(t){try{controlObj.singledropdownlistid("search_dropdown_sys_projectclassid_tbl_maintable_query",_pr_projectClassId);n.initProjDtlControlByProjclassID(_pr_projectClassId,{success:function(){controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl1_tbl_maintable_query","");controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl2_tbl_maintable_query","")}});switch(n._pr_searchtype){case"1":n._pr_searchcontent.type1!=undefined&&$("#txt_command_search_tbl_maintable_query").val(n._pr_searchcontent.type1);break;case"2":if(n._pr_searchcontent.type2!=undefined){var i=n._pr_searchcontent.type2;controlObj.text("search_txt_sys_processinsid_tbl_maintable_query",i.sys_processinsid);controlObj.text("search_txt_fk_tbl_maintable_sys_id_tbl_maintable_query",i.fk_tbl_maintable_sys_id);controlObj.text("search_txt_fk_workflow_sys_id_tbl_maintable_query",i.fk_workflow_sys_id);controlObj.text("search_txt_value1_tbl_maintable_query",i.value1);controlObj.text("search_txt_value2_tbl_maintable_query",i.value2);controlObj.text("search_txt_value3_tbl_maintable_query",i.value3);controlObj.text("search_txt_value4_tbl_maintable_query",i.value4);controlObj.text("search_txt_value5_tbl_maintable_query",i.value5);controlObj.text("search_txt_value6_tbl_maintable_query",i.value6);controlObj.text("search_txt_value7_tbl_maintable_query",i.value7);controlObj.text("search_txt_value8_tbl_maintable_query",i.value8);controlObj.text("search_txt_value9_tbl_maintable_query",i.value9);controlObj.text("search_txt_value10_tbl_maintable_query",i.value10);controlObj.multidropdownlistid("search_dropdown_sys_delflag_tbl_maintable_query",i.sys_delflag);controlObj.text("search_txt_sys_processnextuser_tbl_maintable_query",i.sys_processnextuser);controlObj.multidropdownlistid("search_dropdown_sys_first_tbl_maintable_query",i.sys_first);controlObj.singledropdownlistid("search_dropdown_sys_projectclassid_tbl_maintable_query",i.sys_projectclassid);n.initProjDtlControlByProjclassID(i.sys_projectclassid,{success:function(){controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl1_tbl_maintable_query",i.sys_projectclassdtl1);controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl2_tbl_maintable_query",i.sys_projectclassdtl2)}});controlObj.text("search_txt_shpid_tbl_maintable_query",i.shpid);controlObj.text("search_txt_xmmc_tbl_maintable_query",i.xmmc);controlObj.multidropdownlistid("search_dropdown_xzqy_tbl_maintable_query",i.xzqyid);controlObj.text("search_txt_dwmc_tbl_maintable_query",i.dwmc);controlObj.text("search_txt_lrr_tbl_maintable_query",i.lrr);controlObj.datetime("search_datetime_lrrq_tbl_maintable_query_datefrom","search_datetime_lrrq_tbl_maintable_querytimefrom",i.lrrqfrom);controlObj.datetime("search_datetime_lrrq_tbl_maintable_query_dateto","search_datetime_lrrq_tbl_maintable_query_timeto",i.lrrqto);controlObj.text("search_txt_bz_tbl_maintable_query",i.bz);controlObj.multidropdownlistid("search_dropdown_xmlx_tbl_maintable_query",i.xmlxid)}}t.success()}catch(r){_blockMessage.show("that.setSearchData执行失败。<br/>"+r.message,"fail")}},getSearchData:function(t){try{switch(n._pr_searchtype){case"1":n._pr_searchcontent.type1=$("#txt_command_search_tbl_maintable_query").val();break;case"2":var i={};i.sys_processinsid=controlObj.text("search_txt_sys_processinsid_tbl_maintable_query");i.fk_tbl_maintable_sys_id=controlObj.text("search_txt_fk_tbl_maintable_sys_id_tbl_maintable_query");i.fk_workflow_sys_id=controlObj.text("search_txt_fk_workflow_sys_id_tbl_maintable_query");i.value1=controlObj.text("search_txt_value1_tbl_maintable_query");i.value2=controlObj.text("search_txt_value2_tbl_maintable_query");i.value3=controlObj.text("search_txt_value3_tbl_maintable_query");i.value4=controlObj.text("search_txt_value4_tbl_maintable_query");i.value5=controlObj.text("search_txt_value5_tbl_maintable_query");i.value6=controlObj.text("search_txt_value6_tbl_maintable_query");i.value7=controlObj.text("search_txt_value7_tbl_maintable_query");i.value8=controlObj.text("search_txt_value8_tbl_maintable_query");i.value9=controlObj.text("search_txt_value9_tbl_maintable_query");i.value10=controlObj.text("search_txt_value10_tbl_maintable_query");i.sys_delflag=controlObj.multidropdownlistid("search_dropdown_sys_delflag_tbl_maintable_query");i.sys_processnextuser=controlObj.text("search_txt_sys_processnextuser_tbl_maintable_query");i.sys_projectclassdtl1=controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl1_tbl_maintable_query");i.sys_projectclassdtl2=controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl2_tbl_maintable_query");i.sys_first=controlObj.multidropdownlistid("search_dropdown_sys_first_tbl_maintable_query");i.sys_projectclassid=controlObj.singledropdownlistid("search_dropdown_sys_projectclassid_tbl_maintable_query");i.shpid=controlObj.text("search_txt_shpid_tbl_maintable_query");i.xmmc=controlObj.text("search_txt_xmmc_tbl_maintable_query");i.xzqyid=controlObj.multidropdownlistid("search_dropdown_xzqy_tbl_maintable_query");i.dwmc=controlObj.text("search_txt_dwmc_tbl_maintable_query");i.lrr=controlObj.text("search_txt_lrr_tbl_maintable_query");i.lrrqfrom=controlObj.datetime("search_datetime_lrrq_tbl_maintable_query_datefrom","search_datetime_lrrq_tbl_maintable_query_timefrom");i.lrrqto=controlObj.datetime("search_datetime_lrrq_tbl_maintable_query_dateto","search_datetime_lrrq_tbl_maintable_query_timeto");i.bz=controlObj.text("search_txt_bz_tbl_maintable_query");i.xmlxid=controlObj.multidropdownlistid("search_dropdown_xmlx_tbl_maintable_query");n._pr_searchcontent.type2=i}t.success()}catch(r){_blockMessage.show("that.getSearchData执行失败。<br/>"+r.message,"fail")}},checkSearchData:function(t){try{var r=n._pr_searchcontent.type2,i=new hashMap,u=new hashMap;r.sys_processinsid.length>100&&(i.put("search_txt_sys_processinsid_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_sys_processinsid_tbl_maintable_query","top"));r.fk_tbl_maintable_sys_id.length>100&&(i.put("search_txt_fk_tbl_maintable_sys_id_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_fk_tbl_maintable_sys_id_tbl_maintable_query","top"));r.fk_workflow_sys_id.length>100&&(i.put("search_txt_fk_workflow_sys_id_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_fk_workflow_sys_id_tbl_maintable_query","top"));r.value1.length>100&&(i.put("search_txt_value1_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value1_tbl_maintable_query","top"));r.value2.length>100&&(i.put("search_txt_value2_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value2_tbl_maintable_query","top"));r.value3.length>100&&(i.put("search_txt_value3_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value3_tbl_maintable_query","top"));r.value4.length>100&&(i.put("search_txt_value4_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value4_tbl_maintable_query","top"));r.value5.length>100&&(i.put("search_txt_value5_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value5_tbl_maintable_query","top"));r.value6.length>100&&(i.put("search_txt_value6_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value6_tbl_maintable_query","top"));r.value7.length>100&&(i.put("search_txt_value7_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value7_tbl_maintable_query","top"));r.value8.length>100&&(i.put("search_txt_value8_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value8_tbl_maintable_query","top"));r.value9.length>100&&(i.put("search_txt_value9_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value9_tbl_maintable_query","top"));r.value10.length>100&&(i.put("search_txt_value10_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_value10_tbl_maintable_query","top"));r.sys_delflag.length>100&&i.put("search_dropdown_sys_delflag_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>');r.sys_processnextuser.length>100&&(i.put("search_txt_sys_processnextuser_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_sys_processnextuser_tbl_maintable_query","top"));r.sys_projectclassdtl1.length>100&&i.put("search_dropdown_sys_projectclassdtl1_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>');r.sys_projectclassdtl2.length>100&&i.put("search_dropdown_sys_projectclassdtl2_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>');r.sys_first.length>100&&i.put("search_dropdown_sys_first_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>');r.sys_projectclassid.length>100&&i.put("search_dropdown_sys_projectclassid_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>');r.shpid.length>100&&(i.put("search_txt_shpid_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_shpid_tbl_maintable_query","top"));r.xmmc.length>100&&(i.put("search_txt_xmmc_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_xmmc_tbl_maintable_query","top"));r.xzqyid.length>100&&i.put("search_dropdown_xzqy_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>');r.dwmc.length>100&&(i.put("search_txt_dwmc_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_dwmc_tbl_maintable_query","top"));r.lrr.length>100&&(i.put("search_txt_lrr_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_lrr_tbl_maintable_query","top"));r.bz.length>100&&(i.put("search_txt_bz_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>'),u.put("search_txt_bz_tbl_maintable_query","top"));r.xmlxid.length>100&&i.put("search_dropdown_xmlx_tbl_maintable_query",'长度不能超过<a style="color:red">100<\/a>');i.keys().length>0?(n._validateMessage.show(i,u,!1),t.fail()):(n._validateMessage.hidden(),t.success())}catch(f){_blockMessage.show("that.checkSearchData执行失败。<br/>"+f.message,"fail")}},creatWhereClause:function(t){var i="",f,e,r,u,o,s,h;switch(n._pr_searchtype){case"1":if(n._pr_searchcontent.type1!=undefined){if(f=n._pr_searchcontent.type1.split(" "),f.length>0){for(e=0;e<f.length;e++)f[e]!=""&&(i+="(",i+=" sys_processnextuser like '%"+f[e]+"%' or ",i+=" sys_projectclassdtl1_name like '%"+f[e]+"%' or ",i+=" sys_projectclassdtl2_name like '%"+f[e]+"%' or ",i+=" sys_projectclassid_name like '%"+f[e]+"%' or ",i+=" shpid like '%"+f[e]+"%' or ",i+=" sys_id like '%"+f[e]+"%' or ",i+=" xmmc like '%"+f[e]+"%' or ",i+=" xzqy like '%"+f[e]+"%' or ",i+=" lrr like '%"+f[e]+"%' or ",i+=" to_char(lrrq,'yyyy-MM-dd hh24:mi:ss') like '%"+f[e]+"%' or ",i+=" bz like '%"+f[e]+"%' or ",i+=" xmlx like '%"+f[e]+"%' or ",i.length>0&&(i=i.substr(0,i.length-3)),i+=") and ");i.length>0&&(i=i.substr(0,i.length-4))}n._whereClauseString=i}break;case"2":n._pr_searchcontent.type2!=undefined&&(r=n._pr_searchcontent.type2,r.sys_delflag.length>0&&(u=r.sys_delflag.split(","),i+="(",$.each(u,function(n){i+=n==0?" ":" or ";i+="(('^'||sys_delflag||'^') like ('%^'||'"+u[n]+"'||'^%')) "}),i+=") and "),r.sys_processnextuser.length>0&&(i+=" sys_processnextuser like '%"+r.sys_processnextuser+"%' and "),r.sys_projectclassdtl1.length>0&&(u=r.sys_projectclassdtl1.split(","),i+="(",$.each(u,function(n){i+=n==0?" ":" or ";i+="(('^'||sys_projectclassdtl1||'^') like ('%^'||'"+u[n]+"'||'^%')) "}),i+=") and "),r.sys_projectclassdtl2.length>0&&(u=r.sys_projectclassdtl2.split(","),i+="(",$.each(u,function(n){i+=n==0?" ":" or ";i+="(('^'||sys_projectclassdtl2||'^') like ('%^'||'"+u[n]+"'||'^%')) "}),i+=") and "),r.sys_first.length>0&&(u=r.sys_first.split(","),i+="(",$.each(u,function(n){i+=n==0?" ":" or ";i+="(('^'||sys_first||'^') like ('%^'||'"+u[n]+"'||'^%')) "}),i+=") and "),r.sys_projectclassid.length>0&&(u=r.sys_projectclassid.split(","),i+="(",$.each(u,function(n){i+=n==0?" ":" or ";i+="(('^'||sys_projectclassid||'^') like ('%^'||'"+u[n]+"'||'^%')) "}),i+=") and "),r.shpid.length>0&&(i+=" shpid like '%"+r.shpid+"%' and "),r.xmmc.length>0&&(i+=" xmmc like '%"+r.xmmc+"%' and "),r.xzqyid.length>0&&(u=r.xzqyid.split(","),i+="(",$.each(u,function(n){i+=n==0?" ":" or ";i+="(('^'||xzqyid||'^') like ('%^'||'"+u[n]+"'||'^%')) "}),i+=") and "),r.dwmc.length>0&&(i+=" dwmc like '%"+r.dwmc+"%' and "),r.lrr.length>0&&(i+=" lrr like '%"+r.lrr+"%' and "),r.lrrqfrom!="1900-01-01 00:00:00"&&(i+=" lrrq >= to_date('"+r.lrrqfrom+"','yyyy-MM-dd hh24:mi:ss') and "),r.lrrqto!="1900-01-01 00:00:00"&&(i+=" lrrq <= to_date('"+r.lrrqto+"','yyyy-MM-dd hh24:mi:ss') and "),r.bz.length>0&&(i+=" bz like '%"+r.bz+"%' and "),r.xmlxid.length>0&&(u=r.xmlxid.split(","),i+="(",$.each(u,function(n){i+=n==0?" ":" or ";i+="(('^'||xmlxid||'^') like ('%^'||'"+u[n]+"'||'^%')) "}),i+=") and "),i.length>0&&(i=i.substr(0,i.length-4)));n._whereClauseString=i}n._whereClauseString=n._whereClauseString==""?" SYS_DELFLAG='0'":"("+n._whereClauseString+") and ( SYS_DELFLAG='0')";n._baseWhereClauseString==""?(o=n._baseCodeHashMap.get("servicecode_xzfq"),s="",$.each(o,function(n){s+=n==0?"'"+o[n].id+"'":",'"+o[n].id+"'"}),h="xzqyid in ("+s+")",h+=" and sys_projectclassid = '"+_pr_projectClassId+"'",n._baseWhereClauseString=h,n._whereClauseString=n._whereClauseString==""?n._baseWhereClauseString:"("+n._whereClauseString+") and ("+n._baseWhereClauseString+")",t.success()):(n._whereClauseString=n._whereClauseString==""?n._baseWhereClauseString:"("+n._whereClauseString+") and ("+n._baseWhereClauseString+")",t.success())},clearSearchData:function(){switch(n._pr_searchtype){case"1":n._pr_searchcontent.type2==undefined&&(n._pr_searchcontent.type2={});n._pr_searchcontent.type2.sys_processinsid="";controlObj.text("search_txt_sys_processinsid_tbl_maintable_query",n._pr_searchcontent.type2.sys_processinsid);n._pr_searchcontent.type2.fk_tbl_maintable_sys_id="";controlObj.text("search_txt_fk_tbl_maintable_sys_id_tbl_maintable_query",n._pr_searchcontent.type2.fk_tbl_maintable_sys_id);n._pr_searchcontent.type2.fk_workflow_sys_id="";controlObj.text("search_txt_fk_workflow_sys_id_tbl_maintable_query",n._pr_searchcontent.type2.fk_workflow_sys_id);n._pr_searchcontent.type2.value1="";controlObj.text("search_txt_value1_tbl_maintable_query",n._pr_searchcontent.type2.value1);n._pr_searchcontent.type2.value2="";controlObj.text("search_txt_value2_tbl_maintable_query",n._pr_searchcontent.type2.value2);n._pr_searchcontent.type2.value3="";controlObj.text("search_txt_value3_tbl_maintable_query",n._pr_searchcontent.type2.value3);n._pr_searchcontent.type2.value4="";controlObj.text("search_txt_value4_tbl_maintable_query",n._pr_searchcontent.type2.value4);n._pr_searchcontent.type2.value5="";controlObj.text("search_txt_value5_tbl_maintable_query",n._pr_searchcontent.type2.value5);n._pr_searchcontent.type2.value6="";controlObj.text("search_txt_value6_tbl_maintable_query",n._pr_searchcontent.type2.value6);n._pr_searchcontent.type2.value7="";controlObj.text("search_txt_value7_tbl_maintable_query",n._pr_searchcontent.type2.value7);n._pr_searchcontent.type2.value8="";controlObj.text("search_txt_value8_tbl_maintable_query",n._pr_searchcontent.type2.value8);n._pr_searchcontent.type2.value9="";controlObj.text("search_txt_value9_tbl_maintable_query",n._pr_searchcontent.type2.value9);n._pr_searchcontent.type2.value10="";controlObj.text("search_txt_value10_tbl_maintable_query",n._pr_searchcontent.type2.value10);n._pr_searchcontent.type2.sys_delflag="";controlObj.multidropdownlistid("search_dropdown_sys_delflag_tbl_maintable_query",n._pr_searchcontent.type2.sys_delflag);n._pr_searchcontent.type2.sys_processnextuser="";controlObj.text("search_txt_sys_processnextuser_tbl_maintable_query",n._pr_searchcontent.type2.sys_processnextuser);n._pr_searchcontent.type2.sys_projectclassdtl1="";controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl1_tbl_maintable_query",n._pr_searchcontent.type2.sys_projectclassdtl1);n._pr_searchcontent.type2.sys_projectclassdtl2="";controlObj.multidropdownlistid("search_dropdown_sys_projectclassdtl2_tbl_maintable_query",n._pr_searchcontent.type2.sys_projectclassdtl2);n._pr_searchcontent.type2.sys_first="";controlObj.multidropdownlistid("search_dropdown_sys_first_tbl_maintable_query",n._pr_searchcontent.type2.sys_first);n._pr_searchcontent.type2.sys_projectclassid="";controlObj.singledropdownlistid("search_dropdown_sys_projectclassid_tbl_maintable_query",n._pr_searchcontent.type2.sys_projectclassid);n._pr_searchcontent.type2.shpid="";controlObj.text("search_txt_shpid_tbl_maintable_query",n._pr_searchcontent.type2.shpid);n._pr_searchcontent.type2.xmmc="";controlObj.text("search_txt_xmmc_tbl_maintable_query",n._pr_searchcontent.type2.xmmc);n._pr_searchcontent.type2.xzqyid="";controlObj.multidropdownlistid("search_dropdown_xzqy_tbl_maintable_query",n._pr_searchcontent.type2.xzqyid);n._pr_searchcontent.type2.dwmc="";controlObj.text("search_txt_dwmc_tbl_maintable_query",n._pr_searchcontent.type2.dwmc);n._pr_searchcontent.type2.lrr="";controlObj.text("search_txt_lrr_tbl_maintable_query",n._pr_searchcontent.type2.lrr);n._pr_searchcontent.type2.lrrqfrom="1900-01-01 00:00:00";n._pr_searchcontent.type2.lrrqto="1900-01-01 00:00:00";controlObj.datetime("search_datetime_lrrq_tbl_maintable_query_datefrom","search_datetime_lrrq_tbl_maintable_query_timefrom",n._pr_searchcontent.type2.lrrqfrom);controlObj.datetime("search_datetime_lrrq_tbl_maintable_query_dateto","search_datetime_lrrq_tbl_maintable_query_timeto",n._pr_searchcontent.type2.lrrqto);n._pr_searchcontent.type2.bz="";controlObj.text("search_txt_bz_tbl_maintable_query",n._pr_searchcontent.type2.bz);n._pr_searchcontent.type2.xmlxid="";controlObj.multidropdownlistid("search_dropdown_xmlx_tbl_maintable_query",n._pr_searchcontent.type2.xmlxid);break;case"2":n._pr_searchcontent.type1==undefined&&(n._pr_searchcontent.type1="");$("#txt_command_search_tbl_maintable_query").val("")}},gridSelectedChange:function(){if(n._pr_gridselectids=="")$("#btn_command_clearselect_tbl_maintable_query").addClass("hidden");else{$("#btn_command_clearselect_tbl_maintable_query").removeClass("hidden");var t=n._pr_gridselectids.split("^").length,i=$("#table_grid_tbl_maintable_query").bootstrapTable("getSelections").length;$("#btn_command_clearselect_tbl_maintable_query .cc-badge-p").html(i+"/"+t)}}};return n}();$(document).ready(function(){tbl_maintable_query_Obj.init()});